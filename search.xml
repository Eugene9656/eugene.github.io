<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Docker的常用命令介绍</title>
    <url>/2020/05/09/Docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<p>Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。
<img src="/2020/05/09/Docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BB%8B%E7%BB%8D/96bb2c9dc0.jpg" class="lazyload" data-srcset="/2020/05/09/Docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BB%8B%E7%BB%8D/96bb2c9dc0.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<span id="more"></span>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo service docker start  <span class="comment"># 启动docker</span></span><br><span class="line">sudo service docker stop  <span class="comment"># 停止docker</span></span><br><span class="line">sudo service docker restart  <span class="comment"># 重启docker</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> docker  <span class="comment"># 开机启动docker</span></span><br><span class="line"><span class="comment"># 列出镜像</span></span><br><span class="line">docker image ls</span><br><span class="line"><span class="comment"># 拉取镜像</span></span><br><span class="line">docker image pull library/hello-world</span><br><span class="line"><span class="comment"># 删除镜像</span></span><br><span class="line">docker image rm 镜像id/镜像ID</span><br><span class="line"><span class="comment"># 创建容器</span></span><br><span class="line">docker run [选项参数] 镜像名 [命令]</span><br><span class="line"><span class="comment"># 停止一个已经在运行的容器</span></span><br><span class="line">docker container stop 容器名或容器id</span><br><span class="line"><span class="comment"># 启动一个已经停止的容器</span></span><br><span class="line">docker container start 容器名或容器id</span><br><span class="line"><span class="comment"># kill掉一个已经在运行的容器</span></span><br><span class="line">docker container <span class="built_in">kill</span> 容器名或容器id</span><br><span class="line"><span class="comment"># 删除容器</span></span><br><span class="line">docker container rm 容器名或容器id</span><br></pre></td></tr></table></figure>
<p>启动容器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker start &lt;容器id或name&gt;</span><br></pre></td></tr></table></figure>
<p>使容器自启动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker update --restart=always &lt;容器id或name&gt;</span><br></pre></td></tr></table></figure>
<p>--restart具体参数值详细信息：
no -  容器退出时，不重启容器；
on-failure - 只有在非0状态退出时才从新启动容器；
always - 无论退出状态是如何，都重启容器；</p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML5和CSS3有哪些新增内容</title>
    <url>/2020/11/19/HTML5%E5%92%8CCSS3%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B0%E5%A2%9E%E5%86%85%E5%AE%B9/</url>
    <content><![CDATA[<p>html5是超文本标记语言（HTML）的第五次重大修改，有全新的元素，属性和行为</p>
<h2 id="H5新增内容">H5新增内容</h2>
<h3 id="语义化标签">语义化标签</h3>
<ul>
<li>&lt;header&gt; :头部标签</li>
<li>&lt;nav&gt; :导航标签</li>
<li>&lt;article&gt; :内容标签</li>
<li>&lt;section&gt; :块级标签</li>
<li>&lt;aside&gt; :侧边栏标签</li>
<li>&lt;footer&gt; :尾部标签
<img src="/2020/11/19/HTML5%E5%92%8CCSS3%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B0%E5%A2%9E%E5%86%85%E5%AE%B9/yuyi.png" class="lazyload" data-srcset="/2020/11/19/HTML5%E5%92%8CCSS3%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B0%E5%A2%9E%E5%86%85%E5%AE%B9/yuyi.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></li>
<li>语义化标签主要针对搜索引擎</li>
<li>可以在页面中使用多次</li>
<li>在ie9中，需要把这些元素转换为块级元素</li>
<li>移动端更喜欢用这些标签</li>
</ul>
<h3 id="多媒体标签">多媒体标签</h3>
<ul>
<li>&lt;audio&gt; :音频</li>
<li>&lt;video&gt; :视频</li>
</ul>
<h3 id="表单属性">表单属性</h3>
<ul>
<li>type=&quot;email&quot; :限制用户输入为email类型</li>
<li>type=&quot;url&quot; :限制用户输入为url类型</li>
<li>type=&quot;date&quot; :限制用户输入为日期类型</li>
<li>type=&quot;time&quot; :限制用户输入为时间类型</li>
<li>type=&quot;month&quot; :限制用户输入为月类型</li>
<li>type=&quot;week&quot; :限制用户输入为周类型</li>
<li>type=&quot;number&quot; :限制用户输入为数字类型</li>
<li>type=&quot;tel&quot; :手机号码</li>
<li>type=&quot;search&quot; :搜索框</li>
<li>type=&quot;color: :颜色选择表单</li>
</ul>
<h2 id="CSS3新增内容">CSS3新增内容</h2>
<h3 id="属性选择器">属性选择器</h3>
<ul>
<li>E[att] :选择具有att属性的E元素</li>
<li>E[att=&quot;val&quot;] :选择具有att属性且值等于val的E元素</li>
<li>E[att^=&quot;val&quot;] :选择具有att属性且值以val开头的E元素</li>
<li>E[att$=&quot;val&quot;] :选择具有att属性且值以val结尾的E元素</li>
<li>E[att*=&quot;val&quot;] :选择具有att属性且值中含有val的E元素</li>
</ul>
<blockquote>
<p>属性选择器的权重是10</p>
</blockquote>
<h3 id="结构伪类选择器">结构伪类选择器</h3>
<ul>
<li>E:first-child :匹配父元素中的第一个子元素E</li>
<li>E:last-child :匹配父元素中的最后一个子元素E</li>
<li>E:nth-child(n) :匹配父元素中的第n个子元素E</li>
<li>E:first-of-type :指定类型E的第一个</li>
<li>E:last-of-type :指定类型E的最后一个</li>
<li>E:nth-of-type(n) :指定类型E的第n个</li>
</ul>
<blockquote>
<p>n可以是even(偶数)和odd(奇数),或者是公式2n(偶数)、2n+1(奇数)等</p>
</blockquote>
<h3 id="伪元素选择器">伪元素选择器</h3>
<ul>
<li>::before :在元素内部的前面插入内容</li>
<li>::after :在元素内部的后面插入内容</li>
</ul>
<blockquote>
<p>必须有content属性，属于行内元素，权重为1</p>
</blockquote>
<h3 id="2d转换">2d转换</h3>
<ul>
<li>transition: all 0.3s; 动画过渡</li>
<li>transform: translate(x,y);  #移动到新位置，不影响其他元素位置</li>
<li>transform: translate(50%,50%);  #移动到新位置，自身宽度的一半</li>
<li>transform: rotate(45deg);  #顺时针旋转45度，角度为负数时是逆时针旋转</li>
<li>transform-origin: left bottom;  #转换中心点，可以用方位词像素和百分比</li>
<li>transform: scale(x,y); #缩放，使用没有单位的数字参数作为缩放倍数</li>
</ul>
<blockquote>
<p>同时添加多个转换，中间用空格隔开，先后顺序会影响转换的结果。有位移和其他属性时，要把位移放在最前面</p>
</blockquote>
<h4 id="动画">动画</h4>
<p>使用keyframes定义动画</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@keyframes 动画名称 &#123;</span><br><span class="line">    0%&#123;</span><br><span class="line">        width:100px;</span><br><span class="line">    &#125;</span><br><span class="line">    100%&#123;</span><br><span class="line">        width:200px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>元素使用动画</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 200px;</span><br><span class="line">    background-color: aqua;</span><br><span class="line">    margin: 100px auto;</span><br><span class="line">    animation-name: 动画名称；</span><br><span class="line">    animation-duration: 持续时间；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>@keyframes :规定动画</li>
<li>animation :所有动画属性的简写</li>
<li>animation-name :规定@keyframes的动画名称（必要）</li>
<li>animation-duration :规定动画完成的周期，默认是0（必要的）</li>
<li>animation-timing-function :规定动画速度曲线，默认是&quot;ease&quot;</li>
<li>animation-delay :规定动画何时开始，默认是0</li>
<li>animation-iteation-count :规定动画播放的次数，默认是1，还有infinite</li>
<li>animation-direcition :规定动画是否在下一周期逆向播放，默认是&quot;normal&quot;</li>
<li>animation-play-state :规定动画是否正在运行或暂停。默认是&quot;running&quot;还有&quot;paused&quot;</li>
<li>animation-fill-mode :规定动画结束后状态，保持forwards回到起始backwards</li>
</ul>
<p>动画简写属性：
animation :动画名称 持续时间 运动曲线 何时播放 播放次数 是否反向 动画起始或结束状态</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">animation: myfirst 5s linear 2s infinite alternate;</span><br></pre></td></tr></table></figure>
<h3 id="3D转换">3D转换</h3>
<p>3d移动</p>
<ul>
<li>transform:translateX(100px);</li>
<li>transform:translateY(100px);</li>
<li>transform:translateZ(100px);在z轴移动，单位px</li>
<li>transform:translate3d(x,y,z);其中x,y,z分别表示要移动的方向的距离</li>
</ul>
<p>透视
perspective:100px;给要透视元素的父盒子添加透视效果,有透视才能看到3d效果</p>
<p>旋转</p>
<ul>
<li>transform:rotateX(45deg);</li>
<li>transform:rotateY(45deg);</li>
<li>transform:rotateZ(45deg);沿着z正向旋转45度</li>
<li>transform:rotate3d(x,y,z,deg);沿着自定义轴旋转，deg为角度</li>
</ul>
<p>3d呈现</p>
<ul>
<li>transform-style:flaat;默认值，子元素不开启3d立体空间</li>
<li>transform-style:preserve-3d; 子元素开启立体空间</li>
</ul>
<blockquote>
<p>控制字元素是否开启3d环境，属性指定给父元素但影响的是子元素</p>
</blockquote>
<h3 id="浏览器的私有前缀">浏览器的私有前缀</h3>
<p>浏览器私有前缀是兼容老版本写法，新版本浏览器无需添加</p>
<ul>
<li>-moz-: 代表firefox浏览器私有属性</li>
<li>-ms-: 代表ie浏览器私有属性</li>
<li>-webkit-:代表safari、chrome私有属性</li>
<li>-o-:代表Opera私有属性</li>
</ul>
<p>使用方法:
-o-border-radius:10px;</p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title>Git 命令速查表</title>
    <url>/2021/05/13/GIT%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5%E8%A1%A8/</url>
    <content><![CDATA[<p>Git 是一款流行的代码版本管理工具，本页提供了常用 Git 命令的速查功能，以及相关的术语参考，是程序开发人员必备的参考工具。</p>
<h2 id="Git-常用命令">Git 常用命令</h2>
<h3 id="创建命令-Create">创建命令 Create</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git clone &lt;url&gt;</code></td>
<td>克隆远程仓库</td>
</tr>
<tr>
<td><code>git init</code></td>
<td>初始化本地 git 仓库（即创建新的本地仓库）</td>
</tr>
</tbody>
</table>
<h3 id="本地更改-Local-Changes">本地更改 Local Changes</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git status</code></td>
<td>查看当前分支状态</td>
</tr>
<tr>
<td><code>git diff</code></td>
<td>查看已跟踪文件的变更</td>
</tr>
<tr>
<td><code>git add &lt;file&gt;</code></td>
<td>将指定的文件添加到暂存区</td>
</tr>
<tr>
<td><code>git add .</code></td>
<td>将所有有变更的文件添加到暂存区</td>
</tr>
<tr>
<td><code>git commit -a</code></td>
<td>提交所有本地修改</td>
</tr>
<tr>
<td><code>git commit -m &quot;xxx&quot;</code></td>
<td>把已添加至暂存区的文件执行提交，并以 xxx 作为本次提交的描述</td>
</tr>
<tr>
<td><code>git commit --amend -m &quot;xxx&quot;</code></td>
<td>修改上一次提交（请勿用该命令修改已发布的提交）</td>
</tr>
<tr>
<td><code>git commit -am &quot;xxx&quot;</code></td>
<td>该命令是 <code>git add .</code> 和 <code>git commit -m &quot;xxx&quot;</code> 的快捷方式</td>
</tr>
<tr>
<td><code>git commit -C HEAD -a -amend</code></td>
<td>增补提交（不会产生新的提交历史纪录）</td>
</tr>
<tr>
<td><code>git pull</code></td>
<td>拉取代码及快速合并</td>
</tr>
<tr>
<td><code>git pull -r &lt;branch&gt;</code></td>
<td>拉取远程代码及快速合并</td>
</tr>
<tr>
<td><code>git push</code></td>
<td>提交到git服务器</td>
</tr>
<tr>
<td><code>git push -f</code></td>
<td>强制提交到git服务器</td>
</tr>
<tr>
<td><code>git push origin branchName:branchName</code></td>
<td>推送本地的branchName(冒号前面的)分支到远程origin的branchName(冒号后面的)分支(没有会自动创建)</td>
</tr>
<tr>
<td><code>git stash</code></td>
<td>暂存当前修改，将所有置为 HEAD 状态</td>
</tr>
<tr>
<td><code>git stash save</code></td>
<td>作用等同于git stash，区别是可以加一些注释</td>
</tr>
<tr>
<td><code>git stash list</code></td>
<td>查看所有暂存列表</td>
</tr>
<tr>
<td><code>git stash push</code></td>
<td>把当前工作区的文件暂存到临时空间</td>
</tr>
<tr>
<td><code>git stash pop</code></td>
<td>把文件从临时空间中恢复到当前工作区</td>
</tr>
<tr>
<td><code>git stash clear</code></td>
<td>清除堆栈中的所有内容</td>
</tr>
<tr>
<td><code>git stash drop + 名称</code></td>
<td>从堆栈中移除某个指定的stash</td>
</tr>
<tr>
<td><code>git stash show</code></td>
<td>查看堆栈中最新保存的stash和当前目录的差异</td>
</tr>
<tr>
<td><code>git stash branch</code></td>
<td>从最新的stash创建分支</td>
</tr>
<tr>
<td><code>git stash apply</code></td>
<td>将堆栈中的内容应用到当前目录，不同于git stash pop，该命令不会将内容从堆栈中删除，也就说该命令能够将堆栈的内容多次应用到工作目录中，适应于多个分支的情况</td>
</tr>
</tbody>
</table>
<h3 id="提交历史-Commit-History">提交历史 Commit History</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git log</code></td>
<td>查看提交日志</td>
</tr>
<tr>
<td><code>git log -n</code></td>
<td>显示 n 行日志，n 为整数</td>
</tr>
<tr>
<td><code>git log --stat</code></td>
<td>查看本地提交日志</td>
</tr>
<tr>
<td><code>git show &lt;commit&gt;</code></td>
<td>查看提交日志及相关变动文件</td>
</tr>
<tr>
<td><code>git show HEAD</code></td>
<td>查看 HEAD 提交日志</td>
</tr>
<tr>
<td><code>git show HEAD^</code></td>
<td>查看 HEAD 的上一个版本提交日志。另外，<code>git show HEAD^^</code> 是查看上 2 个版本的提交日志；<code>git show HEAD^5</code> 是查看上 5 个版本的提交日志</td>
</tr>
<tr>
<td><code>git blame &lt;file&gt;</code></td>
<td>对于指定文件，逐行显示提交的哈希ID、提交者、提交日期以及修改的内容</td>
</tr>
<tr>
<td><code>git whatchanged</code></td>
<td>显示提交历史，以及每次提交变更的文件</td>
</tr>
<tr>
<td><code>gitk</code></td>
<td>查看当前分支历史纪录</td>
</tr>
<tr>
<td><code>gitk &lt;branch&gt;</code></td>
<td>查看某分支历史纪录</td>
</tr>
<tr>
<td><code>gitk --all</code></td>
<td>查看所有分支历史纪录</td>
</tr>
</tbody>
</table>
<h3 id="分支和标签-Branches-Tags">分支和标签 Branches &amp; Tags</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git branch</code></td>
<td>查看本地分支</td>
</tr>
<tr>
<td><code>git branch -r</code></td>
<td>查看远程分支</td>
</tr>
<tr>
<td><code>git branch -a</code></td>
<td>查看所有分支（本地和远程）</td>
</tr>
<tr>
<td><code>git branch -v</code></td>
<td>每个分支最后的提交</td>
</tr>
<tr>
<td><code>git branch --merged</code></td>
<td>查看所有分支已合并到当前分支的分支</td>
</tr>
<tr>
<td><code>git branch --no-merged</code></td>
<td>查看所有分支未合并到当前分支的分支</td>
</tr>
<tr>
<td><code>git branch -m &lt;new-branch&gt;</code></td>
<td>把当前分支的名称改成 <code>new-branch</code>；如果 <code>new-branch</code> 已存在，将不会执行改名</td>
</tr>
<tr>
<td><code>git branch -M &lt;new-branch&gt;</code></td>
<td>强制把当前分支的名称改成 <code>new-branch</code>（即使 <code>new-branch</code> 已存在）</td>
</tr>
<tr>
<td><code>git branch -m &lt;old-branch&gt; &lt;new-branch&gt;</code></td>
<td>把分支 <code>old-branch</code> 的名称改成 <code>new-branch</code>，如果 <code>new-branch</code> 已存在，将不会执行改名</td>
</tr>
<tr>
<td><code>git branch -M &lt;old-branch&gt; &lt;new-branch&gt;</code></td>
<td>强制把分支 <code>old-branch</code> 的名称改成 <code>new-branch</code>（即使 <code>new-branch</code> 已存在）</td>
</tr>
<tr>
<td><code>git checkout &lt;branch-name&gt;</code></td>
<td>切换到 <code>branch-name</code> 分支</td>
</tr>
<tr>
<td><code>git checkout -b &lt;branch-name&gt;</code></td>
<td>于当前分支创建并切换到新分支</td>
</tr>
<tr>
<td><code>git branch &lt;new-branch&gt;</code></td>
<td>新建分支（也可以用 <code>git checkout -b &lt;new-branch&gt;</code>）</td>
</tr>
<tr>
<td><code>git branch --track &lt;new&gt; &lt;remote&gt;</code></td>
<td>基于远程分支创建一个新分支，同 <code>git checkout --track &lt;remote/branch&gt;</code></td>
</tr>
<tr>
<td><code>git branch -d &lt;branch-name&gt;</code></td>
<td>删除本地分支</td>
</tr>
<tr>
<td><code>git push origin --delete &lt;branch-name&gt;</code></td>
<td>删除远程分支</td>
</tr>
<tr>
<td><code>git tag</code></td>
<td>列出所有本地标签</td>
</tr>
<tr>
<td><code>git tag &lt;tag-name&gt;</code></td>
<td>基于最新的提交创建标签</td>
</tr>
<tr>
<td><code>git tag -d &lt;tag-name&gt;</code></td>
<td>删除标签</td>
</tr>
</tbody>
</table>
<h3 id="删除命令-Remove">删除命令 Remove</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git rm &lt;file&gt;</code></td>
<td>删除文件（将从磁盘中删除文件）</td>
</tr>
<tr>
<td><code>git rm -r &lt;directory&gt;</code></td>
<td>递归删除指定目录下的文件</td>
</tr>
<tr>
<td><code>git rm --cached &lt;file&gt;</code></td>
<td>停止跟踪文件，不会从磁盘中删除</td>
</tr>
<tr>
<td><code>git mv &lt;old&gt; &lt;new&gt;</code></td>
<td>文件重命名</td>
</tr>
</tbody>
</table>
<h3 id="合并和衍合-Merge-Rebase">合并和衍合 Merge &amp; Rebase</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git merge &lt;branch&gt;</code></td>
<td>合并指定分支到当前分支，保留两个</td>
</tr>
<tr>
<td><code>git rebase &lt;branch&gt;</code></td>
<td>合并指定分支到当前分支，只保留一个</td>
</tr>
<tr>
<td><code>git rebase --abort</code></td>
<td>终止 rebase 操作，即回到执行 rebase 之前的状态</td>
</tr>
<tr>
<td><code>git rebase --continue</code></td>
<td>解决冲突后继续执行 rebase</td>
</tr>
<tr>
<td><code>git mergetool</code></td>
<td>使用配置文件指定的 mergetool 解决冲突</td>
</tr>
<tr>
<td><code>git add &lt;resolved-file&gt;</code><br><code>git rm &lt;resolved-file&gt;</code></td>
<td>使用编辑器手动解决文件冲突，并在冲突解决后，把文件标记为 resolved</td>
</tr>
</tbody>
</table>
<h3 id="撤销命令-Undo">撤销命令 Undo</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git reset --hard HEAD</code></td>
<td>将当前版本重置为 HEAD（用于 merge 失败的时候）</td>
</tr>
<tr>
<td><code>git reflog</code></td>
<td>查看命令历史，历史中记录了回退前的commit id</td>
</tr>
<tr>
<td><code>git reset &lt;commit&gt;</code></td>
<td>将当前版本重置为某一个提交状态，代码不变</td>
</tr>
<tr>
<td><code>git reset --hard &lt;commit&gt;</code></td>
<td>强制将当前版本重置为某一个提交状态，并丢弃那个状态之后的所有修改（请谨慎使用该命令）</td>
</tr>
<tr>
<td><code>git reset --merge &lt;commit&gt;</code></td>
<td>将当前版本重置为某一个提交状态，并保留版本库中不同的文件</td>
</tr>
<tr>
<td><code>git reset --keep &lt;commit&gt;</code></td>
<td>将当前版本重置为某一个提交状态，并保留未提交的本地修改</td>
</tr>
<tr>
<td><code>git revert &lt;commit&gt;</code></td>
<td>撤销提交</td>
</tr>
<tr>
<td><code>git restore &lt;file&gt;</code></td>
<td>丢弃指定文件的修改信息，即恢复到文件修改前的状态</td>
</tr>
<tr>
<td><code>git checkout -- &lt;file&gt;</code></td>
<td>同 <code>git restore &lt;file&gt;</code> 命令</td>
</tr>
<tr>
<td><code>git checkout HEAD &lt;file&gt;</code></td>
<td>对于指定文件，丢弃该文件的本地修改信息</td>
</tr>
<tr>
<td><code>git clean</code></td>
<td>清除工作目录中未跟踪的文件</td>
</tr>
<tr>
<td><code>git clean -n</code></td>
<td>列出哪些文件将从工作目录中删除</td>
</tr>
<tr>
<td><code>git clean -df</code></td>
<td>回退所有未被跟踪的文件</td>
</tr>
</tbody>
</table>
<h3 id="跟踪文件">跟踪文件</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git update-index --no-assume-unchanged &lt;file&gt;</code></td>
<td>强制跟踪指定文件</td>
</tr>
<tr>
<td><code>git update-index --assume-unchanged &lt;file&gt;</code></td>
<td>强制不跟踪指定文件</td>
</tr>
</tbody>
</table>
<h3 id="远程命令-Remote">远程命令 Remote</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git remote -v</code></td>
<td>查看远程版本库信息</td>
</tr>
<tr>
<td><code>git remote show &lt;remote&gt;</code></td>
<td>查看指定远程版本库信息</td>
</tr>
<tr>
<td><code>git remote add &lt;remote&gt; &lt;url&gt;</code></td>
<td>添加远程版本库</td>
</tr>
<tr>
<td><code>git remote update</code></td>
<td>更新远程版本库</td>
</tr>
<tr>
<td><code>git fetch &lt;remote&gt;</code></td>
<td>从远程库获取代码</td>
</tr>
</tbody>
</table>
<h3 id="配置命令-Git-Configuration">配置命令 Git Configuration</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git config --list</code></td>
<td>列出当前 Git 配置</td>
</tr>
<tr>
<td><code>git config --global user.name &lt;name&gt;</code></td>
<td>把参数 <code>name</code> 设置为当前用户使用的提交者的姓名；如果未指定 <code>name</code> 参数，则显示当前用户使用的提交者姓名</td>
</tr>
<tr>
<td><code>git config --global user.email &lt;email&gt;</code></td>
<td>把参数 <code>email</code> 设置为当前用户使用的提交者的邮箱；如果未指定 <code>email</code> 参数，则显示当前用户使用的提交者邮箱</td>
</tr>
<tr>
<td><code>git config --global alias.&lt;alias&gt; &lt;command&gt;</code></td>
<td>为 Git 命令创建全局的别名。比如，执行 <code>alias.glog log --graph --oneline --decorate</code> 命令后，<code>git glog</code> 就相当于 <code>git log --graph --oneline --decorate</code>。</td>
</tr>
<tr>
<td><code>git config --system core.editor &lt;editor&gt;</code></td>
<td>对于本机的所有用户，设置命令使用的编辑器（比如 <code>vim</code>）</td>
</tr>
<tr>
<td><code>git config --global --edit</code></td>
<td>在编辑器中打开全局配置文件（用于手动修改）</td>
</tr>
<tr>
<td><code>git config --global color.ui auto</code></td>
<td>使用不同的颜色渲染 Git 命令的输出结果</td>
</tr>
</tbody>
</table>
<h3 id="其他命令-Other">其他命令 Other</h3>
<table>
<thead>
<tr>
<th>Git</th>
<th>命令命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git var -l</code></td>
<td>列出 Git 环境变量</td>
</tr>
<tr>
<td><code>git help &lt;command&gt;</code></td>
<td>显示指定命令的帮助（将呼出该命令的 man 文件）</td>
</tr>
</tbody>
</table>
<h2 id="相关术语">相关术语</h2>
<p>下面列出了 Git 常见的术语，通过这些术语，可以更好地了解 Git 版本控制系统。</p>
<ul>
<li><strong>git</strong>：一个开源的、分布式的版本控制系统</li>
<li><strong>commit</strong>：提交，指一个 Git 对象，该对象是整个仓库以 SHA 表示的快照</li>
<li><strong>branch</strong>：分支，一个轻量的、可移动的指向一个 commit 的指针</li>
<li><strong>clone</strong>：克隆，指在本地创建一份远程仓库的副本</li>
<li><strong>remote</strong>：远程仓库，是指托管在 GitHub、GitLab 等地方的公共（或私有）仓库，团队所有成员均可向该仓库提交修改</li>
<li><strong>fork</strong>：创建一个其他用户的仓库的副本</li>
<li><strong>pull request</strong>：简称 PR，指针对某个仓库，请求别人拉取并合并你的修改。通常，发起 pull request 的人都是从被请求人那里 clone 代码</li>
<li><strong>HEAD</strong>：表示当前工作区，使用 <code>git checkout</code>命令，可以把 HEAD 指针切换到不同的分支、标签和 commit 上</li>
</ul>
<h2 id="常见问题">常见问题</h2>
<blockquote>
<p>Failed to connect to <a href="http://github.com">github.com</a> port 443: Operation timed out</p>
</blockquote>
<p>如果您使用代理进行网络连接，则必须将代理添加到git config文件中。 您需要通过在终端或命令行中运行此命令来配置Git以使用代理设置。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global http.proxy http://proxyuser:proxypwd@proxy.server.com:8080</span><br></pre></td></tr></table></figure>
<p>其中proxyuser和proxypwd是您的凭据，proxy.server.com:8080是您连接到的服务器名称和端口。</p>
<blockquote>
<p>Unsupported proxy syntax in '127.0.0.1:8118'
首先查看git的配置列表</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure>
<p>可以看到有两个代理配置，http.proxy和https.proxy，就是这两个配置的原因</p>
<p>删除这两项</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.prox</span><br></pre></td></tr></table></figure>
<blockquote>
<p>从单个文件历史记录中搜索</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git rev-list --all build_scripts/campaign/client/Security/TGL/security_L2.xml | (</span><br><span class="line">    while read revision; do</span><br><span class="line">        git grep -F &#x27;CSS-IVE-122226&#x27; $revision build_scripts/campaign/client/Security/TGL/security_L2.xml</span><br><span class="line">    done</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>程序开发</category>
        <category>GIT</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux出现Read-onlyFileSystem错误的解决方法</title>
    <url>/2020/09/01/Linux%E5%87%BA%E7%8E%B0Read-onlyFileSystem%E9%94%99%E8%AF%AF%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>造成这个问题的原因大多数是因为非正常关机后导致文件系统受损引起的，在系统重启之后，
受损分区就会被Linux自动挂载为只读。解决的方法是通过fsck来修复文件系统，然后重启即可。</p>
<span id="more"></span>
<h2 id="解决方法">解决方法</h2>
<p>查看系统分区</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">df -lh</span><br></pre></td></tr></table></figure>
<p>修复文件系统</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fsck -y /dev/sda2</span><br></pre></td></tr></table></figure>
<h2 id="临时解决">临时解决</h2>
<p>报错read-only file system的原因是你所在的分区只有读权限，没有写权限。
mount为挂载分区命令，重新挂载分区并增加读写权限即为 -rw。
比如提示data目录只读，可通过如下命令，将目标目录临时变更为可读写模式</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mount -o remount rw /data</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客快速搭建</title>
    <url>/2020/04/15/Hexo%E5%8D%9A%E5%AE%A2%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h2 id="新建仓库">新建仓库</h2>
<p>github 新建一个仓库，仓库名必须为 <user-name>.github.io 格式，其中 <user-name> 是你 github 的昵称</user-name></user-name></p>
<h2 id="全局安装hexo">全局安装hexo</h2>
<p>npm install hexo-cli -g</p>
<h2 id="初始化项目">初始化项目</h2>
<p>hexo init，就会自动构建一个 hexo 项目，紧接着执行 hexo s，浏览器访问 localhost:4000 就可以看到效果啦</p>
<span id="more"></span>
<h2 id="部署到github">部署到github</h2>
<p>在项目根目录下找到 _congif.yml，找到 deploy 字段并填写完整</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: &lt;你的仓库地址&gt; # https://github.com/YouName/YouName.github.io</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>我们需要额外的一个工具来帮助我们推到仓库上，那就是 hexo-deployer-git</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>执行下面两个命令，就可以把项目自动部署到 github</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
<p>浏览器访问：<a href="https://YouName.github.io/">https://YouName.github.io/</a> 即可看到效果。</p>
<h2 id="创建新文章">创建新文章</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// [layout] 为布局，可选项为 `post`、`page`、`draft`，这将决定文章所在文件路径。</span><br><span class="line">// &lt;title&gt; 为文章标题</span><br><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure>
<h2 id="常用Hexo命令">常用Hexo命令</h2>
<ul>
<li>初始化目录：<code>hexo init [folder]</code></li>
<li>新建文章：<code>hexo new [layout] &lt;title&gt;</code>或<code>hexo n [layout] &lt;title&gt;</code>
<ul>
<li>新建草稿：<code>hexo new draft &lt;title&gt;</code></li>
</ul>
</li>
<li>将草稿发布为正式文章：<code>hexo publish &lt;title&gt;</code></li>
<li>生成静态文件：<code>hexo generate</code>或<code>hexo g</code>
<ul>
<li>监听文件变化：<code>hexo g --watch</code>或<code>hexo g -w</code></li>
</ul>
</li>
<li>部署：<code>hexo deploy</code>或<code>hexo d</code>
<ul>
<li>先生成后部署：<code>hexo d -g</code></li>
</ul>
</li>
<li>启动本地服务器（服务器会监听文件变化并自动更新）：<code>hexo server</code>或<code>hexo s</code>
<ul>
<li>启动调试：<code>hexo s --debug</code></li>
<li>预览草稿：<code>hexo s --draft</code></li>
</ul>
</li>
<li>清除缓存：<code>hexo clean</code></li>
</ul>
<h2 id="重新部署">重新部署</h2>
<p>在更换电脑后，要把博客文件夹移动到新电脑,执行两个命令
安装hexo</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>
<p>安装模块，不要用hexo init初始化，部分文件已经拷贝生成，如果不慎使用，则站点配置文件_config.yml会被初始化为默认值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux基础命令的使用</title>
    <url>/2020/10/07/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="终端的使用">终端的使用</h2>
<p>终端使用快捷键:</p>
<ul>
<li>ctrl + shift + = 放大字体</li>
<li>ctrl + - 缩小字体</li>
</ul>
<p>终端使用技巧:
tab键: 自动补全
上下键: 切换曾经使用的命令</p>
<p>终端命令格式:<code>command [-options] [paraneter]</code><br>
说明：</p>
<ul>
<li><code>command</code>: 命令名</li>
<li><code>[-options]</code>: 选项，对命令控制，可省略</li>
<li><code>[paraneter]</code>: 传给命令的参数，可以是一个多个或者没有</li>
</ul>
<span id="more"></span>
<p>查阅帮助：<br>
command --help<br>
查看手册：<br>
man command</p>
<ul>
<li>空格键: 显示手册下一屏</li>
<li>enter键: 一次滚动手册的一行</li>
<li>b: 回滚一屏</li>
<li>f: 前滚一屏</li>
<li>q: 退出</li>
</ul>
<h2 id="文件目录常用命令">文件目录常用命令</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ls                          # 查看文件夹内容</span><br><span class="line">ls -a                       # 显示所有文件，包括隐藏的</span><br><span class="line">ls -h                       # 配合-l人性化显示文件大小</span><br><span class="line">ls -l                       # 列表显示文件详情</span><br><span class="line">pws                         # 查看所在文件夹</span><br><span class="line">cd [目录名]                # 切换文件夹，却对路径以/或者~开头</span><br><span class="line">cd .                        # .表示当前目录</span><br><span class="line">cd ..                       # ..表示上一级目录</span><br><span class="line">cd ~                        # ~表示家目录，也可以直接cd回到家目录</span><br><span class="line">cd -                        # 在最近两次目录切换</span><br><span class="line">touch [文件名]             # 文件不存在就新建文件，存在就修改文件修改日期</span><br><span class="line">mkdir [目录名]             # 创建目录</span><br><span class="line">mkdir -p [目录名]          # 递归创建目录</span><br><span class="line">rm [文件名]                # 删除文件</span><br><span class="line">rm -f [文件名]             # 强制删除，不提示</span><br><span class="line">rm -r [目录名]             # 递归删除，删除文件夹</span><br><span class="line">rm -rf *                    # 使用通配符，当前目录的文件全部删除</span><br><span class="line">tree                        # 树状图的方式看目录</span><br><span class="line">tree -d                     # 只看目录不看文件</span><br><span class="line">cp [源文件] [目标文件]    # 拷贝文件</span><br><span class="line">cp -i [源文件] [目标文件] # 覆盖文件前提示</span><br><span class="line">cp -r [源文件] [目标文件] # 递归复制目录</span><br><span class="line">mv [源文件] [目标文件]    # 移动文件</span><br><span class="line">mv -r [源文件] [目标文件] # 覆盖前提示</span><br><span class="line">cat                         # 查看文件内容</span><br><span class="line">cat -b                      # 对非空输出行编号</span><br><span class="line">cat -n                      # 对所有行编号</span><br><span class="line">more                        # 分屏查看文件</span><br></pre></td></tr></table></figure>
<blockquote>
<p>分配查看文件时的操作</p>
</blockquote>
<ul>
<li>空格键: 显示手册下一屏</li>
<li>enter键: 一次滚动手册的一行</li>
<li>b: 回滚一屏</li>
<li>f: 前滚一屏</li>
<li>q: 退出</li>
<li>/word: 搜索word字符</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">grep as 123.txt             # 在123.txt文件中搜索as</span><br><span class="line">grep -n as 123.txt          # 显示匹配行和行号</span><br><span class="line">grep -i as 123.txt          # 忽略大小写</span><br><span class="line">grep -i &quot;as is&quot; 123.txt     # 如果有空格要用引号</span><br><span class="line">grep -v as 123.txt          # 显示不匹配的行</span><br><span class="line">grep ^a 123.txt             # 模式匹配，正则表达式，以a开头的行</span><br><span class="line"></span><br><span class="line">echo                        # 在终端显示内容</span><br><span class="line">&gt;                           # 重定向，将命令执行结果重定向到一个文件</span><br><span class="line">echo Hello &gt; b              # 在b文件中添加内容Hello</span><br><span class="line">&gt;&gt;                          # 重定向追加内容</span><br><span class="line">|                           # 管道，允许一个目录的输出通过管道作为另一个文件的输入</span><br><span class="line">ls -lha ~ | more            # 把用户目录分屏显示</span><br><span class="line">ls -lha ~ | grep Do         # 查询用户目录，文件包含Do的</span><br></pre></td></tr></table></figure>
<blockquote>
<p>常用的通配符</p>
</blockquote>
<ul>
<li>*表示任意个数字符</li>
<li>?表示任意一个字符</li>
<li><code>[]</code>表示匹配字符组中的一个</li>
<li><code>[abc]</code>匹配abc中的一个</li>
<li><code>[a-f]</code>匹配a-f中的一个</li>
<li>ls ?2*1.txt               # 这个命令查看以任意一个字符和2开头，以1结尾的txt文件</li>
<li>ls <code>[135]</code>23.txt          # 查看以135开头的文件</li>
</ul>
<h2 id="远程管理命令">远程管理命令</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">clear                       # 清屏</span><br><span class="line">shutdown                    # 关机</span><br><span class="line">shutdown -r                 # 重启</span><br><span class="line">shutdown -r now             # 马上重启</span><br><span class="line">ifconfig                    # 查看网卡配置</span><br><span class="line">ping                        # 检测到目标ip的连接是否正常</span><br><span class="line">ssh -p [端口号] [用户名]@[ip域名或别名]  # 远程连接服务器,端口是22就可以省略-p</span><br><span class="line">scp                         # 远程拷贝文件</span><br><span class="line">scp -P port 01.py user@renote:Desktop/01.py  # 把本地当前目录的01.py上传到远程家目录的Desktop/01.py，-P要大写</span><br><span class="line">scp -r user@renote:Desktop/demo  # 把远程家目录的demo文件夹拷贝到本地，操作文件夹用-r</span><br><span class="line">ssh-copy-id root@192.168.2.1 # 拷贝公钥到192.168.2.1，让那台机器可以免密登录我的机器</span><br></pre></td></tr></table></figure>
<h2 id="用户权限">用户权限</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chmod -rwx data.txt         # 移除可读可写可执行</span><br><span class="line">chmod +rwx data.txt         # 增加可读可写可执行</span><br><span class="line">sudo [命令]                 # 切换其他用户执行命令，默认是root</span><br></pre></td></tr></table></figure>
<h2 id="组管理">组管理</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">groupadd 组名               # 添加组</span><br><span class="line">groupdel 组名               # 删除组</span><br><span class="line">cat /etc/group              # 查看组</span><br><span class="line">chgrp -R 组名 文件/目录名    # 递归修改文件夹或文件所属组</span><br></pre></td></tr></table></figure>
<h2 id="用户管理">用户管理</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">useradd -m -g [组] [新建用户名]  # 添加新用户，-m自动建立用户家目录，-g指定用户所属组，默认在同名用户名组</span><br><span class="line">passwd [用户名]                 # 设置或修改用户密码</span><br><span class="line">userdel -r [用户名]             # 删除用户，-r自动删除用户家目录</span><br><span class="line">cat /etc/passwd | grep [用户名] # 确认用户信息，新的用户信息会保存在/etc/paswd文件中</span><br></pre></td></tr></table></figure>
<blockquote>
<p>/etc/paswd文件中存放的是用户信息，由6个分号组成的七个信息，分别是</p>
</blockquote>
<ol>
<li>用户名</li>
<li>密码（x,表示加密的密码）</li>
<li>UID(用户标识)</li>
<li>GID(组标识)</li>
<li>用户全名或本地账号</li>
<li>家目录</li>
<li>登录使用的shell,就是登录后使用的终端命令，ubuntu默认是dash</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id 用户名                   # 显示用户id和组id</span><br><span class="line">who                         # 查看当前所有登录的用户列表</span><br><span class="line">whoami                      # 查看当前登录用户的用户名</span><br><span class="line">usermod -g [组] [用户名]     # 修改用户主组,主组是新建用户时指定的</span><br><span class="line">usermod -G [组] [用户名]     # 修改用户附加组，附加组是指定用户的附加权限</span><br><span class="line">usermod -G sudo [用户名]     # 将用户添加都sudo组，可以使用root身份执行命令</span><br><span class="line">usermod -s /bin/bash        # 修改用户登录shell，默认是dash要修改成bash,bash更方便，目录有颜色，按上键也不会输入字符</span><br><span class="line">which                       # 查看执行命令所在的目录</span><br><span class="line">which useradd               # 查看用户密码在的目录</span><br><span class="line">which ls                    # 查看ls命令在的目录</span><br></pre></td></tr></table></figure>
<blockquote>
<p>bin和sbin</p>
</blockquote>
<ul>
<li>在linux中，大多数可执行文件都保存在/bin、/sbin、/usr/bin、/usr/sbin</li>
<li>/bin 二进制执行文件目录，主要用于具体应用</li>
<li>/sbin 是系统管理员专用的二进制代码存放目录，主要用于系统管理</li>
<li>/usr/bin 后期安装的一些软件</li>
<li>/usr/sbin 超级用户的一些管理程序</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">su - [用户名]                   # 切换用户，-表示可以切换到用户家目录，否则位置不变</span><br><span class="line">exit                            # 退出当前用户</span><br><span class="line">chown [用户名] [文件名|目录名]   # 修改文件或目录的拥有者</span><br><span class="line">chgrp -R [组名] [文件名|目录名]  # 递归修改所属组，-R表示递归修改所有子目录和文件的组</span><br><span class="line">chmod -R 775 [文件名|目录名]     #修改权限，三个数字分别对应：拥有者/组/其他，用户的权限</span><br></pre></td></tr></table></figure>
<blockquote>
<p>数字对应的权限</p>
</blockquote>
<table>
<thead>
<tr>
<th>拥有者</th>
<th>组</th>
<th>其他</th>
</tr>
</thead>
<tbody>
<tr>
<td>r w x</td>
<td>r w x</td>
<td>r w x</td>
</tr>
<tr>
<td>4 2 1</td>
<td>4 2 1</td>
<td>4 2 1</td>
</tr>
</tbody>
</table>
<h2 id="系统信息">系统信息</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">date                        # 查看系统时间</span><br><span class="line">cal                         # 查看日历，-y可以看一年的日历</span><br><span class="line">df -h                       # 显示磁盘剩余空间，-h以人性化的方式显示文件大小</span><br><span class="line">du -h [目录名]              # 显示目录下的文件大小</span><br><span class="line">ps aux                      # 查看进程使用情况，a显示所有进程包括其他用户的，u显示进程详细状态，x显示没有控制终端的进程一般不使用该选项</span><br><span class="line">top                         # 动态显示进程并排序，按q退出</span><br><span class="line">kill -9 [进程代号]           # 结束进程，-9表示强制结束</span><br></pre></td></tr></table></figure>
<h2 id="其他命令">其他命令</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find [路径] -name &quot;*.py&quot;        # 查找指定路径下以py结尾的文件，包括子目录。不写路径就是当前路径</span><br><span class="line">Ln -s [被链接的源文件] [链接文件] # 创建软链接类似快捷方式，源文件使用文件绝对路径，链接文件随便起名</span><br><span class="line">Ln [被链接的源文件] [链接文件]    # 硬链接，源文件被删除链接文件不受影响</span><br></pre></td></tr></table></figure>
<h2 id="打包压缩">打包压缩</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -cvf [打包文件.tar] [被打包的文件|路径]      # 打包文件，-c创建打包文件，-v列出详细过程、进度，-f指定文件名。f选项后面一定是tar文件，所以必须放选项最后面</span><br><span class="line">tar -xvf [打包文件.tar]                         # 接包文件，-x解开打包文件</span><br><span class="line">tar -zcvf [打包文件.tar.gz] [被压缩的文件|路径]  # 压缩文件，-z调用gzip对文件压缩</span><br><span class="line">tar -zxvf [打包文件.tar.gz] -C [目标路径]       # 解压文件， -C解压到指定目录，目录必须存在</span><br><span class="line">tar -jcvf [打包文件.tar.bz2] [被压缩的文件|路径] # 压缩文件，-j调用bzip2对文件压缩</span><br><span class="line">tar -jxvf [打包文件.tar.bz2] -C [目标路径]      # 解压文件， -C解压到指定目录，目录必须存在</span><br></pre></td></tr></table></figure>
<h2 id="软件安装">软件安装</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 安装软件</span><br><span class="line">sudo apt install [软件包]</span><br><span class="line"># 卸载软件</span><br><span class="line">sudo apt remove [软件名]</span><br><span class="line"># 更新已安装的包</span><br><span class="line">sudo apt upgrade</span><br><span class="line"># 一个小火车提示</span><br><span class="line">sudo apt install sl</span><br><span class="line"># 一个比较漂亮的查看当前进程排名的软件</span><br><span class="line">sudo apt install htop</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Python模块psutil库的使用</title>
    <url>/2020/07/17/Python%E6%A8%A1%E5%9D%97psutil%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>psutil (python system and process utilities) 是一个跨平台的第三方库，能够轻松实现获取系统运行的进程和系统利用率（包扩CPU、内存、磁盘、网络等）信息。它主要用于系统监控、分析、限制系统资源和进程的管理。它实现了同等命令行工具提供的功能，如ps、top、lsof、netstat、ifconfig、who、df、kill、free、nice、ionice、iostat、iotop、uptime、pidof、tty、taskset、pmap</p>
<span id="more"></span>
<p>目前支持的操作系统包括：Linux,Windows,OSX,FreeBSD,OpenBSD,NetBSD,Sun Solaris,AIX</p>
<h2 id="一、安装psutil库">一、安装psutil库</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install psutil</span><br></pre></td></tr></table></figure>
<h2 id="二、功能函数">二、功能函数</h2>
<h3 id="1-1-CPU相关">1.1 CPU相关</h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>psutil.cpu_count()</td>
<td>单元cpu_count(,[logical]):默认返回逻辑CPU的个数,当设置logical的参数为False时，返回物理CPU的个数</td>
</tr>
<tr>
<td>psutil.cpu_percent()</td>
<td>cpu_percent(,[percpu],[interval])：返回CPU的利用率,percpu为True时显示所有物理核心的利用率,interval不为0时,则阻塞时显示interval执行的时间内的平均利用率</td>
</tr>
<tr>
<td>psutil.cpu_times()</td>
<td>cpu_times(,[percpu])：以命名元组(namedtuple)的形式返回cpu的时间花费,percpu=True表示获取每个CPU的时间花费</td>
</tr>
<tr>
<td>psutil.cpu_times_percent()</td>
<td>cpu_times_percent(,[percpu])：功能和cpu_times大致相同，看字面意思就能知道，该函数返回的是耗时比例</td>
</tr>
<tr>
<td>psutil.cpu_stats()</td>
<td>cpu_stats()以命名元组的形式返回CPU的统计信息，包括上下文切换，中断，软中断和系统调用次数</td>
</tr>
<tr>
<td>psutil.cpu_freq()</td>
<td>cpu_freq([percpu])：返回cpu频率</td>
</tr>
</tbody>
</table>
<h3 id="1-2-内存相关">1.2 内存相关</h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>virtual_memory()</td>
<td>以命名元组的形式返回内存使用情况，包括总内存，可用内存，内存利用率，buffer和cache等。单位为字节</td>
</tr>
<tr>
<td>swap_memory()</td>
<td>以命名元组的形式返回swap/memory使用情况，包含swap中页的换入和换出</td>
</tr>
</tbody>
</table>
<h3 id="1-3-磁盘相关">1.3 磁盘相关</h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>psutil.disk_io_counters()</td>
<td>disk_io_counters([perdisk])：以命名元组的形式返回磁盘io统计信息(汇总的)，包括读、写的次数，读、写的字节数等。当perdisk的值为True，则分别列出单个磁盘的统计信息(字典：key为磁盘名称，value为统计的namedtuple)</td>
</tr>
<tr>
<td>psutil.disk_partitions()</td>
<td>disk_partitions([all=False])：以命名元组的形式返回所有已挂载的磁盘，包含磁盘名称，挂载点，文件系统类型等信息。当all等于True时，返回包含/proc等特殊文件系统的挂载信息</td>
</tr>
<tr>
<td>psutil.disk_usage()</td>
<td>disk_usage(path)：以命名元组的形式返回path所在磁盘的使用情况，包括磁盘的容量、已经使用的磁盘容量、磁盘的空间利用率等</td>
</tr>
</tbody>
</table>
<h3 id="1-4-网络相关">1.4 网络相关</h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>psutil.net_io_counter([pernic])</td>
<td>以命名元组的形式返回当前系统中每块网卡的网络io统计信息，包括收发字节数，收发包的数量、出错的情况和删包情况。当pernic为True时，则列出所有网卡的统计信息</td>
</tr>
<tr>
<td>psutil.net_connections([kind])</td>
<td>以列表的形式返回每个网络连接的详细信息(namedtuple)。命名元组包含fd, family, type, laddr, raddr, status, pid等信息。kind表示过滤的连接类型，支持的值如下：(默认为inet)</td>
</tr>
<tr>
<td>psutil.net_if_addrs()</td>
<td>以字典的形式返回网卡的配置信息，包括IP地址和mac地址、子网掩码和广播地址</td>
</tr>
<tr>
<td>psutil.net_if_stats()</td>
<td>返回网卡的详细信息，包括是否启动、通信类型、传输速度与mtu</td>
</tr>
<tr>
<td>psutil.users()</td>
<td>以命名元组的方式返回当前登陆用户的信息，包括用户名，登陆时间，终端，与主机信息</td>
</tr>
<tr>
<td>psutil.boot_time()</td>
<td>以时间戳的形式返回系统的启动时间</td>
</tr>
</tbody>
</table>
<h3 id="1-5-进程管理">1.5 进程管理</h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>psutil.pids()</td>
<td>以列表的形式返回当前正在运行的进程</td>
</tr>
<tr>
<td>psutil.pid_exists(1)</td>
<td>判断给点定的pid是否存在</td>
</tr>
<tr>
<td>psutil.process_iter()</td>
<td>迭代当前正在运行的进程，返回的是每个进程的Process对象</td>
</tr>
<tr>
<td>psutil.Process()</td>
<td>对进程进行封装，可以使用该类的方法获取进行的详细信息，或者给进程发送信号</td>
</tr>
</tbody>
</table>
<p>进程相关信息的方法</p>
<ul>
<li>name：获取进程的名称</li>
<li>cmdline：获取启动进程的命令行参数</li>
<li>create_time：获取进程的创建时间(时间戳格式)</li>
<li>num_fds：进程打开的文件个数</li>
<li>num_threads：进程的子进程个数</li>
<li>is_running：判断进程是否正在运行</li>
<li>send_signal：给进程发送信号，类似与os.kill等</li>
<li>kill：发送SIGKILL信号结束进程</li>
<li>terminate：发送SIGTEAM信号结束进程</li>
</ul>
<h2 id="三、使用实例">三、使用实例</h2>
<p>以下代码对系统信息进行监控，包括内存和cpu利用率，网速和监控时间</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> psutil</span><br><span class="line"><span class="comment"># 获取总内存大小</span></span><br><span class="line">memoryTotal = <span class="built_in">round</span>(psutil.virtual_memory().total/(<span class="number">1024.0</span>*<span class="number">1024.0</span>*<span class="number">1024.0</span>), <span class="number">2</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span> :</span><br><span class="line">    <span class="comment"># 设定30秒记录一次</span></span><br><span class="line">    time.sleep(<span class="number">30</span>)</span><br><span class="line">    <span class="comment"># CPU使用率</span></span><br><span class="line">    cpuUsed = psutil.cpu_percent(<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># 内存信息 </span></span><br><span class="line">    memoryInfo = psutil.virtual_memory()</span><br><span class="line">    <span class="comment"># 内存使用大小</span></span><br><span class="line">    memoryUsedSize = <span class="built_in">round</span>(memoryInfo.used / (<span class="number">1024.0</span>*<span class="number">1024.0</span>*<span class="number">1024.0</span>),<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># 内存使用率</span></span><br><span class="line">    memoryUsed = <span class="built_in">round</span>(memoryUsedSize/memoryTotal,<span class="number">2</span>)*<span class="number">100</span></span><br><span class="line">    <span class="comment"># 或者直接查看使用率 psutil.virtual_memory().percent</span></span><br><span class="line">    <span class="comment"># 网络io统计信息</span></span><br><span class="line">    net = psutil.net_io_counters()</span><br><span class="line">    <span class="comment"># 接收字节</span></span><br><span class="line">    bytesRcvd = (net.bytes_recv / <span class="number">1024</span>)</span><br><span class="line">    <span class="comment"># 发送字节</span></span><br><span class="line">    bytesSent = (net.bytes_sent / <span class="number">1024</span>)</span><br><span class="line">    <span class="comment"># 过一秒再获取流量信息，算出每秒网速</span></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    net = psutil.net_io_counters()</span><br><span class="line">    realTimeRcvd = <span class="built_in">round</span>(((net.bytes_recv / <span class="number">1024</span>) - bytesRcvd),<span class="number">2</span>)</span><br><span class="line">    realTimeSent = <span class="built_in">round</span>(((net.bytes_sent / <span class="number">1024</span>) - bytesSent),<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># 获取系统时间</span></span><br><span class="line">    tim = time.strftime(<span class="string">&#x27;%H:%M:%S&#x27;</span>,time.localtime())</span><br><span class="line">    realTimeInfo = &#123;</span><br><span class="line">    <span class="string">&#x27;cpu&#x27;</span>:&#123;<span class="string">&#x27;cpuUsed&#x27;</span>:cpuUsed&#125;,</span><br><span class="line">    <span class="string">&#x27;memory&#x27;</span>:&#123;<span class="string">&#x27;memoryUsed&#x27;</span>:memoryUsed&#125;,</span><br><span class="line">    <span class="string">&#x27;net&#x27;</span>:&#123;<span class="string">&#x27;rcvd&#x27;</span>:realTimeRcvd,<span class="string">&#x27;send&#x27;</span>:realTimeSent&#125;</span><br><span class="line">    <span class="string">&#x27;time&#x27;</span>:tim</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(realTimeInfo)</span><br></pre></td></tr></table></figure>
<p>输出情况示例</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;&#x27;memory&#x27;: &#123;&#x27;memoryUsed&#x27;: <span class="number">37.0</span>&#125;, &#x27;cpu&#x27;: &#123;&#x27;cpuUsed&#x27;: <span class="number">6.0</span>&#125;, &#x27;net&#x27;: &#123;&#x27;send&#x27;: <span class="number">2.89</span>, &#x27;rcvd&#x27;: <span class="number">6.52</span>&#125;, &#x27;time&#x27;: &#x27;<span class="number">17</span>:<span class="number">49</span>:<span class="number">58</span>&#x27;&#125;</span><br><span class="line">&#123;&#x27;memory&#x27;: &#123;&#x27;memoryUsed&#x27;: <span class="number">37.0</span>&#125;, &#x27;cpu&#x27;: &#123;&#x27;cpuUsed&#x27;: <span class="number">3.8</span>&#125;, &#x27;net&#x27;: &#123;&#x27;send&#x27;: <span class="number">1.58</span>, &#x27;rcvd&#x27;: <span class="number">0.83</span>&#125;, &#x27;time&#x27;: &#x27;<span class="number">17</span>:<span class="number">50</span>:<span class="number">30</span>&#x27;&#125;</span><br><span class="line">&#123;&#x27;memory&#x27;: &#123;&#x27;memoryUsed&#x27;: <span class="number">37.0</span>&#125;, &#x27;cpu&#x27;: &#123;&#x27;cpuUsed&#x27;: <span class="number">10.3</span>&#125;, &#x27;net&#x27;: &#123;&#x27;send&#x27;: <span class="number">1.71</span>, &#x27;rcvd&#x27;: <span class="number">0.12</span>&#125;, &#x27;time&#x27;: &#x27;<span class="number">17</span>:<span class="number">51</span>:<span class="number">02</span>&#x27;&#125;</span><br><span class="line">&#123;&#x27;memory&#x27;: &#123;&#x27;memoryUsed&#x27;: <span class="number">37.0</span>&#125;, &#x27;cpu&#x27;: &#123;&#x27;cpuUsed&#x27;: <span class="number">5.1</span>&#125;, &#x27;net&#x27;: &#123;&#x27;send&#x27;: <span class="number">0.6</span>, &#x27;rcvd&#x27;: <span class="number">0.0</span>&#125;, &#x27;time&#x27;: &#x27;<span class="number">17</span>:<span class="number">51</span>:<span class="number">34</span>&#x27;&#125;</span><br><span class="line">&#123;&#x27;memory&#x27;: &#123;&#x27;memoryUsed&#x27;: <span class="number">37.0</span>&#125;, &#x27;cpu&#x27;: &#123;&#x27;cpuUsed&#x27;: <span class="number">4.4</span>&#125;, &#x27;net&#x27;: &#123;&#x27;send&#x27;: <span class="number">1.43</span>, &#x27;rcvd&#x27;: <span class="number">4.8</span>&#125;, &#x27;time&#x27;: &#x27;<span class="number">17</span>:<span class="number">52</span>:<span class="number">06</span>&#x27;&#125;</span><br><span class="line">&#123;&#x27;memory&#x27;: &#123;&#x27;memoryUsed&#x27;: <span class="number">37.0</span>&#125;, &#x27;cpu&#x27;: &#123;&#x27;cpuUsed&#x27;: <span class="number">4.7</span>&#125;, &#x27;net&#x27;: &#123;&#x27;send&#x27;: <span class="number">0.92</span>, &#x27;rcvd&#x27;: <span class="number">1.02</span>&#125;, &#x27;time&#x27;: &#x27;<span class="number">17</span>:<span class="number">52</span>:<span class="number">38</span>&#x27;&#125;</span><br><span class="line">&#123;&#x27;memory&#x27;: &#123;&#x27;memoryUsed&#x27;: <span class="number">37.0</span>&#125;, &#x27;cpu&#x27;: &#123;&#x27;cpuUsed&#x27;: <span class="number">10.4</span>&#125;, &#x27;net&#x27;: &#123;&#x27;send&#x27;: <span class="number">0.75</span>, &#x27;rcvd&#x27;: <span class="number">0.06</span>&#125;, &#x27;time&#x27;: &#x27;<span class="number">17</span>:<span class="number">53</span>:<span class="number">10</span>&#x27;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>程序开发</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>psutil</tag>
      </tags>
  </entry>
  <entry>
    <title>Python包管理工具pip的使用</title>
    <url>/2019/12/28/Python%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7pip%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>pip是Python包管理工具，该工具提供了对Python包的查找、下载、安装、卸载的功能。</p>
<span id="more"></span>
<h2 id="常用命令">常用命令</h2>
<p>查看版本和路径</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip --version</span><br></pre></td></tr></table></figure>
<p>获取帮助</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<p>升级pip版本</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install -U pip</span><br></pre></td></tr></table></figure>
<p>查看安装包信息</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip show SomePackage</span><br><span class="line">pip show -f SomePackage  <span class="comment"># 查看安装包详细信息</span></span><br></pre></td></tr></table></figure>
<p>列出已安装的包</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip <span class="built_in">list</span></span><br><span class="line">pip <span class="built_in">list</span> -o  <span class="comment"># 查看可升级的包</span></span><br></pre></td></tr></table></figure>
<p>在文件中生成包依赖</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt  <span class="comment"># 生成txt文件</span></span><br><span class="line">pip install -r requirements.txt  <span class="comment"># 安装txt依赖</span></span><br></pre></td></tr></table></figure>
<p>如果只针对项目生成依赖，推荐使用<code>pipreqs</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install pipreqs  # 安装</span><br><span class="line">pipreqs . --encoding=utf8 --force  #在当前目录强制生成txt依赖</span><br></pre></td></tr></table></figure>
<p>在全局环境中使用<code>pipreqs</code>生成当前目录依赖</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">pip install pipreqs</span><br><span class="line"><span class="comment"># 在当前目录生成</span></span><br><span class="line">pipreqs . --encoding=utf8 --force</span><br></pre></td></tr></table></figure>
<p>安装包</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install SomePackage              <span class="comment"># 最新版本</span></span><br><span class="line">pip install SomePackage==<span class="number">1.0</span><span class="number">.4</span>       <span class="comment"># 指定版本</span></span><br><span class="line">pip install <span class="string">&#x27;SomePackage&gt;=1.0.4&#x27;</span>     <span class="comment"># 最小版本</span></span><br><span class="line">pip install SomePackage -i http://pypi.douban.com/simple --trusted-host pypi.douban.com  <span class="comment"># 用国内镜像安装，可以解决安装慢的问题</span></span><br></pre></td></tr></table></figure>
<p>包管理</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install --upgrade SomePackage   <span class="comment"># 升级包，--upgrade = -U</span></span><br><span class="line">pip uninstall SomePackage           <span class="comment"># 卸载包</span></span><br><span class="line">pip search SomePackage              <span class="comment"># 搜索包</span></span><br></pre></td></tr></table></figure>
<p>安装whl包</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install wheel       <span class="comment"># 先安装wheel库</span></span><br><span class="line">pip install XXX.whl     <span class="comment"># 再安装whl文件</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">whl下载网址https://www.lfd.uci.edu/~gohlke/pythonlibs/</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>在命令前加<code>python -m</code>来指定python</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python -m pip install XXX</span><br><span class="line">python2 -m pip install XXX  <span class="comment"># 使用python2</span></span><br><span class="line">python3 -m pip install XXX  <span class="comment"># 使用python3</span></span><br></pre></td></tr></table></figure>
<h2 id="切换pip源">切换pip源</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install SomePackage -i http://pypi.douban.com/simple --trusted-host pypi.douban.com</span><br></pre></td></tr></table></figure>
<p>除了上面这种用命令方式临时切换pip源，还可以永久切换pip源</p>
<p>在windos下切换，在windows文件管理器中,输入 %APPDATA%会定位到一个新的目录下，在该目录下新建pip文件夹，然后到pip文件夹里面去新建个pip.ini文件，内容如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[global]</span><br><span class="line">timeout = 6000</span><br><span class="line">index-url = http://pypi.douban.com/simple</span><br><span class="line">trusted-host = pypi.douban.com</span><br></pre></td></tr></table></figure>
<p>在linux环境下的修改方式和在windows环境下修改方式基本相同，在用户的家目录下面创建名为.pip文件夹，在创建好的.pip文件夹中创建名为pip.conf的文件，内容如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[global]</span><br><span class="line">timeout = 6000</span><br><span class="line">index-url = http://pypi.douban.com/simple</span><br><span class="line">trusted-host = pypi.douban.com</span><br></pre></td></tr></table></figure>
<p>如果pip版本大于10.0, 则可以在命令行切换源</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip config <span class="built_in">set</span> <span class="keyword">global</span>.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pip</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle导入导出工具的使用</title>
    <url>/2020/04/15/Oracle%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>迁移Oracle数据库需要用到导入导出工具exp和imp,可直接跨平台系统导入导出数据,速度较慢，操作简单</p>
<span id="more"></span>
<h2 id="导用户">导用户</h2>
<p>导出用户MDM_P到当前文件夹（导出文件为testDb.dmp）
<code>exp MDM_P/8888@192.168.134.9:1521/ora11g file='./testDb.dmp' owner=MDM_P</code><br>
从当前文件夹导入MDM_P用户
<code>imp MDM_P/8888@192.168.135.10/orcl  file=./testDb.dmp fromuser=MDM_P</code></p>
<h2 id="导数据库">导数据库</h2>
<p>将数据库ORCL完全导出到D盘（导出文件为testDb.dmp）其中full=y表示全库导出：<br>
<code>exp scott/tiger@192.168.1.1:1521/ORCL file='d:/testDb.dmp' full=y</code><br>
将D:\example.dmp文件中的库导入到mydb下的system用户中<br>
<code>imp system/123456@213.234.12.32/mydb file=D:\example.dmp full=y ignore=y</code><br>
如果表已经存在，则会报错，在后面加上igonre=y（忽略创建错误，继续后面操作）。</p>
<h2 id="导表">导表</h2>
<p>将数据库的表table1,table2导到D盘（导出文件为testDb.dmp）：<br>
<code>exp scott/tiger@192.168.1.1:1521/ORCL file='d:/testDb.dmp' tables=(table1,table2)</code></p>
<h2 id="exp方式导出数据">exp方式导出数据</h2>
<p>相关参数项如下：</p>
<table>
<thead>
<tr>
<th style="text-align:left">关键字</th>
<th style="text-align:right">说明</th>
<th style="text-align:center">默认</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">USERID                    	用户名/口令</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">FULL                        	导出整个文件 	(N)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">BUFFER                   	数据缓冲区的大小</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">OWNER                    	导出指定的所有者用户名列表</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">FILE                          	输出文件	(EXPDAT.DMP)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">TABLES                   	导出指定的表名列表</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">COMPRESS             	是否压缩导出的文件	(Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">RECORDLENGTH  	IO 记录的长度</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">GRANTS                  	导出权限	(Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">INCTYPE                 	增量导出类型</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">INDEXES                 	导出索引 	(Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">RECORD                  	跟踪增量导出	(Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">ROWS                       	导出数据行	(Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">PARFILE                  	参数文件名</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">CONSTRAINTS       	导出限制 	(Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">CONSISTENT          	交叉表一致性</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">LOG                          	屏幕输出的日志文件</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">STATISTICS             	分析对象(ESTIMATE)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">DIRECT                    	直接路径	(N)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">TRIGGERS               	导出触发器	(Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">FEEDBACK             	显示每 x 行 (0) 的进度</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">FILESIZE                 	各转储文件的最大尺寸</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">QUERY                     	选定导出表子集的子句</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">TRANSPORT_TABLESPACE	导出可传输的表空间元数据	(N)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">TABLESPACES	导出指定的表空间列表</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<h2 id="imp方式导入数据">imp方式导入数据</h2>
<p>相关参数项如下：</p>
<table>
<thead>
<tr>
<th style="text-align:left">关键字</th>
<th style="text-align:right">说明</th>
<th style="text-align:center">默认</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">USERID</td>
<td style="text-align:right">用户名/口令</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">FULL</td>
<td style="text-align:right">导入整个文件</td>
<td style="text-align:center">(N)</td>
</tr>
<tr>
<td style="text-align:left">BUFFER	数据缓冲区大小</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">FROMUSER	所有人用户名列表</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">FILE	输入文件	  (EXPDAT.DMP)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">TOUSER	用户名列表</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">SHOW 	只列出文件内容	(N)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">TABLES	表名列表</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">IGNORE	忽略创建错误	(N)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">RECORDLENGTH 	IO记录的长度</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">GRANTS	导入权限	(Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">INCTYPE	增量导入类型</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">INDEXES	导入索引 	 (Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">COMMIT 	提交数组插入	 (N)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">ROWS	导入数据行	 (Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">PARFILE	参数文件名</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">LOG	屏幕输出的日志文件</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">CONSTRAINTS 	导入限制	 (Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">DESTROY	覆盖表空间数据文件	 (N)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">INDEXFILE	将表/索引信息写入指定的文件</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">SKIP_UNUSABLE_INDEXES	跳过不可用索引的维护	  (N)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">FEEDBACK	每 x 行显示进度</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">TOID_NOVALIDATE 	跳过指定类型 ID 的验证</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">FILESIZE 	每个转储文件的最大大小</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">STATISTICS	始终导入预计算的统计信息</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">RESUMABLE	在遇到有关空间的错误时挂起</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">RESUMABLE_NAME	用来标识可恢复语句的文本字符串</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">RESUMABLE_TIMEOUT	RESUMABLE 的等待时间</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">COMPILE	编译过程, 程序包和函数	 (Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">STREAMS_CONFIGURATION	导入 Streams 的一般元数据	 (Y)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">STREAMS_INSTANITATION 	导入 Streams 的实例化元数据	 (N)</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">TRANSPORT_TABLESPACE	导入可传输的表空间元数据</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">TABLESPACES 	将要传输到数据库的表空间</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">DATAFILES	将要传输到数据库的数据文件</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">TTS_OWNERS	拥有可传输表空间集中数据的用户</td>
<td style="text-align:right"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<h2 id="交互命令方式导入导出">交互命令方式导入导出</h2>
<h3 id="导出工具-exp">导出工具 exp</h3>
<ol>
<li>
<p>它是操作系统下一个可执行的文件 存放目录/ORACLE_HOME/bin</p>
<p>exp导出工具将数据库中数据备份压缩成一个二进制系统文件.可以在不同OS间迁移</p>
<p>它有三种模式：
a.  用户模式： 导出用户所有对象以及对象中的数据；
b.  表模式： 导出用户所有表或者指定的表；
c.  整个数据库： 导出数据库中所有对象。</p>
</li>
<li>
<p>导出工具exp交互式命令行方式的使用的例子</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$exp</span> <span class="built_in">test</span>/test123@appdb</span><br><span class="line">Enter array fetch buffer size: 4096 &gt; 回车</span><br><span class="line">Export file: expdat.dmp &gt; m.dmp  生成导出的文件名 </span><br><span class="line">(1)E(ntire database), (2)U(sers), or (3)T(ables): (2)U &gt; 3</span><br><span class="line">Export table data (yes/no): yes &gt; 回车</span><br><span class="line">Compress extents (yes/no): yes &gt; 回车</span><br><span class="line">Export <span class="keyword">done</span> <span class="keyword">in</span> ZHS16GBK character <span class="built_in">set</span> and ZHS16GBK NCHAR character <span class="built_in">set</span></span><br><span class="line">About to <span class="built_in">export</span> specified tables via Conventional Path ...</span><br><span class="line">Table(T) or Partition(T:P) to be exported: (RETURN to quit) &gt; cmamenu  要导出的表名</span><br><span class="line">. . exporting table                        CMAMENU       4336 rows exported</span><br><span class="line">Table(T) or Partition(T:P) to be exported: (RETURN to quit) &gt;要导出的表名n</span><br><span class="line">Table(T) or Partition(T:P) to be exported: (RETURN to quit) &gt; 回车</span><br><span class="line">Export terminated successfully without warnings. </span><br></pre></td></tr></table></figure>
<ol start="3">
<li>导出工具exp非交互式命令行方式的例子</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$exp</span> scott/tiger tables=(emp,dept) file=/directory/scott.dmp grants=y </span><br><span class="line"></span><br><span class="line"><span class="comment"># 说明:把scott用户里两个表emp,dept导出到文件/directory/scott.dmp</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$exp</span> scott/tiger tables=emp query=\&quot;<span class="built_in">where</span> job=\<span class="string">&#x27;salesman\&#x27;</span> and sal\&lt;1600\&quot; file=/directory/scott2.dmp </span><br><span class="line"></span><br><span class="line"><span class="comment"># 说明:在exp里面加上导出emp的查询条件job=&#x27;salesman&#x27; and sal&lt;1600 (但我个人很少这样用,还是把满足条件的记录生成临时表后,再exp会方便一些)</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$exp</span> parfile=username.par file=/directory1/username_1.dmp,/directory1/username_2.dmp filesize=2000M <span class="built_in">log</span>=/directory2/username_exp.log</span><br></pre></td></tr></table></figure>
<p>参数文件username.par内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">userid=username/userpassword</span><br><span class="line">buffer=8192000</span><br><span class="line">compress=n</span><br><span class="line">grants=y</span><br></pre></td></tr></table></figure>
<p>说明:username.par为导出工具exp用的参数文件,里面具体参数可以根据需要去修改</p>
<pre><code> filesize指定生成的二进制备份文件的最大字节数
 
 (可用来解决某些OS下2G物理文件的限制及加快压缩速度和方便刻历史数据光盘等)
</code></pre>
<h3 id="导入工具-imp">导入工具 imp</h3>
<ol>
<li>它是操作系统下一个可执行的文件 存放目录/ORACLE_HOME/bin</li>
</ol>
<p>imp导入工具将EXP形成的二进制系统文件导入到数据库中.</p>
<p>它有三种模式：
a.  用户模式： 导出用户所有对象以及对象中的数据；
b.  表模式： 导出用户所有表或者指定的表；
c.  整个数据库： 导出数据库中所有对象。</p>
<p>只有拥有IMP_FULL_DATABASE和DBA权限的用户才能做整个数据库导入</p>
<p>imp步骤：
(1) create table  (2) insert data  (3) create index (4) create triggers,constraints</p>
<p>2.导入工具imp交互式命令行方式的例子</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ imp</span><br><span class="line">Import: Release 8.1.6.0.0 - Production on 星期五 12月 7 17:01:08 2001</span><br><span class="line">(c) Copyright 1999 Oracle Corporation.  All rights reserved.</span><br><span class="line">用户名:  <span class="built_in">test</span></span><br><span class="line">口令:****</span><br><span class="line">连接到: Oracle8i Enterprise Edition Release 8.1.6.0.0 - 64bit Production</span><br><span class="line">With the Partitioning option</span><br><span class="line">JServer Release 8.1.6.0.0 - Production</span><br><span class="line">导入文件: expdat.dmp&gt; /tmp/m.dmp</span><br><span class="line">输入插入缓冲区大小（最小为 8192 ) 30720&gt;</span><br><span class="line">经由常规路径导出由EXPORT:V08.01.06创建的文件</span><br><span class="line">警告: 此对象由 TEST 导出, 而不是当前用户</span><br><span class="line">已经完成ZHS16GBK字符集和ZHS16GBK NCHAR 字符集中的导入</span><br><span class="line">只列出导入文件的内容(yes/no)：no&gt;</span><br><span class="line">由于对象已存在, 忽略创建错误(yes/no)：no&gt; yes</span><br><span class="line">导入权限(yes/no)：yes&gt;</span><br><span class="line">导入表数据(yes/no)：yes&gt;</span><br><span class="line">导入整个导出文件(yes/no)：no&gt; yes</span><br><span class="line">. 正在将TEST的对象导入到 SCOTT</span><br><span class="line">. . 正在导入表                       <span class="string">&quot;CMAMENU&quot;</span>       4336行被导入</span><br><span class="line">成功终止导入，但出现警告。 </span><br></pre></td></tr></table></figure>
<p>3.导入工具imp非交互式命令行方式的例子</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ imp system/manager fromuser=jones tables=(accts) </span><br><span class="line">$ imp system/manager fromuser=scott tables=(emp,dept) </span><br><span class="line">$ imp system/manager fromuser=scott touser=joe tables=emp </span><br><span class="line">$ imp scott/tiger file = expdat.dmp full=y </span><br><span class="line">$ imp scott/tiger file = /mnt1/t1.dmp show=n buffer=2048000 ignore=n commit=y grants=y full=y <span class="built_in">log</span>=/oracle_backup/<span class="built_in">log</span>/imp_scott.log</span><br><span class="line">$ imp system/manager parfile=params.dat </span><br><span class="line">params.dat 内容 </span><br><span class="line">file=dba.dmp show=n ignore=n grants=y fromuser=scott tables=(dept,emp) </span><br></pre></td></tr></table></figure>
<p>4.导入工具imp可能出现的问题</p>
<p>(1) 数据库对象已经存在
一般情况, 导入数据前应该彻底删除目标数据下的表, 序列, 函数/过程,触发器等;<br>
数据库对象已经存在, 按缺省的imp参数, 则会导入失败
如果用了参数ignore=y, 会把exp文件内的数据内容导入
如果表有唯一关键字的约束条件, 不合条件将不被导入
如果表没有唯一关键字的约束条件, 将引起记录重复</p>
<p>(2) 数据库对象有主外键约束
不符合主外键约束时, 数据会导入失败
解决办法: 先导入主表, 再导入依存表
disable目标导入对象的主外键约束, 导入数据后, 再enable它们
(3)  权限不够
如果要把A用户的数据导入B用户下, A用户需要有imp_full_database权限</p>
<p>(4)  导入大表( 大于80M ) 时, 存储分配失败
默认的EXP时, compress = Y, 也就是把所有的数据压缩在一个数据块上.
导入时, 如果不存在连续一个大数据块, 则会导入失败.
导出80M以上的大表时, 记得compress= N, 则不会引起这种错误.</p>
<p>(5) imp和exp使用的字符集不同
如果字符集不同, 导入会失败, 可以改变unix环境变量或者NT注册表里NLS_LANG相关信息.
导入完成后再改回来.</p>
<p>(6) imp和exp版本不能往上兼容
imp可以成功导入低版本exp生成的文件, 不能导入高版本exp生成的文件
根据情况我们可以用
$ imp username/password@connect_string
说明: connect_string 是在/ORACLE_HOME/network/admin/tnsnames.ora
定义的本地或者远端数据库的名称
注意事项:
UNIX: /etc/hosts           要定义本地或者远端数据库服务器的主机名
win98:    windows\hosts             和IP地址的对应关系</p>
<p>win2000:  winnt\system32\drivers\etc\hosts</p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>数据库</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Python虚拟环境pipenv的常用命令</title>
    <url>/2020/04/15/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83pipenv%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>Pipenv可以用于简化Python项目中依赖项的管理。只用了一年， Pipenv 就变成了管理软件包依赖关系的 Python 官方推荐资源。 它汇集了Pip，Pipfile和Virtualenv的功能，是一个强大的命令行工具。</p>
<span id="more"></span>
<h2 id="安装和升级pipenv">安装和升级pipenv</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install  pipenv  <span class="comment"># 安装pipenv</span></span><br><span class="line">pip install  --upgrade pipenv   <span class="comment"># 升级安装pipenv</span></span><br></pre></td></tr></table></figure>
<h2 id="使用pipenv">使用pipenv</h2>
<h3 id="初始化">初始化</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipenv install  <span class="comment"># 初始化项目，将目录更改为python项目文件夹，并启动pipenv。这将创建 pipfile和 pipfile.lock，这两个文件描述了项目依赖环境的配置情况，当有人git-clone了项目，只需安装了pipenv就可以配置出同样的环境。</span></span><br><span class="line"></span><br><span class="line">pipenv install --dev  <span class="comment"># 初始化项目，安装所有依赖项，包括开发包</span></span><br><span class="line"></span><br><span class="line">pipenv install --dev --pypi-mirror https://mirrors.aliyun.com/pypi/simple  <span class="comment"># 使用国内镜像来初始化</span></span><br><span class="line"></span><br><span class="line">pipenv --three  <span class="comment"># 会使用当前系统的Python3创建环境</span></span><br><span class="line">pipenv --two  <span class="comment"># 使用python2创建</span></span><br><span class="line">pipenv --python 3.6  <span class="comment"># 指定某一Python版本创建环境</span></span><br></pre></td></tr></table></figure>
<h3 id="查看信息">查看信息</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipenv --<span class="built_in">where</span>  <span class="comment"># 显示目录信息</span></span><br><span class="line">pipenv --venv  <span class="comment"># 显示虚拟环境信息</span></span><br><span class="line">pipenv --py  <span class="comment"># 显示Python解释器信息</span></span><br></pre></td></tr></table></figure>
<h3 id="使用虚拟环境">使用虚拟环境</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipenv shell  <span class="comment"># 激活虚拟环境</span></span><br><span class="line"><span class="built_in">exit</span>  <span class="comment"># 退出虚拟环境</span></span><br><span class="line">pipenv – – rm  <span class="comment"># 删除虚拟环境</span></span><br></pre></td></tr></table></figure>
<h3 id="其他命令">其他命令</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipenv run  <span class="comment"># 不用shell,直接在虚拟环境中执行命令</span></span><br><span class="line">pipenv run python 文件名.py  <span class="comment"># 使用pipenv环境运行</span></span><br><span class="line">pipenv run pip 命令  <span class="comment"># 运行pip</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> prp=<span class="string">&quot;pipenv run python&quot;</span>  <span class="comment"># 给命令设置别名</span></span><br><span class="line"></span><br><span class="line">pipenv install requests  <span class="comment"># 安装相关模块并加入到Pipfile</span></span><br><span class="line"></span><br><span class="line">pipenv install django==1.11  <span class="comment"># 安装固定版本模块并加入到Pipfile</span></span><br><span class="line"></span><br><span class="line">pipenv install --dev nose2  <span class="comment"># 在开发环境安装模块nose2</span></span><br><span class="line"></span><br><span class="line">pipenv graph  <span class="comment"># 显示依赖图</span></span><br><span class="line"></span><br><span class="line">pipenv check  <span class="comment"># 检查安全漏洞</span></span><br><span class="line"></span><br><span class="line">pipenv uninstall requests  <span class="comment"># 卸载包并从Pipfile中移除</span></span><br><span class="line"></span><br><span class="line">pipenv uninstall --all  <span class="comment"># 卸载全部包</span></span><br><span class="line"></span><br><span class="line">pipenv uninstall --dev  <span class="comment"># 卸载全部开发包</span></span><br><span class="line"></span><br><span class="line">pipenv update --outdated  <span class="comment"># 查看所有需要更新的包</span></span><br><span class="line"></span><br><span class="line">pipenv update  <span class="comment"># 更新所有包</span></span><br><span class="line"></span><br><span class="line">pipenv update &lt;包名&gt;  <span class="comment"># 更新指定的包</span></span><br><span class="line"></span><br><span class="line">pipenv lock -r  <span class="comment"># 将Pipfile和Pipfile.lock文件里面的包导出为requirements.txt文件</span></span><br><span class="line"></span><br><span class="line">pipenv lock -r --dev  <span class="comment"># 导出开发模块到requirements.txt</span></span><br><span class="line"></span><br><span class="line">pipenv install -r path/to/requirements.txt  <span class="comment"># </span></span><br><span class="line">如果项目中有requirements.txt文件，pipenv会在安装的时候自动导入。如果需要导入其他位置的requirements.txt，可以用这个命令</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>程序开发</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pipenv</tag>
      </tags>
  </entry>
  <entry>
    <title>Python虚拟环境venv的使用</title>
    <url>/2020/04/15/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83venv%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>因为虚拟环境使用较多，所以python3.4版本起，官方直接内置了venv包</p>
<h2 id="windos环境中使用">windos环境中使用</h2>
<p>创建虚拟环境，第二个venv是虚拟环境名，可以自定义</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -m venv venv</span><br></pre></td></tr></table></figure>
<p>激活虚拟环境</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">venv\Scripts\activate</span><br></pre></td></tr></table></figure>
<p>退出虚拟环境</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">venv\Scripts\deactivate</span><br></pre></td></tr></table></figure>
<h2 id="ubuntu环境中使用">ubuntu环境中使用</h2>
<p>安装venv包</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install python3-venv</span><br></pre></td></tr></table></figure>
<p>创建虚拟环境</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python3 -m venv venv</span><br></pre></td></tr></table></figure>
<p>激活虚拟环境</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source venv/bin/activate</span><br></pre></td></tr></table></figure>
<p>退出虚拟环境</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>venv</tag>
      </tags>
  </entry>
  <entry>
    <title>VSCode有哪些常用的快捷键</title>
    <url>/2021/05/24/VSCode%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
    <content><![CDATA[<p><img src="/2021/05/24/VSCode%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE/4d49f619f4ce40c8.png" class="lazyload" data-srcset="/2021/05/24/VSCode%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE/4d49f619f4ce40c8.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="CTRL-P-模式">CTRL+P 模式</h2>
<ul>
<li>直接输入文件名，快速打开文件</li>
<li>&gt; 可以回到主命令框 Ctrl+Shift+P 模式。</li>
<li>? 列出当前可执行的动作</li>
<li>! 显示 Errors 或 Warnings，也可以 Ctrl+Shift+M</li>
<li>: 跳转到行数，也可以 Ctrl+G 直接进入</li>
<li>@ 跳转到 symbol（搜索变量或者函数），也可以 Ctrl+Shift+O 直接进入</li>
<li>@: 根据分类跳转 symbol，查找属性或函数，也可以 Ctrl+Shift+O 后输入: 进入</li>
<li># 根据名字查找 symbol，也可以 Ctrl+T</li>
</ul>
<h2 id="编辑器与窗口管理">编辑器与窗口管理</h2>
<h3 id="同时打开多个窗口（查看多个项目）">同时打开多个窗口（查看多个项目）</h3>
<ul>
<li>打开一个新窗口： Ctrl+Shift+N</li>
<li>关闭窗口： Ctrl+Shift+W</li>
</ul>
<h3 id="同时打开多个编辑器（查看多个文件）">同时打开多个编辑器（查看多个文件）</h3>
<ul>
<li>新建文件 Ctrl+N</li>
<li>历史打开文件之间切换 Ctrl+Tab，Alt+Left，Alt+Right</li>
<li>切出一个新的编辑器（最多 3 个）Ctrl+\，也可以按住 Ctrl 鼠标点击 Explorer 里的文件名</li>
<li>左中右 3 个编辑器的快捷键 Ctrl+1 Ctrl+2 Ctrl+3</li>
<li>3 个编辑器之间循环切换 Ctrl+`（不对）</li>
<li>编辑器换位置，Ctrl+k 然后按 Left 或 Right</li>
</ul>
<h2 id="代码编辑">代码编辑</h2>
<h3 id="格式调整">格式调整</h3>
<ul>
<li>代码行缩进 Ctrl+[， Ctrl+]</li>
<li>折叠打开代码块 Ctrl+Shift+[， Ctrl+Shift+]</li>
<li>Ctrl+C Ctrl+V 如果不选中，默认复制或剪切一整行</li>
<li>代码格式化：Shift+Alt+F，或 Ctrl+Shift+P 后输入 format code</li>
<li>上下移动一行： Alt+Up 或 Alt+Down</li>
<li>向上向下复制一行： Shift+Alt+Up 或 Shift+Alt+Down</li>
<li>在当前行下边插入一行 Ctrl+Enter</li>
<li>在当前行上方插入一行 Ctrl+Shift+Enter</li>
</ul>
<h3 id="左侧边栏">左侧边栏</h3>
<p>打开资源 ctrl+shift+E</p>
<p>打开搜索 ctrl+shift+F</p>
<p>打开 git ctrl+shift+G</p>
<p>打开调试 ctrl+shift+D</p>
<p>打开扩展 ctrl+shift+X</p>
<h3 id="光标相关">光标相关</h3>
<ul>
<li>移动到行首：Home</li>
<li>移动到行尾：End</li>
<li>移动到文件结尾：Ctrl+End</li>
<li>移动到文件开头：Ctrl+Home</li>
<li>移动到后半个括号 Ctrl+Shift+]</li>
<li>选中当前行 Ctrl+i</li>
<li>选择从光标到行尾 Shift+End</li>
<li>选择从行首到光标处 Shift+Home</li>
<li>删除光标所在行 Ctrl+Delete</li>
<li>Shrink/expand selection（光标所在单词，文档高亮显示相同的）： Shift+Alt+Left 和 Shift+Alt+Right</li>
<li>Multi-Cursor：可以连续选择多处，然后一起修改，Alt+Click 添加 cursor</li>
<li>翻转 IDECtrl+Alt+Down 或 Ctrl+Alt+Up</li>
<li>同时选中所有匹配的 Ctrl+Shift+L</li>
<li>Ctrl+D 下一个匹配的也被选中 (被我自定义成删除当前行了，见下边 Ctrl+Shift+K)</li>
<li>回退上一个光标操作 Ctrl+U</li>
</ul>
<h3 id="重构代码">重构代码</h3>
<ul>
<li>跳转到定义处：F12</li>
<li>定义处缩略图：只看一眼而不跳转过去 Alt+F12</li>
<li>列出所有的引用：Shift+F12</li>
<li>同时修改本文件中所有匹配的：Ctrl+F12</li>
<li>重命名：比如要修改一个方法名，可以选中后按 F2，输入新的名字，回车，会发现所有的文件都修改过了。</li>
<li>跳转到下一个 Error 或 Warning：当有多个错误时可以按 F8 逐个跳转</li>
<li>查看 diff 在 explorer 里选择文件右键 Set file to compare，然后需要对比的文件上右键选择 Compare with 'file_name_you_chose'.</li>
</ul>
<h3 id="查找替换">查找替换</h3>
<ul>
<li>查找 Ctrl+F</li>
<li>查找替换 Ctrl+H</li>
<li>整个文件夹中查找 Ctrl+Shift+F 匹配符：</li>
<li>
<ul>
<li>to match one or more characters in a path segment</li>
</ul>
</li>
<li>? to match on one character in a path segment</li>
<li>** to match any number of path segments ,including none</li>
<li>{} to group conditions (e.g. {<strong>/*.html,</strong>/*.txt} matches all html and txt files)</li>
<li>[] to declare a range of characters to match (e.g., example.[0-9] to match on example.0,example.1, …</li>
</ul>
<h2 id="显示相关">显示相关</h2>
<ul>
<li>
<p>全屏：F11</p>
</li>
<li>
<p>zoomIn/zoomOut：Ctrl + =/Ctrl + -</p>
</li>
<li>
<p>侧边栏显 / 隐：Ctrl+B</p>
</li>
<li>
<p>侧边栏 4 大功能显示：</p>
</li>
<li>
<p>Show Explorer Ctrl+Shift+E</p>
</li>
<li>
<p>Show SearchCtrl+Shift+F</p>
</li>
<li>
<p>Show GitCtrl+Shift+G</p>
</li>
<li>
<p>Show DebugCtrl+Shift+D</p>
</li>
<li>
<p>输出 Show OutputCtrl+Shift+U</p>
</li>
<li>
<p>预览 markdownCtrl+Shift+V</p>
</li>
</ul>
<h2 id="其他">其他</h2>
<ul>
<li>自动保存：File -&gt; AutoSave ，或者 Ctrl+Shift+P，输入 auto</li>
</ul>
<p>ctrl k + ctrl s = 打开快捷键一览表。</p>
<p>在这里面、你可以查看、搜索、修改快捷键。</p>
<p>专门记述快捷键的官方文档：</p>
<p><a href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-windows.pdf">https://code.visualstudio.com/shortcuts/keyboard-shortcuts-windows.pdf</a></p>
<p>VS Code 里面按下 F1、输入 shortcuts、回车，就会自动跳转到这个文档，这个方法可以查看这个文档的实时更新。</p>
<p><img src="https://pic4.zhimg.com/50/v2-785cca72e24f071f21c746d5c1f88714_hd.jpg?source=1940ef5c" class="lazyload" data-srcset="https://pic4.zhimg.com/50/v2-785cca72e24f071f21c746d5c1f88714_hd.jpg?source=1940ef5c" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>VSCode</category>
      </categories>
      <tags>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>使用Docker安装常用数据库</title>
    <url>/2020/09/07/%E4%BD%BF%E7%94%A8Docker%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[<h2 id="使用Docker搭建Mysql服务">使用Docker搭建Mysql服务</h2>
<p>拉取官方镜像,不写后面的版本号则会自动拉取最新版</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull mysql:5.7   <span class="comment"># 拉取 mysql 5.7</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>检查是否拉取成功</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker images</span><br></pre></td></tr></table></figure>
<p>直接启动容器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker run -p 3306:3306 --name mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</span><br></pre></td></tr></table></figure>
<ul>
<li>–name：容器名，此处命名为mysql</li>
<li>-e：配置信息，此处配置mysql的root用户的登陆密码</li>
<li>-p：端口映射，此处映射 主机3306端口 到 容器的3306端口</li>
</ul>
<p>如果要建立目录映射</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">suso docker run -p 3306:3306 --name mysql \</span><br><span class="line">-v /usr/<span class="built_in">local</span>/docker/mysql/conf:/etc/mysql \</span><br><span class="line">-v /usr/<span class="built_in">local</span>/docker/mysql/logs:/var/<span class="built_in">log</span>/mysql \</span><br><span class="line">-v /usr/<span class="built_in">local</span>/docker/mysql/data:/var/lib/mysql \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=123456 \</span><br><span class="line">-d mysql:5.7</span><br></pre></td></tr></table></figure>
<p>检查容器是否正确运行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker container ls</span><br></pre></td></tr></table></figure>
<p>如果无法访问到MySQL，需要允许通过防火墙</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 开放端口：</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line">firewall-cmd --zone=public --add-port=3306/tcp -permanent</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="comment"># 或者关闭防火墙：</span></span><br><span class="line">sudo systemctl stop firewalld</span><br></pre></td></tr></table></figure>
<p>进入docker本地客户端设置远程访问账号</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker <span class="built_in">exec</span> -it mysql bash</span><br><span class="line">mysql -uroot -p123456</span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt; grant all privileges on *.* to root@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&quot;password&quot;</span>;</span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">mysql&gt; select host,user,password from user;</span><br></pre></td></tr></table></figure>
<p>现在可以通过以下信息连接到mysql了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">host: 127.0.0.1</span><br><span class="line">port: 3306</span><br><span class="line">user: root</span><br><span class="line">password: 123456</span><br></pre></td></tr></table></figure>
<h2 id="使用Docker搭建Sql-Server服务">使用Docker搭建Sql Server服务</h2>
<p>从 Microsoft 容器注册表中拉取 SQL Server 2019 Linux 容器映像</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo docker pull mcr.microsoft.com/mssql/server:2019-CU5-ubuntu-18.04</span><br></pre></td></tr></table></figure>
<p>使用命令提示符使用以下命令运行容器映像</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo docker run -e &quot;ACCEPT_EULA=Y&quot; -e &quot;SA_PASSWORD=&lt;YourStrong@Passw0rd&gt;&quot; \</span><br><span class="line">   -p 1433:1433 --name sql1 \</span><br><span class="line">   -d mcr.microsoft.com/mssql/server:2019-CU5-ubuntu-18.04</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>-e &quot;ACCEPT_EULA=Y&quot;<br>
将 ACCEPT_EULA 变量设置为任意值，以确认接受最终用户许可协议。 SQL Server 映像的必需设置。</p>
</li>
<li>
<p>-e &quot;SA_PASSWORD=&lt;YourStrong@Passw0rd&gt;&quot;<br>
指定至少包含 8 个字符且符合 SQL Server 密码要求的强密码。 SQL Server 映像的必需设置。</p>
</li>
<li>
<p>-p 1433:1433<br>
将主机环境中的 TCP 端口（第一个值）映射到容器中的 TCP 端口（第二个值）。 在此示例中，SQL Server 侦听容器中的 TCP 1433，并对主机上的端口 1433 公开。</p>
</li>
<li>
<p>--name sql1<br>
为容器指定一个自定义名称，而不是使用随机生成的名称。 如果运行多个容器，则无法重复使用相同的名称。</p>
</li>
<li>
<p><a href="http://mcr.microsoft.com/mssql/server:2019-CU5-ubuntu-18.04">mcr.microsoft.com/mssql/server:2019-CU5-ubuntu-18.04</a><br>
SQL Server 2019 Ubuntu Linux 容器映像。</p>
</li>
</ul>
<p>使用 docker exec 运行sqlcmd，以使用 Transact-SQL 更改密码。 在下面的示例中，将旧密码 &lt;YourStrong!Passw0rd&gt; 和新密码 &lt;YourNewStrong!Passw0rd&gt; 替换为你自己的密码值。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo docker exec -it sql1 /opt/mssql-tools/bin/sqlcmd \</span><br><span class="line">   -S localhost -U SA -P &quot;&lt;YourStrong@Passw0rd&gt;&quot; \</span><br><span class="line">   -Q &#x27;ALTER LOGIN SA WITH PASSWORD=&quot;&lt;YourNewStrong@Passw0rd&gt;&quot;&#x27;</span><br></pre></td></tr></table></figure>
<p>参考：<a href="https://docs.microsoft.com/zh-cn/sql/linux/quickstart-install-connect-docker?view=sql-server-ver15&amp;pivots=cs1-bash">https://docs.microsoft.com/zh-cn/sql/linux/quickstart-install-connect-docker?view=sql-server-ver15&amp;pivots=cs1-bash</a></p>
<h2 id="使用Docker搭建Oracle11g服务">使用Docker搭建Oracle11g服务</h2>
<p>下载的过程较长，镜像6.8G</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker pull registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g</span><br></pre></td></tr></table></figure>
<p>创建容器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -d -p 1521:1521 --name oracle11g registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g</span><br></pre></td></tr></table></figure>
<p>启动容器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker start oracle11g</span><br></pre></td></tr></table></figure>
<p>进入镜像进行配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker exec -it oracle11g bash</span><br></pre></td></tr></table></figure>
<p>切换root用户，密码：helowin</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">su root</span><br></pre></td></tr></table></figure>
<p>编辑profile文件配置ORACLE环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export ORACLE_HOME=/home/oracle/app/oracle/product/11.2.0/dbhome_2</span><br><span class="line"> </span><br><span class="line">export ORACLE_SID=helowin</span><br><span class="line"> </span><br><span class="line">export PATH=$ORACLE_HOME/bin:$PATH</span><br></pre></td></tr></table></figure>
<p>创建软连接</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ln -s $ORACLE_HOME/bin/sqlplus /usr/bin</span><br></pre></td></tr></table></figure>
<p>登录sqlplus并修改sys、system用户密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">su - oracle</span><br><span class="line">sqlplus /nolog</span><br><span class="line">conn /as sysdba</span><br><span class="line"></span><br><span class="line"># 打开数据库</span><br><span class="line">alter database mount;</span><br><span class="line">alter database open;</span><br><span class="line"></span><br><span class="line"># 修改密码</span><br><span class="line">alter user system identified by system;</span><br><span class="line">alter user sys identified by sys;</span><br><span class="line"></span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<p>修改 tnsnames.ora的 service_name=helowinXDB</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker_oracle11 =</span><br><span class="line"> (DESCRIPTION =</span><br><span class="line">   (ADDRESS_LIST =</span><br><span class="line">     (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.211.135)(PORT =1521))</span><br><span class="line">   )</span><br><span class="line">   (CONNECT_DATA =</span><br><span class="line">     (SERVICE_NAME = helowinXDB)</span><br><span class="line">   )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>启用监听</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lsnrctl status</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>程序开发</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>使用CentOS7安装MySql</title>
    <url>/2020/08/05/%E4%BD%BF%E7%94%A8CentOS7%E5%AE%89%E8%A3%85MySql/</url>
    <content><![CDATA[<h2 id="安装mysql">安装mysql</h2>
<p>下载并安装MySQL官方的 Yum Repository</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</span><br><span class="line">yum -y install mysql57-community-release-el7-10.noarch.rpm</span><br></pre></td></tr></table></figure>
<p>执行安装命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum -y install mysql-community-server</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h2 id="使用国内镜像安装">使用国内镜像安装</h2>
<p>去国内镜像站下载client和server包</p>
<blockquote>
<p><a href="http://uni.mirrors.163.com/mysql/Downloads/">http://uni.mirrors.163.com/mysql/Downloads/</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql-community-client-5.7.31-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-server-5.7.31-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>
<p>上传到centos的<code>/var/cache/yum/x86_64/7/mysql57-community/packages/</code><br>
再次执行安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum -y install mysql-community-server</span><br></pre></td></tr></table></figure>
<h2 id="设置mysql">设置mysql</h2>
<p>开启MySQL服务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl start  mysqld.service</span><br></pre></td></tr></table></figure>
<p>获取临时密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">grep &quot;password&quot; /var/log/mysqld.log</span><br></pre></td></tr></table></figure>
<p>进入数据库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure>
<p>设置密码</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 修改密码验证规则</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> <span class="keyword">global</span> validate_password_policy<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> <span class="keyword">global</span> validate_password_length<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"># 设置简单密码</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 开启mysql的远程访问</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;password&#x27;</span> <span class="keyword">with</span> <span class="keyword">grant</span> option;</span><br><span class="line"># 刷新</span><br><span class="line">mysql<span class="operator">&gt;</span> flush privileges;</span><br><span class="line">mysql<span class="operator">&gt;</span> exit;</span><br></pre></td></tr></table></figure>
<p>防火墙开放端口</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=8080/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h2 id="更改mysql为utf-8">更改mysql为utf-8</h2>
<p>修改 mysql 配置文件 my.cnf</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/my.cnf</span><br></pre></td></tr></table></figure>
<p>在[client]段增加下面代码：default-character-set=utf8</p>
<p>在[mysql]段增加下面的代码：default-character-set=utf8</p>
<p>在[mysqld]段增加下面的代码：character-set-server=utf8</p>
<p><img src="/2020/08/05/%E4%BD%BF%E7%94%A8CentOS7%E5%AE%89%E8%A3%85MySql/3341.png" class="lazyload" data-srcset="/2020/08/05/%E4%BD%BF%E7%94%A8CentOS7%E5%AE%89%E8%A3%85MySql/3341.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>重启mysql服务器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure>
<p>查看字符编码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">mysql&gt; status;</span><br></pre></td></tr></table></figure>
<h2 id="安装python开发模块">安装python开发模块</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /etc/yum.repos.d/</span><br><span class="line"></span><br><span class="line">rpm -ivh http://repo.mysql.com/mysql57-community-release-el7-8.noarch.rpm</span><br><span class="line"></span><br><span class="line">sudo yum install mysql-devel</span><br><span class="line">sudo yum install python3-devel</span><br><span class="line">pip install mysqlclient</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>在Ubuntu16.04使用命令行方式安Matlab</title>
    <url>/2020/04/15/%E5%9C%A8Ubuntu16.04%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%96%B9%E5%BC%8F%E5%AE%89Matlab/</url>
    <content><![CDATA[<p>Linux服务器命令行模式安装Matlab</p>
<span id="more"></span>
<h2 id="安装jdk">安装jdk</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -version                <span class="comment">#查看当前java版本，未出现版本信息代表未安装</span></span><br><span class="line">sudo apt-get install default-jdk  <span class="comment">#使用apt-get安装JDK</span></span><br><span class="line">java -version                         <span class="comment">#再次查询Java版本，查看是否安装成功</span></span><br></pre></td></tr></table></figure>
<h2 id="安装matlab">安装matlab</h2>
<p>创建挂载文件夹，挂载镜像</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkdir  /data/matlab</span><br><span class="line">sudo mount -o loop R2018b_glnxa64_dvd1.iso /data/matlab</span><br></pre></td></tr></table></figure>
<p>创建安装目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkdir -p /data/MATLAB/etc</span><br><span class="line">sudo mkdir -p /data/MATLAB/R2018b</span><br></pre></td></tr></table></figure>
<p>拷贝配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo cp /data/matlab/installer_input.txt /data/MATLAB/etc</span><br><span class="line">sudo cp /data/matlab/activate.ini /data/MATLAB/etc</span><br><span class="line">sudo cp license_standalone.lic /data/MATLAB/etc</span><br></pre></td></tr></table></figure>
<p>修改文件的读写属性</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">chmod +w /data/MATLAB/etc/installer_input.txt</span><br><span class="line">chmod +w /data/MATLAB/etc/activate.ini</span><br></pre></td></tr></table></figure>
<p>编辑activate.ini文件，按如下内容设置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">isSilent=<span class="literal">true</span> <span class="comment">#开启silent模式</span></span><br><span class="line">activateCommand=activateOffline <span class="comment">#设置激活方式, 离线激活 无需联网</span></span><br><span class="line">licenseFile=/usr/<span class="built_in">local</span>/MATLAB/etc/license_standalone.lic <span class="comment">#license文件位置</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo /data/matla/install -mode silent -agreeToLicense yes -fileInstallationKey 09806-07443-53955-64350-21751-41297 -destinationFolder /data/MATLAB/R2018b -activationPropertiesFile /data/MATLAB/etc/activate.ini -licensePath /data/MATLAB/etc/license_standalone.lic -outputFile /tmp/mathwork_install.log</span><br></pre></td></tr></table></figure>
<p>分别指定：开启无人值守安装，同意协议，序列号，安装目录，激活文件，license文件</p>
<p>激活文件内容：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">isSilent=<span class="literal">true</span> <span class="comment">#开启silent模式</span></span><br><span class="line">activateCommand=activateOffline <span class="comment">#设置激活方式, 离线激活 无需联网</span></span><br><span class="line">licenseFile=/usr/<span class="built_in">local</span>/MATLAB/etc/license_standalone.lic <span class="comment">#license文件位置</span></span><br></pre></td></tr></table></figure>
<p>此时不要CTRL+C中止，而是另开一个命令行窗口,将挂载的dvd1.iso推出，然后在原目录下挂载dvd2.iso即可</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo umount /media/cdrom</span><br><span class="line">sudo mount -o loop R2018b_glnxa64_dvd2.iso /data/matlab</span><br></pre></td></tr></table></figure>
<p>出现<code>End - Successful</code>就安装成功</p>
<h2 id="破解matlab">破解matlab</h2>
<p>替换so文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cp ./Crack/R2018b/bin/glnxa64/matlab_startup_plugins/lmgrimpl/* /data/MATLAB/R2018b/bin/glnxa64/matlab_startup_plugins/lmgrimpl</span><br></pre></td></tr></table></figure>
<p>破解</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo /data/MATLAB/R2018b/bin/activate_matlab.sh -isSilent -propertiesFile /data/MATLAB/etc/activate.ini</span><br></pre></td></tr></table></figure>
<h2 id="配置环境变量">配置环境变量</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.bashrc</span><br><span class="line"><span class="built_in">export</span> MATLAB_HOME=/home/zh/MATLAB/2018b</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;MATLAB_HOME&#125;</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure>
<p>保存退出后激活</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
        <category>Matlab</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>matlab</tag>
      </tags>
  </entry>
  <entry>
    <title>使用Python将图片转字符画</title>
    <url>/2020/01/10/%E4%BD%BF%E7%94%A8Python%E5%B0%86%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E7%94%BB/</url>
    <content><![CDATA[<p>使用Pillow可以把图片转成字符画，Pillow是Python平台上的图像处理库，功能强大，简单易用。
<img src="/2020/01/10/%E4%BD%BF%E7%94%A8Python%E5%B0%86%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E7%94%BB/20200522164327.png" class="lazyload" data-srcset="/2020/01/10/%E4%BD%BF%E7%94%A8Python%E5%B0%86%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E7%94%BB/20200522164327.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<span id="more"></span>
<h2 id="安装Pillow">安装Pillow</h2>
<p>执行下面命令安装Pillow</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install pillow</span><br></pre></td></tr></table></figure>
<h2 id="转换图像">转换图像</h2>
<p>先把图片转成灰度图，然后根据每个像素的灰度替换成不同字符,<br>
从高到低的字符依次是：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">‘@’,‘%’,‘#’,‘&amp;’,‘*’,‘+’,‘=’,‘-’,‘.’,‘ ’。</span><br><span class="line">```  </span><br><span class="line">代码如下：</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">from PIL import Image</span><br><span class="line"></span><br><span class="line">def imgConvertToTxt(img,txt,scale):</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    img:原图片的完整路径</span><br><span class="line">    txt:生成文本的路径</span><br><span class="line">    scale:图片缩放倍数（越大字符越少，</span><br><span class="line">        适当调大减少不必要的字符）</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    img = Image.open(png)</span><br><span class="line">    # 将图片转化为灰度图</span><br><span class="line">    out = img.convert(&quot;L&quot;)</span><br><span class="line">    # 展示图片</span><br><span class="line">    # out.show()</span><br><span class="line">    width,height=out.size</span><br><span class="line">    # 更改图片大小</span><br><span class="line">    out = out.resize((int(width/scale),int(height/2/scale)))</span><br><span class="line">    width,height=out.size</span><br><span class="line">    asciis=&#x27;@%#&amp;*+=-. &#x27;</span><br><span class="line">    texts=&#x27;&#x27;</span><br><span class="line">    for row in range(height):</span><br><span class="line">        for col in range(width):</span><br><span class="line">            # 读取灰度</span><br><span class="line">            gray=out.getpixel((col,row))</span><br><span class="line">            # 根据灰度替换成字符</span><br><span class="line">            texts+=asciis[int(gray/255*9)]</span><br><span class="line">        texts+=&#x27;\n&#x27;</span><br><span class="line">    with open(txt,&#x27;w&#x27;)as f:</span><br><span class="line">        # 写入文件</span><br><span class="line">        f.write(texts)</span><br><span class="line"></span><br><span class="line">if __name__==&#x27;__main__&#x27;:</span><br><span class="line">    imgConvertToTxt(r&#x27;D:\Image\20191008142627.jpg&#x27;,r&#x27;asciis.txt&#x27;,scale=2)</span><br></pre></td></tr></table></figure>
<p>要注意的是<code>scale</code>参数直接决定字符画的字符精度</p>
<p>生成的效果如下所示
<img src="/2020/01/10/%E4%BD%BF%E7%94%A8Python%E5%B0%86%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E7%94%BB/mousetxt.png" class="lazyload" data-srcset="/2020/01/10/%E4%BD%BF%E7%94%A8Python%E5%B0%86%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E7%94%BB/mousetxt.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="mousetxt.png"></p>
<p>原图是这样的
<img src="/2020/01/10/%E4%BD%BF%E7%94%A8Python%E5%B0%86%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E7%94%BB/mouse.png" class="lazyload" data-srcset="/2020/01/10/%E4%BD%BF%E7%94%A8Python%E5%B0%86%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E7%94%BB/mouse.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="mouse.png"></p>
<p>放大后能看到全部是字符组成的
<img src="/2020/01/10/%E4%BD%BF%E7%94%A8Python%E5%B0%86%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E7%94%BB/20200112084739.png" class="lazyload" data-srcset="/2020/01/10/%E4%BD%BF%E7%94%A8Python%E5%B0%86%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E7%94%BB/20200112084739.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="20200112084739.png"></p>
<p>用到的字符越多，生成字符画的细节越明显。可以把原来的十个字符换成下面这七十个</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$@B%8&amp;WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/\|()1&#123;&#125;[]?-_+~&lt;&gt;i!lI;:,\&quot;^`&#x27;. </span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pillow</tag>
      </tags>
  </entry>
  <entry>
    <title>使用Ubuntu19.10搭建一个编程工作站如何配置</title>
    <url>/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>ubuntu在个人工作站与服务器领域都表现的非常稳定优秀，工程师使用ubuntu做为个人开发电脑完全没有问题，功能齐全性能稳定，因为用户众多解决问题也比较容易。
<img src="https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize,w_250,h_250/https://assets.ubuntu.com/v1/28e0ebb7-Focal-Fossa-gradient-outline.svg" class="lazyload" data-srcset="https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize,w_250,h_250/https://assets.ubuntu.com/v1/28e0ebb7-Focal-Fossa-gradient-outline.svg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<span id="more"></span>
<h2 id="下载">下载</h2>
<p>从官网下载<a href="https://ubuntu.com/download/desktop">https://ubuntu.com/download/desktop</a>
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_15-02-34.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_15-02-34.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="制作u盘启动盘">制作u盘启动盘</h2>
<p>点击链接
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_18-23-24.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_18-23-24.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
选择第二步，下载工具
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_18-18-57.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_18-18-57.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
点击下载
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_18-26-33.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_18-26-33.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
双击打开刚才下载的工具，选择镜像后点开始制作
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_18-28-51.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_18-28-51.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="安装系统">安装系统</h2>
<p>重启电脑按f12选择u盘启动，根据自己主板可能其他按键</p>
<p><img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_18-40-58.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_18-40-58.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p><img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_19-03-29.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_19-03-29.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p><img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_19-04-53.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_19-04-53.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
如果要装双系统可以选择其他选项
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_19-44-55.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_19-44-55.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p><img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_20-22-18.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_20-22-18.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p><img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_20-24-03.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_20-24-03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>等待安装完成
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_20-25-02.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/Snipaste_2020-04-16_20-25-02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="设置镜像源">设置镜像源</h2>
<p>打开软件和更新
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/SDFSILU.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/SDFSILU.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>选择下载服务器为阿里云
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/1H0H2JYE.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/1H0H2JYE.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>等待完成
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/CPZIQ42Z.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/CPZIQ42Z.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="更新系统">更新系统</h2>
<p>打开软件更新器，更新系统
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/JNRY.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/JNRY.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p><img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/V1VX.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/V1VX.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>执行系统更新
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/5Z6GB07.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/5Z6GB07.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>重启
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/WIXTV.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/WIXTV.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="使用终端">使用终端</h2>
<p>打开终端
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/CYLAFKLZN.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/CYLAFKLZN.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>安装常用软件vim,git,php
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/7BW3.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/7BW3.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="设置桌面">设置桌面</h2>
<p>在软件里面找到tweaks工具，用来设置ubuntu桌面
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/6FSHYRTH.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/6FSHYRTH.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>进入安装页面选择安装
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/4MA62D3.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/4MA62D3.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>打开刚才下载的工具，设置不显示桌面图标
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/XIYPY.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/XIYPY.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>设置顶栏显示时间和电池百分比
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/TM6EUL.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/TM6EUL.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>在桌面右击打开显示设置
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/YQRSDWXP.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/YQRSDWXP.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>选择一个桌面背景
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/NHRN.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/NHRN.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>单击设置为桌面背景
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/HGVT8I6.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/HGVT8I6.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>设置dock栏显示在底部和自动隐藏
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/81QJFRT.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/81QJFRT.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="设置主题">设置主题</h2>
<p>访问 <a href="https://www.pling.com/p/1136805/">https://www.pling.com/p/1136805/</a> ,安装主题工具
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/LQM8NHXT.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/LQM8NHXT.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>选择打开
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/2AF998.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/2AF998.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>等待完成出现安装
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/2SSSR.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/2SSSR.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>安装完成
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/JF0DWRD.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/JF0DWRD.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>访问https://vinceliuice.github.io/ ，选择一个主题
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/CFN85F.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/CFN85F.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>我选择mac主题
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/2RVBQ.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/2RVBQ.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>用终端下载安装图标
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/KNBVFR.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/KNBVFR.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>使用tweaks工具设置主题和图标
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/MDPR3K8.jpg" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/MDPR3K8.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="安装vscode">安装vscode</h2>
<p>安装vscode,选择下载deb
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/HPNQU.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/HPNQU.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>安装
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/3BBUC.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/3BBUC.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>打开vscode商店，安装sync同步工具，点击<code>Download Public Gist</code>输入<code>86120a7addb2aa40b20514be7d130991</code>开始同步
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/RVWBLY.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/RVWBLY.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="安装字体">安装字体</h2>
<p>下载字体
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/W1JWH.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/W1JWH.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>打开安装
<img src="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/HZPBUX.png" class="lazyload" data-srcset="/2020/04/16/%E4%BD%BF%E7%94%A8Ubuntu19.10%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%96%E7%A8%8B%E5%B7%A5%E4%BD%9C%E7%AB%99%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE/HZPBUX.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用Python内置服务器</title>
    <url>/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Python%E5%86%85%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    <content><![CDATA[<p>python内置了一个下载服务器。例如你的同事要让你传的文件位于某一个目录下面，那么你可以进入这个目录，然后用python开启一个下载服务器</p>
<span id="more"></span>
<h2 id="SimpleHTTPServer搭建web服务器">SimpleHTTPServer搭建web服务器</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python -m http.server 8080</span><br></pre></td></tr></table></figure>
<p>目录下如果有index.html，则会显示该页面。浏览器中输入 <a href="http://localhost">http://localhost</a>：8080/ 访问</p>
<p>如果有更多需求，完全可以根据自己需要定制，具体的请参见官方文档SimpleHTTPServer，或者直接看源码。我拷贝一段，方便参考：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> http.server</span><br><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"></span><br><span class="line">PORT = <span class="number">8000</span></span><br><span class="line">Handler = http.server.SimpleHTTPRequestHandler</span><br><span class="line">httpd = socketserver.TCPServer((<span class="string">&quot;&quot;</span>, PORT), Handler)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;serving at port %s&quot;</span>%PORT)</span><br><span class="line">httpd.serve_forever()</span><br></pre></td></tr></table></figure>
<h2 id="FTP服务器">FTP服务器</h2>
<p>Python没有内置一个直接可以用的FTP服务器，所以需要第三方组件的支持，我找到的这个组件叫pyftpdlib，首先安装：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install pyftpdlib</span><br></pre></td></tr></table></figure>
<p>安装完后，和HTTP服器类似，执行以下命令就可以启动一个FTP服务器了：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python -m pyftpdlib -p 21</span><br></pre></td></tr></table></figure>
<p>后面的21端口依然是可选的，不填会随机一个，被占用的端口将跳过。<br>
在浏览器敲入本机地址：<code>ftp://localhost:21</code>这时候，是匿名访问，也就是用户名是anonymous，密码为空，如果想要控制访问权限，你需要自己定制服务器，具体的可以参看pyftpdlib Tutorial，我这里拷贝过来一段作为介绍：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyftpdlib.authorizers <span class="keyword">import</span> DummyAuthorizer</span><br><span class="line"><span class="keyword">from</span> pyftpdlib.handlers <span class="keyword">import</span> FTPHandler</span><br><span class="line"><span class="keyword">from</span> pyftpdlib.servers <span class="keyword">import</span> FTPServer</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="comment"># 实例化DummyAuthorizer来创建ftp用户</span></span><br><span class="line">    authorizer = DummyAuthorizer()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 参数：用户名，密码，目录，权限</span></span><br><span class="line">    authorizer.add_user(<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;12345&#x27;</span>, <span class="string">&#x27;.&#x27;</span>, perm=<span class="string">&#x27;elradfmwM&#x27;</span>)</span><br><span class="line">    <span class="comment"># 匿名登录</span></span><br><span class="line">    authorizer.add_anonymous(os.getcwd())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 实例化FTP处理程序类</span></span><br><span class="line">    handler = FTPHandler</span><br><span class="line">    handler.authorizer = authorizer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 定义客户端连接时返回的字符串</span></span><br><span class="line">    handler.banner = <span class="string">&quot;pyftpdlib based ftpd ready.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 指定伪装地址和要使用的端口范围</span></span><br><span class="line">    <span class="comment"># 被动连接。 如果您在NAT后面，请退出</span></span><br><span class="line">    <span class="comment">#handler.masquerade_address = &#x27;151.25.42.11&#x27;</span></span><br><span class="line">    <span class="comment">#handler.passive_ports = range(60000, 65535)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 实例化FTP服务器类并侦听0.0.0.0:2121</span></span><br><span class="line">    address = (<span class="string">&#x27;0.0.0.0&#x27;</span>, <span class="number">21</span>)</span><br><span class="line">    server = FTPServer(address, handler)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置连接限制</span></span><br><span class="line">    <span class="comment">#server.max_cons = 256</span></span><br><span class="line">    <span class="comment">#server.max_cons_per_ip = 5</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 启动ftp服务器</span></span><br><span class="line">    server.serve_forever()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>只看代码应该基本知道该怎么用了，add_user显然是添加用户，21是指定端口，当然也可以随机，还有最大连接数max_cons，每个ip最大连接限制，更多的接口建议直接看docstrings。</p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用Docker部署Flask应用</title>
    <url>/2020/07/08/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2Flask%E5%BA%94%E7%94%A8/</url>
    <content><![CDATA[<p>Docker部署Flask应用</p>
<span id="more"></span>
<h2 id="创建应用">创建应用</h2>
<p>创建一个文件夹testflask</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir testflask</span><br></pre></td></tr></table></figure>
<p>创建一个Flask应用 testflask/app.py，这是项目的启动文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from flask import Flask</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">@app.route(&#x27;/&#x27;)</span><br><span class="line">def hello_world():</span><br><span class="line">    return &#x27;Hello World!&#x27;</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>
<h2 id="使用Gunicorn-Gevent运行Flask应用">使用Gunicorn+Gevent运行Flask应用</h2>
<p>Flask应用是一个符合WSGI规范的Python应用，不能独立运行（类似app.run的方式仅适合开发模式），需要依赖其他的组件提供服务器功能。在这里，我们选择Gunicorn+Gevent的组合。
在根目录下新建Gunicorn配置文件 testflask/gunicorn.conf.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">workers = 5    # 定义同时开启的处理请求的进程数量，根据网站流量适当调整</span><br><span class="line">worker_class = &quot;gevent&quot;   # 采用gevent库，支持异步处理请求，提高吞吐量</span><br><span class="line">bind = &quot;0.0.0.0:8888&quot;    # 监听IP放宽，以便于Docker之间、Docker和宿主机之间的通信</span><br></pre></td></tr></table></figure>
<p>在本地测试是否能正确运行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install flask gunicorn gevent</span><br><span class="line">gunicorn start:app -c gunicorn.conf.py</span><br></pre></td></tr></table></figure>
<h2 id="Docker运行Flask应用">Docker运行Flask应用</h2>
<p>首先我们需要为该应用创建一个testflask/requirements.txt文件，以便容器里面python环境的安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gunicorn</span><br><span class="line">gevent</span><br><span class="line">flask</span><br></pre></td></tr></table></figure>
<p>在安装 python 应用依赖的三方包时，可以直接用如下命令执行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
<p>然后我们还要创建一个 testflask/Dockerfile 文件，以便Docker镜像的构建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM python:3.6</span><br><span class="line">WORKDIR /usr/src/app</span><br><span class="line"></span><br><span class="line">COPY requirements.txt ./</span><br><span class="line">RUN pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"></span><br><span class="line">COPY . .</span><br><span class="line"></span><br><span class="line">CMD [&quot;gunicorn&quot;, &quot;app:app&quot;, &quot;-c&quot;, &quot;./gunicorn.conf.py&quot;]</span><br></pre></td></tr></table></figure>
<p>其中，第一行是python版本，第二行 WORKDIR 后面写的是要部署到服务器上的路径，最后一行里面的 app 是我们上面写的 python 启动文件名，第二个app 是启动文件里面要启动的应用名（变量名）</p>
<p>完成这两个文件的创建之后，执行如下命令，就可以开始构建Docker镜像</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo docker build -t &#x27;testflask&#x27; .</span><br></pre></td></tr></table></figure>
<p>这个过程需要一点时间，因为它有几百兆。 构建完成之后，通过如下命令查看镜像列表，可以发现 testflask 显示在其中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo docker images</span><br></pre></td></tr></table></figure>
<p>临时运行docker镜像</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo docker run -it --rm -p 8888:8888 testflask</span><br></pre></td></tr></table></figure>
<p>可以看到Docker镜像成功地运行起来了，并处于阻塞状态。这时，我们打开浏览器，输入127.0.0.1:8888，可以看到返回的网页中展示内容Hello World!</p>
<p>生产环境运行(以daemon方式运行)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo docker run -d -p 8888:8888 --name test-flask-1 testflask</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>python</tag>
        <tag>flask</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用CSS3加DIV布局</title>
    <url>/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<h2 id="css基础知识">css基础知识</h2>
<p>引入css的三种方法：</p>
<ul>
<li>行类样式：<code>&lt;p style=&quot;color:sienna;margin-left:20px&quot;&gt;</code></li>
<li>内部样式表：任意位置的<code>&lt;style&gt;</code>标签,推荐在头部定义</li>
<li>外部样式表：<code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;mystyle.css&quot;&gt;</code></li>
</ul>
<span id="more"></span>
<p>css特性:</p>
<ul>
<li>层叠性：样式就近原则，那个样式进就应用</li>
<li>继承性：子标签会继承父标签的某些样式</li>
<li>优先级：继承或* 0,0,0,0; 标签选择器 0,0,0,1; 类 0,0,1,0; ID 0,1,0,0; 行内样式：1,0,0,0; limportant 无穷大</li>
</ul>
<p>css选择器：</p>
<ul>
<li>标签选择器：p {}</li>
<li>类选择器：.class {}</li>
<li>id选择器： #id {}</li>
<li>通配符选择器：* {}</li>
</ul>
<p>复合选择器：</p>
<ul>
<li>后代选择器：.nav a {}</li>
<li>子元素选择器： div&gt;strong {}</li>
<li>交集选择器：p.red {}</li>
<li>并集选择器：p,span,.red {}</li>
<li>链接伪类选择器：a:hover {}表示鼠标经过a标签</li>
</ul>
<p>标签的显示模式：</p>
<ul>
<li>块级元素：独占一行，高宽边距可控制，宽度默认是父级的100%，是容器里面能放行内和块元素</li>
<li>行内元素：一行多个，高宽不能设置，默认宽度就是它本身的宽度，行内元素只能放文本或者其他行内元素</li>
<li>行内块元素：一行多个，高宽边距可控制，默认宽度就是他本身内容的宽度</li>
</ul>
<p>标签显示模式切换：</p>
<ul>
<li>块转行：display:inline</li>
<li>行转块：display:block;</li>
<li>块和行转行内块：display:inline-block;</li>
</ul>
<p>emmet语法:</p>
<ul>
<li>生成标签直接输入标签名，然后按tab</li>
<li>生成多个标签加*，div*3就是三个div标签</li>
<li>生成父子关系标签，ul&gt;li</li>
<li>生成兄弟关系标签，div+p</li>
<li>生成带类名或者带id的标签，.demo或者#two然后按tab键</li>
<li>生成自增顺序的类名标签，.demo$*3</li>
</ul>
<h2 id="样式说明">样式说明</h2>
<p>外观：</p>
<ul>
<li>color: 颜色</li>
<li>line-height: 行高</li>
<li>text-align: center; 文字水平居中对齐</li>
<li>text-align: right; 文字右对齐</li>
<li>text-indent: 首行缩进，2em是首行缩进两字符</li>
<li>text-decoration: 文本修饰，下划线underline,取消下划线none</li>
</ul>
<p>字体：</p>
<ul>
<li>font-size: 字号</li>
<li>font-family: 字体</li>
<li>font-weight: 字体粗细，700或bold是加粗，400或normal是不加粗细，数字后面没有单位</li>
<li>font-style: 字体样式，italic是倾斜，normal是不倾斜</li>
<li>font:字体连写，字体连写有顺序，字号和字体必须同时出现</li>
</ul>
<p>背景：</p>
<ul>
<li>background-color:背景颜色</li>
<li>background-image:none|url(url) 背景图片</li>
<li>background-repeat: repeal 背景平铺</li>
<li>background-repeat: no-repeal 背景不平铺</li>
<li>background-repeat: repeal-x 背景横向平铺</li>
<li>background-repeat: repeal-y 背景纵向平铺</li>
<li>background-position: right top; 背景位置右上角</li>
<li>background-position: x坐标 y坐标; 背景位置</li>
<li>background-position: left bottom; 背景位置左下角</li>
<li>background-position: center center; 背景位置水平垂直居中</li>
<li>background-position: center left; 如果是方位词，背景位置值的顺序无关</li>
<li>background-position: top; 只指定一个值，另一个默认居中</li>
<li>background-position: center 10px; 水平居中，垂直10</li>
<li>background-atachment: fixed; 背景固定</li>
<li>background-atachment: scoll; 背景滚动</li>
<li>backgroud: 背景颜色 背景图片 背景平铺 背景滚动 背景位置; 背景简写方式</li>
<li>backgroud: rgba(0,0,0,0.3); 背景透明</li>
</ul>
<p>列表：</p>
<ul>
<li>list-style: none;去掉列表样式</li>
<li>float:left;浮动在一行</li>
</ul>
<blockquote>
<p>子元素不写样式也会继承父元素的一些样式，可以被继承的样式 font,line,text,color。</p>
</blockquote>
<h3 id="单行文本垂直居中">单行文本垂直居中</h3>
<p>文字分为顶线中线和基线,上行基线到下行基线的距离就是行号。中文没有基线，就测两行底线之间的距离
<img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/hanggao.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/hanggao.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
盒子里的行高就是上距离加内容距离加下距离，行高等于盒子的高度就能实现文本垂直居中
<img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/hanggao2.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/hanggao2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="盒子模型">盒子模型</h2>
<p>边框样式</p>
<ul>
<li>border-width: 5px; 边框宽度</li>
<li>border-style: dashed; 边框样式</li>
<li>border-color: pink; 边框颜色</li>
<li>border: 5px dotted pinkp; 边框简写</li>
<li>border: none; 边框去掉</li>
<li>border-top: 宽度 样式 颜色; 上边框</li>
<li>border-bottom: 宽度 样式 颜色; 下边框</li>
<li>border-left: 宽度 样式 颜色; 左边框</li>
<li>border-right: 宽度 样式 颜色; 右边框</li>
<li>border-collapse:collapse; 合并边框，表格边框会叠加，合并后就是细线表格</li>
<li>border-radius:50%; 高度的一半,圆角边框</li>
</ul>
<p>圆角边框</p>
<ul>
<li>border-radius: 20px 20px 20px 20px; 圆角边框简写，左上 右上 右下 左下</li>
<li>border-top-left-radius:20px; 按顺序设置可以分别设置四个角，左上 右上 左下 右下</li>
<li>border-top-right-radius:20px;</li>
<li>border-bottom-left-radius:20px;</li>
<li>border-bottom-right-radius:20px;</li>
</ul>
<p>内边距</p>
<ul>
<li>padding-left: 左内边距</li>
<li>padding-right: 右内边距</li>
<li>padding-top: 上内边距</li>
<li>padding-bottom: 下内边距</li>
<li>padding: 10px 10px 10px 10px;上右下左的内边距简写</li>
<li>padding: 10px;上右下左的内边距简写</li>
<li>padding: 10px 10px;上下和左右内边距简写</li>
<li>padding: 10px 10px;上和左右和下内边距简写</li>
</ul>
<blockquote>
<p>内边距会撑大盒子增加盒子宽度，没有宽度的盒子指定内边距则不会撑开盒子。比如父盒子指定了宽度子盒子不指定宽度设置内边距是和父盒子一样宽的，如果子盒子指定了宽度再给内边距则会撑破父盒子（比父盒子宽）</p>
</blockquote>
<p>外边距</p>
<ul>
<li>margin: 10px;</li>
<li>marrgin-top: 50px;</li>
<li>margin: 0 auto; 块级盒子居中对齐，注意盒子要设置宽度</li>
</ul>
<p>盒子阴影</p>
<ul>
<li>box-shadow: 水平阴影 垂直阴影 模糊 影子大小 阴影颜色 内/外阴影;</li>
<li>box-shadow: 0 15px 30px rgb(0,0,0,.3);</li>
</ul>
<p>元素默认就有内外边距，清除内外边距：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    padding:0;</span><br><span class="line">    margin:0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>行内元素为了兼容性，尽量只设置左右内外边距</p>
</blockquote>
<h3 id="外边距的合并">外边距的合并</h3>
<p>两个上下相邻的盒子设置了外边距，则取两个值中的较大者合并，这叫外边距塌陷现象
<img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/taxian.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/taxian.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>垂直的外边距合并，两个嵌套关系的块元素，如果父元素没有上内边距及边框。父元素的上外边距会与子元素的上外边距合并，合并为两者中的较大值
<img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/taxian2.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/taxian2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<blockquote>
<p>盒子有浮动或者绝对定位（固定定位）属性也能解决外边距合并的问题</p>
</blockquote>
<h3 id="盒子模型的稳定性">盒子模型的稳定性</h3>
<p>根据盒子模型稳定性，建议优先使用宽度，其次内边距，再次外边距</p>
<ul>
<li>width &gt; padding &gt; margin</li>
</ul>
<h2 id="布局">布局</h2>
<h3 id="浮动">浮动</h3>
<p>css布局的三种机制</p>
<ol>
<li>普通流（标准流）
<ul>
<li>块级元素会独占一行，从上往下排列
<ul>
<li>常用元素：div,hr,p,h1~h6,ul,ol,dl,form,table</li>
</ul>
</li>
<li>行类元素按照顺序从左到右排列
<ul>
<li>常用元素：span,a,i,em</li>
</ul>
</li>
</ul>
</li>
<li>浮动
<ul>
<li>让盒子从普通流中浮起来，主要用于让多个块级盒子一行显示</li>
</ul>
</li>
<li>定位
<ul>
<li>将盒子定在浏览器的某一位置</li>
</ul>
</li>
</ol>
<p>浮动的作用</p>
<ol>
<li>让多个盒子水平排列成一行，使浮动成为布局重要手段。</li>
<li>可以实现盒子的左右对齐等</li>
<li>浮动控制图片，实现文字环绕</li>
</ol>
<ul>
<li>float: none/left/right; 不浮动和左浮动右浮动</li>
</ul>
<p>浮动列表元素</p>
<blockquote>
<p>实际使用的导航栏中，我们不会用标签a而是用li包含连接(li+a)的做法</p>
</blockquote>
<ol>
<li>li+a语义清晰，一看就是有条理的列表型内容</li>
<li>如果直接用a,搜索引擎容易辨别为有堆砌关键字的嫌疑（故意堆砌关键字容易被搜索引擎有降权的风险），从而影响网站排名</li>
</ol>
<h3 id="清除浮动">清除浮动</h3>
<p>父级盒子很多情况下，不方便给高度，但是子盒子浮动就不占有位置，最后父盒子高度为0，就影响了下面的标准流盒子
<img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/qingchu.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/qingchu.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
<img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/qingchu2.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/qingchu2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
清除浮动就是为了解决父级元素因为子级浮动引起的内部高度为0的问题。清除后父级就会根据浮动盒子自动检测高度。父级有了高度就不会影响下面的标准流了</p>
<ol>
<li>额外标签法清除浮动，在最后一个浮动标签后面添加一个不浮动的div标签,样式写clear:both</li>
<li>浮动标签的父级样式添加:overflow:hidden|auto|scroll 都可以实现清除浮动，该样式是溢出样式隐藏</li>
<li>使用after伪元素清除浮动，给父级添加以下样式就能清除浮动
<img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/qingchu3.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/qingchu3.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></li>
<li>使用双伪元素清除浮动，给父级添加以下样式就能清除浮动
<img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/qingchu4.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/qingchu4.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></li>
</ol>
<p>什么时候清除浮动</p>
<ul>
<li>父级没高度</li>
<li>子盒子浮动了</li>
<li>影响下面布局了</li>
</ul>
<h3 id="CSS属性书写顺序">CSS属性书写顺序</h3>
<ol>
<li>布局定位属性： display/position/float/clear/visibility/overflow (display第一个写，关系到模式)</li>
<li>自身属性：width/height/margin/padding/border/background</li>
<li>文本属性：color/font/text-decoration/text-align/vertical-align/white-space/break-word</li>
<li>其他属性（CSS3）：content/cursor/border-radius/box-shadow/text-shadow/background:linear-gradiennt ...</li>
</ol>
<h3 id="布局流程">布局流程</h3>
<ol>
<li>必须确定页面的版心（可视区），我们测量可知。</li>
<li>分析页面中的行模块，以及每个行模块中的列模块。其实页面布局，就是一行一行罗列而成</li>
<li>制作HTML结构，要遵循现有结构后有样式的原则。结构永远最重要。</li>
<li>开始运用盒子模型的原理，通过DIV+CSS布局来控制网页的各个模块。</li>
</ol>
<h2 id="定位">定位</h2>
<h3 id="边偏移">边偏移</h3>
<p>定位的盒子要通过边偏移来移动位置，定位的盒子有边偏移才有价值，一般有定位的地方就有边偏移</p>
<ul>
<li>top:80px; 顶端偏移量，定义元素相对于其父元素上边线的距离</li>
<li>bottom:80px; 底部偏移量，定义元素相对于其父元素下边线的距离</li>
<li>left:80px; 左侧偏移量，定义元素相对于其父元素左边线的距离</li>
<li>right:80px; 右侧偏移量，定义元素相对于其父元素右边线的距离</li>
</ul>
<h3 id="定位模式">定位模式</h3>
<p>在不同情况下要用到不同的定位模式</p>
<ul>
<li>position: static; 静态定位,默认模式相当于none,不要定位的时候用</li>
<li>position: relative; 相对定位，相对于原来在标准流中的位置来移动，在原有标准流的区域继续占有（保留位置）</li>
<li>position: absolute; 绝对定位，绝对定位以父级位置来移动，父级没有定位就以浏览器为准（不保留位置）</li>
<li>position: fixed; 固定定位，以浏览器可视窗口为准固定位置，不随滚动条滚动而滚动，不保留原位置</li>
</ul>
<blockquote>
<p>父级要占有位置，子级要任意摆放，所以经常要使父级相对定位，子级绝对定位（子绝父相）</p>
</blockquote>
<p><img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/dingwei.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/dingwei.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>绝对定位居中对齐，先让盒子左侧移动到父级的水平中心位置，再让盒子向左移动自身宽度的一半
<img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/dingwei2.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/dingwei2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<blockquote>
<p>固定定位居中对齐，<code>width:100%</code>加<code>text-align:center</code>是通栏居中对齐</p>
</blockquote>
<p>堆叠顺序<code>z-index</code>，在使用定位时可能会出现盒子重叠，加了定位的盒子后面的盒子会压住前面的盒子，可以用<code>z-index</code>层叠等级改变盒子的堆叠顺序
<img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/dingwei3.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/dingwei3.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<ul>
<li>z-index 取值可以是正负数或0，数值越大，盒子越靠上</li>
<li>如果取值相同，则按书写顺序，后来居上</li>
<li>取值后面没有单位</li>
</ul>
<p>定位会改变display属性，display是显示模式，可以改变显示模式的方法有</p>
<ul>
<li>可以用inline-block转换为行内块</li>
<li>可以用浮动float默认转换行内块（类似行内块，并不完全一样，因为浮动是脱标的）</li>
<li>绝对定位和固定定位也和浮动类似，默认转换为行内块</li>
</ul>
<h2 id="css高级技巧">css高级技巧</h2>
<h3 id="元素的显示与隐藏">元素的显示与隐藏</h3>
<p>display设置或检索对象如何显示，不保留位置
display:nono; 隐藏对象
display:block; 除了转换为块元素，同时还有显示元素的意思</p>
<p>visibility设置对象隐藏,保留位置
visibility:hidden; 隐藏
visibility:visible; 显示</p>
<p>overflow检索或设置对象超出其指定高宽时如何管理内容
overflow:visible; 不隐藏内容也不显示滚动条
overflow:hidden; 超出部分隐藏
overflow:scroll; 不管内容是否超出，总是显示滚动条
overflow:auto; 超出自动显示滚动条</p>
<blockquote>
<p>overflow可以清除浮动，可以保证盒子的内容不会超出盒子</p>
</blockquote>
<h3 id="css用户界面样式">css用户界面样式</h3>
<p>鼠标样式cursor,属性：default 默认、pointer 小手、move 移动、text 文本、not-allowed 禁止</p>
<p>轮廓线outline
用于绘制元素周围的一条线，在边框的外围，可起到突出元素的作用。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">outline: outline-color | outline-style | outline-width;</span><br></pre></td></tr></table></figure>
<p>常用的方式是：outline:0; 或者 outline:none</p>
<p>防止拖拽文本域，让textarea标签右下角不可拖拽
resize:none;</p>
<h3 id="垂直居中">垂直居中</h3>
<p>vertical-align垂直对齐，只针对于行内元素和行内块元素</p>
<p><img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/chuizhi.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/chuizhi.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
基于文本的四条线设置垂直对齐</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vertical-align:baseline | top | middle | bottom</span><br></pre></td></tr></table></figure>
<blockquote>
<p>主要用于控制文字和图片和表单之间垂直对齐关系</p>
</blockquote>
<p><img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/chuizhi2.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/chuizhi2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<blockquote>
<p>文字和图片默认是基线对齐，所以图片底侧会产生空白,改成其他对齐方式就能去除图片底侧空白，或者把图片转换成块元素也能去除</p>
</blockquote>
<p><img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/chuizhi3.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/chuizhi3.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h3 id="文本溢出省略">文本溢出省略</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/*先强制一行内显示文本*/</span><br><span class="line">white-space: nowrap;</span><br><span class="line">/*超出部分隐藏*/</span><br><span class="line">overflow: hidden;</span><br><span class="line">/*用省略号替代超出部分*/</span><br><span class="line">text-overflow: ellipsis;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/shenglue.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/shenglue.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h3 id="精灵技术">精灵技术</h3>
<p>精灵是将网页中的多个背景图像整合到一张图中，减少服务器请求图片次数。网页中只需要精灵图中的某个小图。</p>
<p><img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/jingling.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/jingling.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="精灵图"></p>
<blockquote>
<p>精确测量图标在精灵图的位置和大小，先设置盒子宽高，然后利用背景位置（background-position）确定精灵图位置</p>
</blockquote>
<p>滑动门技术，可以让特殊形状的背景图自适应元素内容，使背景图可以自由拉伸滑动。</p>
<blockquote>
<p>利用精灵图设置文本的左侧背景和右侧背景，设置padding拉伸，实现滑动门</p>
</blockquote>
<h3 id="负值">负值</h3>
<p><img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/fuzhi.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/fuzhi.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
利用margin负值让盒子边框相交的部分变细</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">float: left;</span><br><span class="line">margin-left: -1px</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果要鼠标经历过突出边框，就要用到定位</p>
</blockquote>
<h3 id="三角形">三角形</h3>
<p><img src="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/sanjiaoxing.png" class="lazyload" data-srcset="/2020/10/31/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CSS3%E5%8A%A0DIV%E5%B8%83%E5%B1%80/sanjiaoxing.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>使用css边框模拟三角形，宽度高度要为0。四个边框都写，保留需要的边框颜色，其他位置边框颜色是透明（rransparent）。为了兼容性要设置font-size:0;line-height:0;</p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>div</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用Ubuntu18安装Hive</title>
    <url>/2020/07/08/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Hive/</url>
    <content><![CDATA[<p>hive是基于hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张数据库表并提供类sql查询功能</p>
<span id="more"></span>
<h2 id="准备工作">准备工作</h2>
<ul>
<li>安装Hive之前必须配置好hadoop环境</li>
<li>安装Hive之前必须配置好JDK</li>
<li>安装好mysql数据库</li>
<li>Hive可以只安装在namenode所在的机器上，如果NameNode有多个，则每个都需要安装，可以不在datanode上安装</li>
</ul>
<h2 id="为什么要用Hive">为什么要用Hive</h2>
<ol>
<li>直接使用hadoop所面临的问题:</li>
</ol>
<ul>
<li>人员学习成本太高</li>
<li>项目周期要求太短</li>
<li>MapReduce实现复杂查询逻辑开发难度太大</li>
</ul>
<ol start="2">
<li>为什么要使用Hive</li>
</ol>
<ul>
<li>操作接口采用类SQL语法，提供快速开发的能力。</li>
<li>避免了去写MapReduce，减少开发人员的学习成本。</li>
<li>扩展功能很方便。</li>
</ul>
<ol start="3">
<li>
<p>Hive的特点：可扩展，延展性，容错</p>
</li>
<li>
<p>Hive的数据存储</p>
</li>
</ol>
<ul>
<li>Hive中所有的数据都存储在 HDFS 中，没有专门的数据存储格式（可支持Text，SequenceFile，ParquetFile，RCFILE等）</li>
<li>只需要在创建表的时候告诉 Hive 数据中的列分隔符和行分隔符，Hive 就可以解析数据。</li>
<li>Hive 中包含以下数据模型：DB、Table，External Table，Partition，Bucket。
<ul>
<li>db：在hdfs中表现为${hive.metastore.warehouse.dir}目录下一个文件夹</li>
<li>table：在hdfs中表现所属db目录下一个文件夹</li>
<li>external table：与table类似，不过其数据存放位置可以在任意指定路径</li>
<li>partition：在hdfs中表现为table目录下的子目录</li>
<li>bucket：在hdfs中表现为同一个表目录下根据hash散列之后的多个文件</li>
</ul>
</li>
</ul>
<h2 id="hive安装">hive安装</h2>
<p>解压：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -zxvf apache-hive-2.3.7-bin.tar.gz</span><br></pre></td></tr></table></figure>
<p>把解压后的文件移到目录/usr/local/下:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mv apache-hive-2.3.7-bin /usr/local/hive</span><br></pre></td></tr></table></figure>
<p>配置hive环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure>
<p>输入下面内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export HIVE_HOME=/usr/local/hive</span><br><span class="line">export HIVE_CONF_DIR=$HIVE_HOME/conf</span><br><span class="line">export PATH=$PATH:$HIVE_HOME/bin</span><br></pre></td></tr></table></figure>
<p>授权</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo chown -R hadoop:hadoop /usr/local/hive</span><br></pre></td></tr></table></figure>
<p>使配置文件的修改生效</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<h2 id="配置hive">配置hive</h2>
<h3 id="配置hive-site-xml">配置hive-site.xml</h3>
<p>进入目录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd $HIVE_CONF_DIR</span><br></pre></td></tr></table></figure>
<p>拷贝hive-default.xml.template并重命名为hive-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cp hive-default.xml.template  hive-site.xml</span><br></pre></td></tr></table></figure>
<p>编辑hive-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim hive-site.xml</span><br></pre></td></tr></table></figure>
<p>使用hadoop新建hdfs目录
因为在hive-site.xml中有这样的配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.exec.scratchdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>/tmp/hive<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>所以要在Hadoop集群新建/user/hive/warehouse目录，执行命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入Hadoop主目录</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line">hadoop fs -mkdir -p  /user/hive/warehouse</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建的目录赋予读写权限</span></span><br><span class="line">hadoop fs -chmod -R 777 /user/hive/warehouse</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建/tmp/hive/目录</span></span><br><span class="line">hadoop fs -mkdir -p /tmp/hive/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 目录赋予读写权限</span></span><br><span class="line">hadoop fs -chmod -R 777 /tmp/hive</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用以下命令检查目录是否创建成功</span></span><br><span class="line">hadoop fs -ls /user/hive</span><br><span class="line">hadoop fs -ls /tmp/hive</span><br></pre></td></tr></table></figure>
<p>修改hive-site.xml中的临时目录
将hive-site.xml文件中的<code>$&#123;system:java.io.tmpdir&#125;</code>替换为hive的临时目录，例如我替换为<code>/usr/local/hive/tmp</code>，该目录如果不存在则要自己手工创建，并且赋予读写权限。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd $HIVE_HOME</span><br><span class="line">mkdir tmp</span><br><span class="line">chmod -R 777 tmp/</span><br></pre></td></tr></table></figure>
<p>编辑hive-site</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim hive-site.xml</span><br></pre></td></tr></table></figure>
<p>在vim中使用下面的代码替换<code>$&#123;system:java.io.tmpdir&#125;</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">:%s#$&#123;system:java.io.tmpdir&#125;#/usr/local/hive/tmp#g</span><br></pre></td></tr></table></figure>
<p>再将配置文件中<code>$&#123;system:user.name&#125;</code>全部替换为root</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">:%s#$&#123;system:user.name&#125;#root#g</span><br></pre></td></tr></table></figure>
<p>例如原来：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.downloaded.resources.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span>$&#123;system:java.io.tmpdir&#125;/$&#123;hive.session.id&#125;_resources<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">description</span>&gt;</span>Temporary local directory for added resources in the remote file system.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>替换为：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.downloaded.resources.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--value&gt;$&#123;system:java.io.tmpdir&#125;/$&#123;hive.session.id&#125;_resources&lt;/value--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/local/apache-hive-2.1.1/tmp/$&#123;hive.session.id&#125;_resources<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Temporary local directory for added resources in the remote file system.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="修改hive-site-xml数据库相关的配置">修改hive-site.xml数据库相关的配置</h3>
<p><code>javax.jdo.option.ConnectionDriverName</code>，将该name对应的value修改为MySQL驱动类路径：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<p><code>javax.jdo.option.ConnectionURL</code>，将该name对应的value修改为MySQL的地址：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://127.0.0.1:3306/hive?createDatabaseIfNotExist=true<span class="symbol">&amp;amp;</span>useSSL=false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>javax.jdo.option.ConnectionUserName</code>，将对应的value修改为MySQL数据库登录名：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hive<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>javax.jdo.option.ConnectionPassword</code>，将对应的value修改为MySQL数据库的登录密码：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hive<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>将MySQL驱动包上载到Hive的lib目录下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cp /home/heyj/down/mysql-connector-java-5.1.36.jar $HIVE_HOME/lib/</span><br></pre></td></tr></table></figure>
<p>新建hive-env.sh文件并进行修改</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$HIVE_CONF_DIR</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#基于模板创建hive-env.sh</span></span><br><span class="line">cp hive-env.sh.template hive-env.sh</span><br><span class="line"></span><br><span class="line">vim hive-env.sh</span><br></pre></td></tr></table></figure>
<p>编辑配置文件并加入以下配置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Set HADOOP_HOME to point to a specific hadoop install directory</span><br><span class="line">HADOOP_HOME=/usr/local/hadoop</span><br><span class="line"></span><br><span class="line"># Hive Configuration Directory can be controlled by:</span><br><span class="line">export HIVE_CONF_DIR=/usr/local/hive/conf</span><br><span class="line"></span><br><span class="line"># Folder containing extra libraries required for hive compilation/execution can be controlled by:</span><br><span class="line">export HIVE_AUX_JARS_PATH=/usr/local/hive/lib</span><br></pre></td></tr></table></figure>
<h3 id="创建元数据库">创建元数据库</h3>
<p>登录mysql数据库</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>
<p>mysql创建hive用户密码</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> DATABASE hive;</span><br><span class="line">mysql<span class="operator">&gt;</span> USE hive;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;hive&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;hive&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> hive.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;hive&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;hive&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> hive.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;hive&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;hive&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> FLUSH PRIVILEGES;</span><br><span class="line">mysql<span class="operator">&gt;</span> quit;</span><br></pre></td></tr></table></figure>
<p>从Hive 2.1开始，我们需要运行下面的schematool命令作为初始化步骤,MySQL数据库初始化</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入到hive的bin目录</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$HIVE_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对数据库进行初始化</span></span><br><span class="line">schematool -initSchema -dbType mysql</span><br></pre></td></tr></table></figure>
<p>执行成功后，在mysql的hive数据库里已生成metadata数据表：</p>
<h2 id="启动Hive">启动Hive</h2>
<p>执行hive的sql命令，在sql位置输入sql命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hive -e &#x27;sql&#x27;</span><br></pre></td></tr></table></figure>
<p>或者启动hive，在命令行输入sql</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hive</span><br></pre></td></tr></table></figure>
<p>显示hive中所有的内置函数，测试hive是否可用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hive&gt; show functions;</span><br></pre></td></tr></table></figure>
<p>不报错就安装成功了</p>
<h3 id="启动hiveserver2">启动hiveserver2</h3>
<p>启动为前台</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hiveserver2</span><br></pre></td></tr></table></figure>
<p>或者使用下面的命令启动</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hive --service hiveserver2</span><br></pre></td></tr></table></figure>
<p>启动为后台</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nohup hiveserver2 1&gt;/var/log/hiveserver.log 2&gt;/var/log/hiveserver.err &amp;</span><br></pre></td></tr></table></figure>
<p>停止服务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ps -aux | grep hiveserver2 | grep -v grep | awk &#x27;&#123;print $2&#125;&#x27;  # 获取进程id</span><br><span class="line">kill -9 [进程id]  # 强制停止</span><br></pre></td></tr></table></figure>
<p>启动成功后，可以在别的节点上用beeline去连接,有两种方法：</p>
<ol>
<li>
<p><code>beeline</code> 回车，进入beeline的命令界面
输入命令连接hiveserver2</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">beeline&gt; !connect jdbc:hive2://localhost:10000</span><br></pre></td></tr></table></figure>
<p>（hadoop01是hiveserver2所启动的那台主机名，端口默认是10000）</p>
</li>
<li>
<p>或者启动就连接：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">beeline -u jdbc:hive2://localhost:10000 -n hadoop</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>如果hiveserver2无法连接，修改<code>hive.server2.authentication</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.authentication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>NOSASL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在hadoop的core-site.xml中追加</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.root.hosts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.root.groups<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.hadoop.hosts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.hadoop.groups<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>浏览器打开ip(安装hive的主机ip地址)+端口10002，就能看到hiveserver2服务web页面</p>
<h2 id="hive常用命令">hive常用命令</h2>
<h3 id="显示命令">显示命令</h3>
<blockquote>
<p>show tables;<br>
-- 显示表</p>
</blockquote>
<blockquote>
<p>show databases;<br>
-- 显示数据库</p>
</blockquote>
<blockquote>
<p>show partitions t_4;<br>
-- 显示表分区</p>
</blockquote>
<blockquote>
<p>show functions;<br>
-- 显示hive中所有的内置函数</p>
</blockquote>
<blockquote>
<p>desc t_name;<br>
-- 显示表定义</p>
</blockquote>
<blockquote>
<p>desc extended t_name;<br>
-- 显示表定义的详细信息</p>
</blockquote>
<blockquote>
<p>desc formatted table_name;<br>
-- 显示表定义的详细信息，并且用比较规范的格式显示</p>
</blockquote>
<blockquote>
<p>show create table table_name;<br>
-- 显示建表语句 可以查看表创建语句</p>
</blockquote>
<h3 id="创建表">创建表</h3>
<blockquote>
<p>create database hive_db<br>
-- 创建数据库</p>
</blockquote>
<blockquote>
<p>use hive_db<br>
-- 使用数据库</p>
</blockquote>
<blockquote>
<p>create table if not exists table_name (foo int, bar string) row format delimited fields terminated by ',' stored as textfile;<br>
-- 创建内部表</p>
</blockquote>
<blockquote>
<p>create external table if not exists pageview(pageid int,page_url string comment 'The page URL') row format delimited fields terminated by ',' location 'hdfs://mini1:9000/user/hive/warehouse/'<br>
-- 创建外部表</p>
</blockquote>
<blockquote>
<p>create table student_p(Sno int,Sname string,Sex string,Sage int,Sdept string) partition by(part string) row format delimited fields terminated by ',' stored as textfile;<br>
-- 创建分区表</p>
</blockquote>
<blockquote>
<p>create table student(id int,age int,name string) partitioned by(stat_date string) clustered by(id) sorted by (age) into 2 buckets row format delimited fields terminated by ',';<br>
-- 创建分桶表</p>
</blockquote>
<h3 id="修改表">修改表</h3>
<blockquote>
<p>alter table student_p add partition(part='a') partition(part='b');<br>
-- 增加分区</p>
</blockquote>
<blockquote>
<p>alter table table_name rename to new_table_name;<br>
-- 重命名表</p>
</blockquote>
<h3 id="删除表">删除表</h3>
<blockquote>
<p>drop table table_name;<br>
-- 删除表</p>
</blockquote>
<blockquote>
<p>truncate table table_name;<br>
-- 删除表中的数据</p>
</blockquote>
<blockquote>
<p>alter table table_name drop partition (partition_name='分区名')<br>
-- 按分区删除数据</p>
</blockquote>
<h3 id="增加数据">增加数据</h3>
<blockquote>
<p>load data local inpath '/home/hadoop/data/data.txt' into table table_name;<br>
-- 本地模式加载数据到表</p>
</blockquote>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>hdfs</tag>
        <tag>hive</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用Ubuntu16.04挂载硬盘</title>
    <url>/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu16.04%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98/</url>
    <content><![CDATA[<p>操作前先要添加一块硬盘</p>
<p>查看硬盘位置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo fdisk -l</span><br></pre></td></tr></table></figure>
<p><img src="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu16.04%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98/1261_1.png" class="lazyload" data-srcset="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu16.04%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98/1261_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>根据磁盘大小，我挂的是40g的，所以很明显是 <code>/dev/sdb</code></p>
<span id="more"></span>
<p>格式化</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo mkfs.ext4  /dev/sdb</span><br></pre></td></tr></table></figure>
<p>进入命令行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo fdisk /dev/sdb</span><br></pre></td></tr></table></figure>
<p>命令行输入</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">n   #添加新分区</span><br><span class="line">p   #设置主分区</span><br><span class="line">#敲3次回车</span><br><span class="line">t   #更改分区类型，可输入L查看所有分区类型编号</span><br><span class="line">83  #linux类型分区</span><br><span class="line">w   #保存退出</span><br></pre></td></tr></table></figure>
<p>查看新分区,可以看到新分区是<code>/dev/sdb1</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo fdisk -l</span><br></pre></td></tr></table></figure>
<p><img src="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu16.04%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98/1269_1.png" class="lazyload" data-srcset="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu16.04%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98/1269_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>在根下创建目录/data，再挂载它</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo mkdir /data </span><br><span class="line">sudo mount /dev/sdb1 /data</span><br></pre></td></tr></table></figure>
<p>查看硬盘UUID号,记下<code>/dev/sdb1</code>的UUID</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo blkid</span><br></pre></td></tr></table></figure>
<p>编辑配置文件，使机器重启可以自动挂载</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/fstab</span><br></pre></td></tr></table></figure>
<p>在最后一行添加：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UUID=3cbb0105-2d20-444e-9186-3c1ce30239fb /data           ext4    defaults        0       0</span><br></pre></td></tr></table></figure>
<p>注：格式为 设备名称 挂载点 分区类型 挂载选项 dump选项 fsck选项
dump选项–这一项为0，就表示从不备份。如果上次用dump备份，将显示备份至今的天数。
fsck选项 –启动时fsck检查的顺序。为0就表示不检查，（/）分区永远都是1，其它的分区只能从2开始，当数字相同就同时检查（但不能有两1）</p>
<p>输入<code>df -h</code> 可以检验磁盘大小
<img src="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu16.04%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98/1261_1.png" class="lazyload" data-srcset="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu16.04%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98/1261_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用SqlServer获取客户端的信息</title>
    <url>/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8SqlServer%E8%8E%B7%E5%8F%96%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E4%BF%A1%E6%81%AF/</url>
    <content><![CDATA[<p>用Sql获取操作的数据库名,计算机名,用户名,网卡物理地址,IP地址,程序名
<img src="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8SqlServer%E8%8E%B7%E5%8F%96%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E4%BF%A1%E6%81%AF/20200522154113.png" class="lazyload" data-srcset="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8SqlServer%E8%8E%B7%E5%8F%96%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E4%BF%A1%E6%81%AF/20200522154113.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<span id="more"></span>
<h2 id="创建存储过程">创建存储过程</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> proc p_getlinkinfo</span><br><span class="line"></span><br><span class="line"><span class="variable">@dbname</span> sysname<span class="operator">=</span><span class="keyword">null</span>,<span class="comment">--要查询的数据库名,默认查询所有数据库的连接信息</span></span><br><span class="line"></span><br><span class="line"><span class="variable">@includeip</span> bit<span class="operator">=</span><span class="number">0</span>     <span class="comment">--是否显示IP地址,因为查询IP地址比较费时,所以增加此控制</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="variable">@dbid</span> <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> <span class="variable">@dbid</span><span class="operator">=</span>db_id(<span class="variable">@dbname</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> #tb(id <span class="type">int</span> <span class="keyword">identity</span>(<span class="number">1</span>,<span class="number">1</span>),dbname sysname,hostname </span><br><span class="line"><span class="type">nchar</span>(<span class="number">128</span>),loginname <span class="type">nchar</span>(<span class="number">128</span>),net_address <span class="type">nchar</span>(<span class="number">12</span>),net_ip </span><br><span class="line">nvarchar(<span class="number">15</span>),prog_name <span class="type">nchar</span>(<span class="number">128</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> #tb(hostname,dbname,net_address,loginname,prog_name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> hostname,db_name(dbid),net_address,loginame,program_name </span><br><span class="line"><span class="keyword">from</span> master..sysprocesses</span><br><span class="line"></span><br><span class="line"><span class="keyword">where</span> hostname<span class="operator">&lt;&gt;</span><span class="string">&#x27;&#x27;</span> <span class="keyword">and</span> (<span class="variable">@dbid</span> <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">or</span> dbid<span class="operator">=</span><span class="variable">@dbid</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if <span class="variable">@includeip</span><span class="operator">=</span><span class="number">0</span> goto lb_show  <span class="comment">--如果不显示IP地址,就直接显示</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="variable">@sql</span> <span class="type">varchar</span>(<span class="number">500</span>),<span class="variable">@hostname</span> <span class="type">nchar</span>(<span class="number">128</span>),<span class="variable">@id</span> <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> #ip(hostname <span class="type">nchar</span>(<span class="number">128</span>),a <span class="type">varchar</span>(<span class="number">200</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> tb <span class="keyword">cursor</span> <span class="keyword">local</span> <span class="keyword">for</span> <span class="keyword">select</span> <span class="keyword">distinct</span> hostname <span class="keyword">from</span> #tb</span><br><span class="line"></span><br><span class="line"><span class="keyword">open</span> tb</span><br><span class="line"></span><br><span class="line"><span class="keyword">fetch</span> next <span class="keyword">from</span> tb <span class="keyword">into</span> <span class="variable">@hostname</span></span><br><span class="line"></span><br><span class="line">while @<span class="variable">@fetch</span>_status<span class="operator">=</span><span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> <span class="variable">@sql</span><span class="operator">=</span><span class="string">&#x27;ping &#x27;</span><span class="operator">+</span><span class="variable">@hostname</span><span class="operator">+</span><span class="string">&#x27; -a -n 1 -l 1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> #ip(a) <span class="keyword">exec</span> master..xp_cmdshell <span class="variable">@sql</span></span><br><span class="line"></span><br><span class="line">update #ip <span class="keyword">set</span> hostname<span class="operator">=</span><span class="variable">@hostname</span> <span class="keyword">where</span> hostname <span class="keyword">is</span> <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">fetch</span> next <span class="keyword">from</span> tb <span class="keyword">into</span> <span class="variable">@hostname</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">update #tb <span class="keyword">set</span> net_ip<span class="operator">=</span><span class="keyword">left</span>(a,patindex(<span class="string">&#x27;%:%&#x27;</span>,a)<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> #tb a <span class="keyword">inner</span> <span class="keyword">join</span> (</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> hostname,a<span class="operator">=</span><span class="built_in">substring</span>(a,patindex(<span class="string">&#x27;Ping statistics for </span></span><br><span class="line"><span class="string">%:%&#x27;</span>,a)<span class="operator">+</span><span class="number">20</span>,<span class="number">20</span>) <span class="keyword">from</span> #ip</span><br><span class="line"></span><br><span class="line"><span class="keyword">where</span> a <span class="keyword">like</span> <span class="string">&#x27;Ping statistics for %:%&#x27;</span>) b <span class="keyword">on</span> a.hostname<span class="operator">=</span>b.hostname</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lb_show:</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> id,数据库名<span class="operator">=</span>dbname,客户机名<span class="operator">=</span>hostname,用户名<span class="operator">=</span>loginname</span><br><span class="line">,网卡物理地址<span class="operator">=</span>net_address,IP地址<span class="operator">=</span>net_ip,应用程序名称<span class="operator">=</span>prog_name <span class="keyword">from</span> #tb</span><br><span class="line"></span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--显示所有本机的连接信息：</span></span><br><span class="line"><span class="keyword">exec</span> p_getlinkinfo</span><br><span class="line"></span><br><span class="line"><span class="comment">--显示所有本机的连接信息,包含ip地址：</span></span><br><span class="line"><span class="keyword">exec</span> p_getlinkinfo <span class="variable">@includeip</span><span class="operator">=</span><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--显示连接指定数据库的信息：</span></span><br><span class="line"><span class="keyword">exec</span> p_getlinkinfo <span class="variable">@dbname</span><span class="operator">=</span>数据库名,<span class="variable">@includeip</span><span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="遇到的问题">遇到的问题</h2>
<p>错误描述：SQL Server阻止了对组件‘xp_cmdshell’的过程‘sys.xp_cmdshell’的访问。因为此组件已作为此服务嚣安全配置的一部分而被关闭。系统管理员可以通过使用sp_configure启用‘xp_cmdshell’。有关启用‘xp_cmdshell’的详细信息，请参阅sQL帮助文件。</p>
<p>解决方案</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">sp_configure <span class="string">&#x27;show advanced options&#x27;</span>,<span class="number">1</span></span><br><span class="line">reconfigure</span><br><span class="line">go</span><br><span class="line">sp_configure <span class="string">&#x27;xp_cmdshell&#x27;</span>,<span class="number">1</span></span><br><span class="line">reconfigure</span><br><span class="line">go</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用Ubuntu更换国内apt源</title>
    <url>/2020/02/16/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu%E6%9B%B4%E6%8D%A2%E5%9B%BD%E5%86%85apt%E6%BA%90/</url>
    <content><![CDATA[<p>备份原来的源：<br>
<code>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</code><br>
更换源:<br>
<code>sudo vim /etc/apt/sources.list</code><br>
将里面文件内容全部替换成下面：</p>
<span id="more"></span>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">deb包</span></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#测试版源</span></span>  </span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse</span><br><span class="line"><span class="meta">#</span><span class="bash"> 源码</span>  </span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#测试版源</span></span>  </span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse</span><br><span class="line"><span class="meta">#</span><span class="bash"> Canonical 合作伙伴和附加</span>  </span><br><span class="line">deb http://archive.canonical.com/ubuntu/ xenial partner</span><br><span class="line">deb http://extras.ubuntu.com/ubuntu/ xenial main</span><br></pre></td></tr></table></figure>
<p>执行更新：<br>
<code>sudo apt-get update</code><br>
复损坏的软件包，尝试卸载出错的包，重新安装正确版本的:<br>
<code>sudo apt-get -f install</code><br>
更新软件:<br>
<code>sudo apt-get upgrade</code></p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用Ubuntu18安装Spark</title>
    <url>/2020/07/21/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Spark/</url>
    <content><![CDATA[<p>Spark运行架构包括集群资源管理器（Cluster Manager）、运行作业任务的工作节点（Worker Node）、每个应用的任务控制节点（Driver）和每个工作节点上负责具体任务的执行进程（Executor）。其中，集群资源管理器可以是Spark自带的资源管理器，也可以是YARN或Mesos等资源管理框架。
<img src="/2020/07/21/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Spark/Spark%E8%BF%90%E8%A1%8C%E6%9E%B6%E6%9E%84.jpg" class="lazyload" data-srcset="/2020/07/21/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Spark/Spark%E8%BF%90%E8%A1%8C%E6%9E%B6%E6%9E%84.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<span id="more"></span>
<h2 id="Scala的安装">Scala的安装</h2>
<p>因为Spark本身是以Scala开发的，所以必须先安装Scala.
2.4.x的spark  -&gt;选择2.12.x的scala</p>
<h2 id></h2>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>spark</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用Ubuntu部署Flask+gunicorn</title>
    <url>/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu%E9%83%A8%E7%BD%B2Flask+gunicorn/</url>
    <content><![CDATA[<p>Gunicorn是一个unix上被广泛使用的高性能的Python WSGI UNIX HTTP Server。
和大多数的web框架兼容，并具有实现简单，轻量级，高性能等特点。
<img src="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu%E9%83%A8%E7%BD%B2Flask+gunicorn/12145841_UgME.jpg" class="lazyload" data-srcset="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu%E9%83%A8%E7%BD%B2Flask+gunicorn/12145841_UgME.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="gunicorn结构图"></p>
<span id="more"></span>
<h2 id="安装gunicorn">安装gunicorn</h2>
<p>安装pip版本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip3 install gunicorn</span><br></pre></td></tr></table></figure>
<p>或者安装ubuntu版本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install gunicorn</span><br></pre></td></tr></table></figure>
<h2 id="flask示例">flask示例</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/demo&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;gunicorn and flask demo.&quot;</span></span><br></pre></td></tr></table></figure>
<p>gunicorn运行flask app</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 普通模式启动</span></span><br><span class="line">gunicorn -w 4 -b 127.0.0.1:5001 manage:app</span><br><span class="line"><span class="comment"># 后台模式启动</span></span><br><span class="line">gunicorn -w 4 -D -b 127.0.0.1:5001 manage:app</span><br><span class="line"><span class="comment"># 配置文件模式启动</span></span><br><span class="line">gunicorn --preload -c gunicorn.conf.py manage:app</span><br><span class="line"><span class="comment"># 停止运行</span></span><br><span class="line">killall -9 gunicorn</span><br></pre></td></tr></table></figure>
<h2 id="配置supervisor">配置supervisor</h2>
<p>在production环境，起停和状态的监控最好用supervisior之类的监控工具，然后在gunicorn的前端放置一个http proxy server, 譬如nginx。</p>
<p>用apt安装supervisor</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install supervisor</span><br></pre></td></tr></table></figure>
<p>生成默认配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">echo_supervisord_config &gt; /etc/supervisor/supervisord.conf</span><br></pre></td></tr></table></figure>
<p>加入监控程序的配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[program:gunicorn_demo]</span><br><span class="line">directory=/var/www/gunicorn_demo/</span><br><span class="line">command=gunicorn --preload -c gunicorn_demo.py gunicorn_demo:app ; 程序启动命令</span><br><span class="line">autostart=true       ; 在supervisord启动的时候也自动启动</span><br><span class="line">startsecs=10         ; 启动10秒后没有异常退出，就表示进程正常启动了，默认为1秒</span><br><span class="line">autorestart=true     ; 程序退出后自动重启,可选值：[unexpected,true,false]，默认为unexpected，表示进程意外杀死后才重启</span><br><span class="line">startretries=3       ; 启动失败自动重试次数，默认是3</span><br><span class="line">user=root          ; 用哪个用户启动进程，默认是root</span><br><span class="line">priority=999         ; 进程启动优先级，默认999，值小的优先启动</span><br><span class="line">redirect_stderr=true ; 把stderr重定向到stdout，默认false</span><br><span class="line">stdout_logfile_maxbytes=100MB  ; stdout 日志文件大小，默认50MB</span><br><span class="line">stdout_logfile_backups = 20   ; stdout 日志文件备份数，默认是10</span><br><span class="line">; stdout 日志文件，需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord 会自动创建日志文件）</span><br><span class="line">stdout_logfile=/var/log/supervisor_logs/axf.out</span><br><span class="line">stopasgroup=false     ;默认为false,进程被杀死时，是否向这个进程组发送stop信号，包括子进程</span><br><span class="line">killasgroup=false     ;默认为false，向进程组发送kill信号，包括子进程</span><br></pre></td></tr></table></figure>
<p>supervisor常用命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo supervisorctl status        //查看所有进程的状态</span><br><span class="line">sudo supervisorctl stop es       //停止es</span><br><span class="line">sudo supervisorctl start es      //启动es</span><br><span class="line">sudo supervisorctl restart es    //重启es</span><br><span class="line">sudo supervisorctl update        //配置文件修改后使用该命令加载新的配置</span><br><span class="line">sudo supervisorctl reload        //重新启动配置中的所有程序</span><br></pre></td></tr></table></figure>
<p>把es换成all可以管理配置中的所有进程。直接输入supervisorctl进入supervisorctl的shell交互界面，此时上面的命令不带supervisorctl可直接使用。<br>
如果启动问题,先去看看log log的位置 stdout_logfile=/var/log/supervisor_logs/axf.out</p>
<h2 id="配置nginx">配置nginx</h2>
<p>为什么有了gunicorn为什么还需要nginx？因为nginx具备优秀的静态内容处理能力，然后将动态内容转发给gunicorn服务器，这样可以达到很好的客户端响应。</p>
<p>安装nginx</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure>
<p>mynginx.conf是需要自己创建的一个nginx配置文件，此文件放在项目文件夹中，配置内容如下</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;    </span><br><span class="line">    <span class="attribute">listen</span> <span class="number">9001</span>;</span><br><span class="line">    <span class="attribute">server_name</span> <span class="number">203.176.71.157</span> localhost; <span class="comment"># 这是HOST机器的外部域名，用地址也行    </span></span><br><span class="line">    <span class="attribute">access_log</span> /var/www/iclinicAI/logs/access.log;</span><br><span class="line">    <span class="attribute">error_log</span> /var/www/iclinicAI/logs/error.log;</span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">100M</span>;</span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:5001; <span class="comment"># 这里是指向 gunicorn host 的服务地址</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host $host;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        <span class="attribute">proxy_read_timeout</span> <span class="number">60</span>;</span><br><span class="line">        &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>刚建立的配置文件使用符号链接到Nginx配置文件文件夹中</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo ln -s /var/www/iclinicAI/mynginx.conf /etc/nginx/conf.d/</span><br><span class="line">sudo /etc/init.d/nginx restart <span class="comment"># 重启nginx</span></span><br></pre></td></tr></table></figure>
<h2 id="gunicorn配置">gunicorn配置</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># gunicorn.conf.py</span></span><br><span class="line"><span class="comment"># 监听地址和端口。</span></span><br><span class="line"><span class="built_in">bind</span> = <span class="string">&quot;127.0.0.1:5001&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># worker进程的数量。建议值2-4 x $(NUM_CORES)， 缺省为1。</span></span><br><span class="line">workers = 2</span><br><span class="line"></span><br><span class="line"><span class="comment"># worker进程的工作方式。 有 sync, eventlet, gevent, tornado, gthread, 缺省值sync。</span></span><br><span class="line"><span class="comment"># 这里工作模式协程</span></span><br><span class="line">worker_class = <span class="string">&#x27;gevent&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 工作进程中线程的数量。建议值2-4 x $(NUM_CORES)， 缺省值1。</span></span><br><span class="line"><span class="comment"># 此配置只适用于gthread 进程工作方式， 因为gevent这种使用的是协程工作方式。</span></span><br><span class="line"><span class="comment"># threads = 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># worker重启之前处理的最大requests数， 缺省值为0表示自动重启disabled。主要是防止内存泄露。</span></span><br><span class="line">max_requests = 50000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 抖动参数，防止worker全部同时重启。</span></span><br><span class="line">max_requests_jitter = 2</span><br><span class="line"></span><br><span class="line">timeout = 70</span><br><span class="line"></span><br><span class="line">graceful_timeout = 30</span><br><span class="line"></span><br><span class="line">limit_request_line = 8190</span><br><span class="line"></span><br><span class="line">limit_request_fields = 200</span><br><span class="line"></span><br><span class="line">limit_request_fields_size = 8190</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置最大并发量</span></span><br><span class="line">worker_connections = 2000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置gunicorn访问日志格式，错误日志无法设置</span></span><br><span class="line">access_log_format = <span class="string">&#x27;%(t)s %(p)s %(h)s &quot;%(r)s&quot; %(s)s %(L)s %(b)s %(f)s&quot; &quot;%(a)s&quot;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置进程文件目录</span></span><br><span class="line">pidfile = <span class="string">&#x27;/var/www/IASDataFlask/run/gunicorn.pid&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置访问日志和错误信息日志路径</span></span><br><span class="line">accesslog = <span class="string">&#x27;/var/www/IASDataFlask/logs/gunicorn_acess.log&#x27;</span></span><br><span class="line"></span><br><span class="line">errorlog = <span class="string">&#x27;/var/www/IASDataFlask/logs/gunicorn_error.log&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置日志记录水平</span></span><br><span class="line">loglevel = <span class="string">&#x27;warning&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="其他说明">其他说明</h2>
<h3 id="gunicorn-命令参数详解">gunicorn 命令参数详解</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">--version             <span class="comment"># 显示程序的版本号并退出</span></span><br><span class="line">-h, --<span class="built_in">help</span>            <span class="comment"># 显示此帮助消息并退出</span></span><br><span class="line">-c FILE, --config=FILE</span><br><span class="line">                      <span class="comment"># Gunicorn配置文件的路径。 [None]</span></span><br><span class="line">--debug               <span class="comment"># 在服务器中打开调试。 [False]</span></span><br><span class="line">--spew                <span class="comment"># 安装一个跟踪函数，该函数将抛出服务器执行的每一行。 [False]</span></span><br><span class="line">--access-logfile=FILE</span><br><span class="line">                      <span class="comment"># 要写入的访问日志文件。 [None]</span></span><br><span class="line">--access-logformat=STRING</span><br><span class="line">                      <span class="comment"># 访问日志格式。 [%(h)s %(l)s %(u)s %(t)s &quot;%(r)s&quot; %(s)s %(b)s &quot;%(f)s&quot; &quot;%(a)s&quot;]</span></span><br><span class="line">--error-logfile=FILE, --log-file=FILE</span><br><span class="line">                      <span class="comment"># 要写入的错误日志文件。 [-]</span></span><br><span class="line">--log-level=LEVEL     <span class="comment"># 错误日志输出的等级。 [info]</span></span><br><span class="line">--logger-class=STRING</span><br><span class="line">                      <span class="comment"># 要用在gunicorn中记录事件的日志记录器。 [simple]</span></span><br><span class="line">-n STRING, --name=STRING</span><br><span class="line">                      <span class="comment"># 与setproctitle一起用于进程命名的基础。 [None]</span></span><br><span class="line">--preload             <span class="comment"># 在worker进程被复制（派生）之前载入应用的代码。通过预加载应用，可以节省内存资源和提高服务启动时间。当然，如果你将应用加载进worker进程这个动作延后，那么重启worker将会容易很多。</span></span><br><span class="line">--reload              <span class="comment"># 更改代码的时候重启workers， 只建议在开发过程中开启。文档推荐下载inotify这个包来作为重载引擎。</span></span><br><span class="line">--reload_engine       <span class="comment"># 选择重载的引擎，支持的有三种，分别是auto，poll，inotify（需要单独安装） </span></span><br><span class="line">-D, --daemon          <span class="comment"># 以守护进程形式来运行Gunicorn进程。其实就是将这个服务放到后台去运行。 [False]</span></span><br><span class="line">-p FILE, --pid=FILE   <span class="comment"># PID文件使用的文件名。 [None]</span></span><br><span class="line">-u USER, --user=USER  <span class="comment"># 将工作进程切换为以该用户身份运行。[1000]</span></span><br><span class="line">-g GROUP, --group=GROUP</span><br><span class="line">                      <span class="comment"># 切换工作进程以该组身份运行。 [1000]</span></span><br><span class="line">-m INT, --<span class="built_in">umask</span>=INT   <span class="comment"># Gunicorn编写的文件上文件模式的位掩码。 [0]</span></span><br><span class="line">-b ADDRESS, --<span class="built_in">bind</span>=ADDRESS</span><br><span class="line">                      <span class="comment"># 要绑定的套接字。 [127.0.0.1:8000]</span></span><br><span class="line">--backlog=INT         <span class="comment"># 最大挂起连接数。 [2048]</span></span><br><span class="line">-w INT, --workers=INT</span><br><span class="line">                      <span class="comment"># 处理请求的工作进程数。 [1]</span></span><br><span class="line">-k STRING, --worker-class=STRING</span><br><span class="line">                      <span class="comment"># 使用的工作类型。 [sync]</span></span><br><span class="line">--worker-connections=INT</span><br><span class="line">                      <span class="comment"># 并发客户端的最大数量。 [1000]</span></span><br><span class="line">--max-requests=INT    <span class="comment"># 工作进程在重新启动之前将处理的最大请求数。 [0]</span></span><br><span class="line">-t INT, --timeout=INT</span><br><span class="line">                      <span class="comment"># 超过这个时间的工作进程被杀死并重新启动。 [30]</span></span><br><span class="line">--keep-alive=INT      <span class="comment"># 等待“保持活动”连接上的请求的秒数。 [2]</span></span><br></pre></td></tr></table></figure>
<h3 id="gunicorn-配置文件详解">gunicorn 配置文件详解</h3>
<p>gunicorn 配置项可以通过 gunicorn 的启动命令行中设定，也可以通过配置文件指定。强烈建议使用一个配置文件。</p>
<p>配置项如下：</p>
<h4 id="server-socket">server socket</h4>
<ul>
<li>
<p>bind<br>
监听地址和端口。</p>
</li>
<li>
<p>backlog<br>
服务器中在 pending 状态的最大连接数，即 client 处于 waiting 的数目。超过这个数目， client 连接会得到一个 error。<br>
建议值 64-2048。</p>
</li>
</ul>
<h4 id="worker-进程">worker 进程</h4>
<ul>
<li>
<p>workers<br>
worker 进程的数量。建议值 2-4 x $(NUM_CORES)， 缺省为 1。</p>
</li>
<li>
<p>worker_class<br>
worker 进程的工作方式。 有 sync, eventlet, gevent, tornado, gthread, 缺省值 sync。</p>
</li>
<li>
<p>threads<br>
工作进程中线程的数量。建议值 2-4 x $(NUM_CORES)， 缺省值 1。<br>
此配置只适用于 gthread 进程工作方式， 因为 gevent 这种使用的是协程工作方式。</p>
</li>
<li>
<p>worker_connections<br>
客户端最大同时连接数。只适用于 eventlet， gevent 工作方式。</p>
</li>
<li>
<p>max_requests<br>
worker 重启之前处理的最大 requests 数， 缺省值为 0 表示自动重启 disabled。主要是防止内存泄露。</p>
</li>
<li>
<p>max_requests_jitter<br>
抖动参数，防止 worker 全部同时重启。</p>
</li>
<li>
<p>timeout<br>
通常设为 30。</p>
</li>
<li>
<p>graceful_timeout<br>
接收到 restart 信号后，worker 可以在 graceful_timeout 时间内，继续处理完当前 requests。</p>
</li>
<li>
<p>keepalive<br>
server 端保持连接时间。</p>
</li>
</ul>
<h4 id="security">security</h4>
<ul>
<li>
<p>limit_request_line<br>
http request line 最大字节数。值范围 0-8190， 0 表示无限制。</p>
</li>
<li>
<p>limit_request_field<br>
http request 中 header 字段数的最大值。缺省为 100，最大 32768。</p>
</li>
<li>
<p>limit_request_field_size<br>
http request header 字段最大字节数。0 表示无限制。</p>
</li>
</ul>
<h4 id="调试">调试</h4>
<ul>
<li>
<p>reload<br>
当代码有修改时，自动重启 workers。适用于开发环境。</p>
</li>
<li>
<p>reload_extra_files<br>
扩展 reload 配置，增加 templates，configurations 等文件修改监控。</p>
</li>
<li>
<p>spew<br>
跟踪程序执行的每一行。</p>
</li>
<li>
<p>check_config<br>
检查配置。</p>
</li>
</ul>
<h4 id="server-机制">server 机制</h4>
<ul>
<li>
<p>sendfile<br>
系统底层拷贝数据方式，提供 performance。</p>
</li>
<li>
<p>chdir<br>
在 app 加载之前，进入到此目录。</p>
</li>
<li>
<p>daemon<br>
应用是否以 daemon 方式运行。</p>
</li>
<li>
<p>raw_env<br>
key=value, 传递环境参数。</p>
</li>
<li>
<p>pidfile<br>
pid 存储文件路径。</p>
</li>
<li>
<p>worker_tmp_dir<br>
临时工作目录。</p>
</li>
<li>
<p>user<br>
指定 worker 进程的运行用户名。</p>
</li>
<li>
<p>group<br>
指定 worker 进程运行用户所在组。</p>
</li>
<li>
<p>umask<br>
gunicorn 创建文件的缺省权限。</p>
</li>
<li>
<p>pythonpath<br>
附加到 python path 的目录列表。</p>
</li>
</ul>
<h4 id="日志">日志</h4>
<ul>
<li>
<p>accesslog<br>
访问日志文件路径。</p>
</li>
<li>
<p>access_log_format<br>
日志格式。 例如 %(h)s %(l)s %(u)s %(t)s &quot;%(r)s&quot; %(s)s %(b)s &quot;%(f)s&quot; &quot;%(a)s&quot; 。</p>
</li>
<li>
<p>errorlog<br>
错误日志路径。</p>
</li>
<li>
<p>loglever<br>
日志级别。debug, info, warning, error, critical.</p>
</li>
<li>
<p>capture_output<br>
重定向 stdout/stderr 到 error log file。</p>
</li>
<li>
<p>logger_class<br>
日志实现类。缺省 gunicorn.glogging.Logger 。</p>
</li>
<li>
<p>logconfig<br>
日志配置文件。同 python 标准日志模块 logging 的配置。</p>
</li>
</ul>
<h4 id="进程名">进程名</h4>
<ul>
<li>proc_name<br>
设置进程名 (setproctitle)，在 ps，top 等命令中会看到. 缺省值为 default_proc_name 配置。</li>
</ul>
<h4 id="server-钩子">server 钩子</h4>
<ul>
<li>on_starting</li>
<li>on_reload</li>
<li>when_ready</li>
<li>pre_fork</li>
<li>post_fork</li>
<li>post_worker_init</li>
<li>worker_init</li>
<li>worker_abort</li>
<li>pre_exec</li>
<li>pre_request</li>
<li>post_request</li>
<li>child_exit</li>
<li>worker-exit</li>
<li>nworkers_changed</li>
<li>on_exit</li>
</ul>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>ubuntu</tag>
        <tag>flask</tag>
        <tag>gunicorn</tag>
      </tags>
  </entry>
  <entry>
    <title>如何使用Ubuntu部署Flask+uwsgi</title>
    <url>/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu%E9%83%A8%E7%BD%B2Flask+uwsgi/</url>
    <content><![CDATA[<p>uWSGI是一个Web服务器，它实现了WSGI协议、uwsgi、http等协议。
<img src="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu%E9%83%A8%E7%BD%B2Flask+uwsgi/SDF98D.png" class="lazyload" data-srcset="/2020/04/15/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Ubuntu%E9%83%A8%E7%BD%B2Flask+uwsgi/SDF98D.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="结构图"></p>
<span id="more"></span>
<h2 id="一、准备">一、准备</h2>
<p>更新apt源</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>
<p>安装pip</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install python3-pip</span><br></pre></td></tr></table></figure>
<p>创建项目文件夹，克隆自己的项目到服务器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkdir /var/www</span><br><span class="line"><span class="built_in">cd</span> /var/www</span><br><span class="line">git <span class="built_in">clone</span> http://** <span class="comment"># 这里输入自己的项目地址</span></span><br></pre></td></tr></table></figure>
<h2 id="二、安装postsql">二、安装postsql</h2>
<p>安装postsql9.5版本，如果是安装最新版本，则不需要写版本号。安装成功后，会自动添加一个名为postgres的系统用户，密码随机。并自动生成一个名为postgres的数据库</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install postgresql-9.5</span><br><span class="line">sudo apt-get install python-psycopg2</span><br><span class="line">sudo apt-get install libpq-dev</span><br></pre></td></tr></table></figure>
<p>打开客户端工具（psql）修改postgres数据库用户的密码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo -u postgres psql <span class="comment"># 使用postgres用户登录数据库</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 以下内容内容都是在 postgres=# 下输入</span></span><br><span class="line">ALTER USER postgres WITH PASSWORD <span class="string">&#x27;postgres&#x27;</span>; <span class="comment"># 密码设置为123455，有分号才会执行命令</span></span><br><span class="line">\q <span class="comment">#退出客户端</span></span><br></pre></td></tr></table></figure>
<p>修改ubuntu操作系统的postgres用户的密码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su root <span class="comment"># 切换到root用户</span></span><br><span class="line">sudo passwd -d postgres <span class="comment">#清空用户postgres的密码</span></span><br><span class="line">sudo -u postgres passwd <span class="comment">#设置密码 接下来按要求输入两次密码，要与上面的密码相同</span></span><br></pre></td></tr></table></figure>
<p>修改PostgresSQL数据库配置实现远程访问</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开配置文件，修改以下内容</span></span><br><span class="line">vim /etc/postgresql/9.5/main/postgresql.conf</span><br><span class="line"><span class="comment"># 监听任何地址访问，修改连接权限</span></span><br><span class="line"><span class="comment">#listen_addresses = &#x27;localhost&#x27; 改为 listen_addresses = &#x27;*&#x27;</span></span><br><span class="line"><span class="comment"># 启用密码验证</span></span><br><span class="line"><span class="comment">#password_encryption = on 改为 password_encryption = on</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开配置文件，增加以下内容，配置可访问的用户ip段</span></span><br><span class="line">vim /etc/postgresql/9.5/main/pg_hba.conf</span><br><span class="line"><span class="comment"># 在文档末尾加上以下内容</span></span><br><span class="line">host all all 0.0.0.0 0.0.0.0 md5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启PostgreSQL数据库</span></span><br><span class="line">/etc/init.d/postgresql restart</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置5432端口的防火墙设置</span></span><br><span class="line">iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 5432 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h2 id="三、安装配置nginx">三、安装配置nginx</h2>
<p>为什么有了uWSGI为什么还需要nginx？因为nginx具备优秀的静态内容处理能力，然后将动态内容转发给uWSGI服务器，这样可以达到很好的客户端响应。</p>
<p>安装nginx</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure>
<p>mynginx.conf是需要自己创建的一个nginx配置文件，此文件放在项目文件夹中，配置内容如下</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">9000</span>;</span><br><span class="line">    <span class="attribute">server_name</span> <span class="number">203.176.71.157</span> localhost;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span> /var/www/iclinicAI/logs/access.log;</span><br><span class="line">    <span class="attribute">error_log</span> /var/www/iclinicAI/logs/error.log;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">include</span> uwsgi_params;</span><br><span class="line">        <span class="comment"># 端口号自行设定</span></span><br><span class="line">        <span class="attribute">uwsgi_pass</span> <span class="number">127.0.0.1:8004</span>;</span><br><span class="line">        <span class="attribute">uwsgi_param</span> UWSGI_CHDIR /var/www/iclinicAI;</span><br><span class="line">        <span class="attribute">uwsgi_param</span> UWSGI_SCRIPT manage:app; </span><br><span class="line">        <span class="attribute">uwsgi_read_timeout</span> <span class="number">300</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>刚建立的配置文件使用符号链接到Nginx配置文件文件夹中</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo ln -s /var/www/iclinicAI/mynginx.conf /etc/nginx/conf.d/</span><br><span class="line">sudo /etc/init.d/nginx restart <span class="comment"># 重启nginx</span></span><br></pre></td></tr></table></figure>
<h2 id="四、配置uwsgi">四、配置uwsgi</h2>
<p>ubuntu安装uwsgi</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install uwsgi</span><br></pre></td></tr></table></figure>
<p>或者直接用pip安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install uwsgi</span><br></pre></td></tr></table></figure>
<p>建立uwsgi配置文件，此文件放在项目文件夹中，配置内容如下</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[uwsgi]</span></span><br><span class="line"><span class="comment">#http=127.0.0.1:8001</span></span><br><span class="line"><span class="comment"># uwsgi 启动时所使用的地址与端口</span></span><br><span class="line"></span><br><span class="line"><span class="attr">socket</span> = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8004</span> <span class="comment"># 端口和nginx配置中的一致，可以使用其他端口</span></span><br><span class="line"><span class="comment"># 指向网站目录</span></span><br><span class="line"><span class="attr">chdir</span> = /var/www/iclinicAI</span><br><span class="line"><span class="attr">module</span> = manage</span><br><span class="line"></span><br><span class="line"><span class="comment"># python 启动程序文件</span></span><br><span class="line"><span class="attr">wsgi-file</span> = manage.py </span><br><span class="line"></span><br><span class="line"><span class="comment"># python 程序内用以启动的 application 变量名</span></span><br><span class="line"><span class="attr">callable</span> = app </span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理器数</span></span><br><span class="line"><span class="attr">processes</span> = <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 线程数</span></span><br><span class="line"><span class="attr">threads</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#状态检测地址</span></span><br><span class="line"><span class="attr">stats</span> = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">9191</span>   <span class="comment"># 使用flask项目默认的端口，可以换但必须是flask运行时使用的端口</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加它，使uwsgi后台运行</span></span><br><span class="line"><span class="attr">daemonize</span> =/var/www/iclinicAI/logs/uwsgi.log</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">uwsgi --ini uwsgi.ini 启动</span><br><span class="line"><span class="comment"># 使用 killall -9 uwsgi 关闭</span></span><br></pre></td></tr></table></figure>
<h2 id="五、使用supervisor守护进程">五、使用supervisor守护进程</h2>
<p>首先安装supervisor</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install supervisor</span><br></pre></td></tr></table></figure>
<p>生成默认配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">echo_supervisord_config &gt; /root/supervisord.conf</span><br></pre></td></tr></table></figure>
<p>加入监控程序的配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[program:project_name]          # project_name这里写上你的项目名称，如我的为[project:chihu]</span><br><span class="line">command = uwsgi --ini /var/www/iclinicAI/uwsgi.ini  # 跟手动启动的命令一样</span><br><span class="line">stopsignal=QUIT</span><br><span class="line">autostart=true</span><br><span class="line">autorestart=true</span><br><span class="line">stdout_logfile=/var/www/iclinicAI/logs/supervisor_chihu.log      # 运行日志</span><br><span class="line">stderr_logfile=/var/www/iclinicAI/logs/supervisor_chihu_err.log  # 错误日志</span><br></pre></td></tr></table></figure>
<p>启动supervisord</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">supervisorctl -c /root/supervisord.conf</span><br><span class="line">supervisorctl -c /root/supervisord.conf status <span class="comment"># 查看状态</span></span><br><span class="line"><span class="comment">#update!!!(如果supervisord.conf里项目有修改敲个命令update一下)</span></span><br></pre></td></tr></table></figure>
<p>检查uwsgi进程是否正常运行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ps aux|grep uwsgi</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>ubuntu</tag>
        <tag>flask</tag>
        <tag>uwsgi</tag>
      </tags>
  </entry>
  <entry>
    <title>如何在Ubuntu18环境下安装MySql</title>
    <url>/2020/02/16/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85MySql/</url>
    <content><![CDATA[<p>查看有没有安装MySQL</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dpkg -l | grep mysql</span><br></pre></td></tr></table></figure>
<p>安装MySQL，注意安装前先更新一下软件源以获得最新版本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get update  #更新软件源</span><br><span class="line">sudo apt-get install mysql-server  #安装mysql</span><br></pre></td></tr></table></figure>
<p>上述命令会安装以下包：<br>
apparmor<br>
mysql-client-5.7<br>
mysql-common<br>
mysql-server<br>
mysql-server-5.7<br>
mysql-server-core-5.7<br>
因此无需再安装mysql-client等。安装过程会提示设置mysql root用户的密码，设置完成后等待自动安装即可。默认安装完成就启动了mysql</p>
<span id="more"></span>
<p>安装MySQL依赖库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install libmysqlclient-dev</span><br></pre></td></tr></table></figure>
<p>启动和关闭mysql服务器：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service mysql start</span><br><span class="line">service mysql stop</span><br></pre></td></tr></table></figure>
<p>确认是否启动成功，mysql节点处于LISTEN状态表示启动成功：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">netstat -tap | grep mysql</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">进入mysql shell界面：</span><br></pre></td></tr></table></figure>
<p>mysql -u root -p</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-u 表示选择登陆的用户名， -p 表示登陆的用户密码。  </span><br><span class="line">然后通过 show databases; 就可以查看当前的所有数据库。  </span><br><span class="line"></span><br><span class="line">初始化数据库：</span><br></pre></td></tr></table></figure>
<p>mysql_secure_installation</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">``` sh</span><br><span class="line">secure enough. Would you like to setup VALIDATE PASSWORD plugin?    # 要安装验证密码插件吗?</span><br><span class="line">Press y|Y for Yes, any other key for No: N    # 这里我选择N</span><br><span class="line">New password:   # 输入要为root管理员设置的数据库密码</span><br><span class="line">Re-enter new password:   # 再次输入密码</span><br><span class="line">Remove anonymous users? (Press y|Y for Yes, any other key for No) : y     # 删除匿名账户</span><br><span class="line">Disallow root login remotely? (Press y|Y for Yes, any other key for No) : N    # 禁止root管理员从远程登录，这里我没有禁止</span><br><span class="line">Remove test database and access to it? (Press y|Y for Yes, any other key for No) : y   # 删除test数据库并取消对它的访问权限</span><br><span class="line">Reload privilege tables now? (Press y|Y for Yes, any other key for No) : y   # 刷新授权表，让初始化后的设定立即生效</span><br></pre></td></tr></table></figure>
<p>检查mysql服务状态：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl status mysql</span><br></pre></td></tr></table></figure>
<p>现在配置mysql允许远程访问，首先编辑 /etc/mysql/mysql.conf.d/mysqld.cnf 配置文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure>
<p>注释掉bind-address          = 127.0.0.1<br>
保存退出，然后进入mysql数据库，执行授权命令：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; grant all on *.* to root@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;你的密码&#x27;</span> with grant option;</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;    <span class="comment"># 刷新权限</span></span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p>然后执行exit命令退出mysql服务，再执行如下命令重启mysql：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl restart mysql</span><br></pre></td></tr></table></figure>
<p>附加说明：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo /etc/init.d/mysql start 这是启动mysql</span><br><span class="line">sudo /etc/init.d/mysql restart  这是重启</span><br><span class="line">sudo /etc/init.d/mysql stop 这是停止</span><br></pre></td></tr></table></figure>
<p>一些问题：<br>
<a href="https://blog.csdn.net/guoguicheng1314/article/details/80526111">https://blog.csdn.net/guoguicheng1314/article/details/80526111</a>
<a href="https://blog.csdn.net/vin_1991216/article/details/82632710">https://blog.csdn.net/vin_1991216/article/details/82632710</a></p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>mySql</tag>
      </tags>
  </entry>
  <entry>
    <title>如何安装OracleLinux系统并搭建数据库</title>
    <url>/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[<p>Oracle Linux以对Oracle软件和硬件支持较好见长,安装Oracle数据库首选系统，最重要的是Oracle数据库跑在上Oracle Linux性能可以提升超过75%<br>
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/20200522165409.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/20200522165409.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<span id="more"></span>
<h2 id="一、安装操作系统">一、安装操作系统</h2>
<p>选择第一个安装系统
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1921_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1921_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1921_1.png"></p>
<p>光驱检测选择第二个跳过
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1923_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1923_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1923_1.png"></p>
<p>语言选英文，中文会乱码
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1925_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1925_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1925_1.png"></p>
<p>选择第一个基本存储设备
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1927_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1927_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1927_1.png"></p>
<p>选择第一个“是，忽略数据”
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1929_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1929_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1929_1.png"></p>
<p>设置Hostname和网络配置
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1939_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1939_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1939_1.png"></p>
<p>选择时区
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1933_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1933_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1933_1.png"></p>
<p>设置root密码
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1935_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1935_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1935_1.png"></p>
<p>选择最后一个，创建自定义布局
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1937_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1937_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1937_1.png"></p>
<p>创建分区swap，大小是内存的两倍
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1941_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1941_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1941_1.png"></p>
<p>创建分区boot
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1943_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1943_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1943_1.png"></p>
<p>把剩余空间放到最后一个分区
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1945_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1945_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1945_1.png"></p>
<p>选择第二个格式化
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1947_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1947_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1947_1.png"></p>
<p>选择第二个，将修改写入磁盘
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1949_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1949_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1949_1.png"></p>
<p>选择桌面Desktop
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1951_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1951_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1951_1.png"></p>
<p>安装成功重启
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1953_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1953_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1953_1.png"></p>
<p>重启后进入欢迎页，注意在这里要选择No
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1955_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1955_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1955_1.png"></p>
<p>用户可以不创建，看个人情况
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/F3GG.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/F3GG.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="F3GG.png"></p>
<p>内存大可以开启kdump,我没有开启
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/3KDJAM.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/3KDJAM.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="3KDJAM.png"></p>
<h2 id="二、配置oracle安装环境">二、配置oracle安装环境</h2>
<h3 id="2-1配置系统环境">2.1配置系统环境</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi /etc/sysconfig/network  <span class="comment"># 配置主机名</span></span></span><br><span class="line">NETWORKING=yes</span><br><span class="line">HOSTNAME=oracle11g</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi /etc/hosts  <span class="comment">#配置host,ip对应主机名</span></span></span><br><span class="line">10.5.5.132 oracle11g</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service iptables stop  <span class="comment"># 关闭防火墙</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chkconfig iptables off</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi /etc/selinux/config  <span class="comment"># 关闭selinux</span></span></span><br><span class="line">SELINUX=disabled</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p /soft/yum  <span class="comment"># 创建软件目录</span></span></span><br></pre></td></tr></table></figure>
<h3 id="2-2配置yum源">2.2配置yum源</h3>
<p>先拷贝镜像到/soft/目录，然后执行下面的命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mount -o loop -t iso9660 /soft/oraclelinux6.8.iso /soft/yum  <span class="comment"># 挂载镜像</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /etc/yum.repos.d/  <span class="comment"># 进入yum源目录</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mv public-yum-ol6.repo public-yum-ol6.repo.bak  <span class="comment"># 备份源软件源</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi /etc/yum.repos.d/local.repo</span></span><br><span class="line">[HighAvailability]</span><br><span class="line">name=HighAvailability</span><br><span class="line">baseurl=file:///soft/yum/HighAvailability</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[LoadBalancer]</span><br><span class="line">name=LoadBalancer</span><br><span class="line">baseurl=file:///soft/yum/LoadBalancer</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[ResilientStorage]</span><br><span class="line">name=ResilientStorage</span><br><span class="line">baseurl=file:///soft/yum/ResilientStorage</span><br><span class="line">enabled=1 </span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[Server]</span><br><span class="line">name=Server</span><br><span class="line">baseurl=file:///soft/yum/Server</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重新加载yum</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum clean all</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum makecache</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum list</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install -y oracle-rdbms-server-11gR2-preinstall  <span class="comment"># 安装依赖包</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建目录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p /u01/app/oracle</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chown -R oracle:oinstall /u01/app/oracle</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod -R 775 /u01/app/oracle</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p /u01/app/oraInventory</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chown -R oracle:oinstall /u01/app/oraInventory</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod -R 775 /u01/app/oraInventory</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3配置oracle用户环境变量">2.3配置oracle用户环境变量</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> su - oracle  <span class="comment"># 切换到oracle用户</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi .bash_profile <span class="comment"># 配置环境变量</span></span></span><br><span class="line">TMP=/tmp; export TMP</span><br><span class="line">TMPDIR=$TMP; export TMPDIR</span><br><span class="line">ORACLE_BASE=/u01/app/oracle; export ORACLE_BASE</span><br><span class="line">ORACLE_HOME=$ORACLE_BASE/product/11.2.0/db_1; export ORACLE_HOME</span><br><span class="line">ORACLE_SID=orcl; export ORACLE_SID</span><br><span class="line">ORACLE_TERM=xterm; export ORACLE_TERM</span><br><span class="line">PATH=/usr/sbin:$PATH; export PATH</span><br><span class="line">PATH=$ORACLE_HOME/bin:$PATH; export PATH</span><br><span class="line">LD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/lib;  export LD_LIBRARY_PATH</span><br><span class="line">CLASSPATH=$ORACLE_HOME/JRE:$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib; export CLASSPATH</span><br><span class="line">if [ $USER = &quot;oracle&quot; ]; then</span><br><span class="line">   if [ $SHELL = &quot;/bin/ksh&quot; ]; then</span><br><span class="line">       ulimit -p 16384</span><br><span class="line">       ulimit -n 65536</span><br><span class="line">    else</span><br><span class="line">       ulimit -u 16384 -n 65536</span><br><span class="line">   fi</span><br><span class="line">fi</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> .bash_profile  <span class="comment"># 让环境变量立即生效</span></span></span><br></pre></td></tr></table></figure>
<h3 id="2-4进入安装oracle">2.4进入安装oracle</h3>
<p>安装前先重启系统，然后用oracle用户登录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> reboot <span class="comment">#重启</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /soft/  <span class="comment"># 进入刚才上传的文件目录</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> unzip p13390677_112040_Linux-x86-64_1of7.zip  <span class="comment">#解压缩</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> unzip p13390677_112040_Linux-x86-64_2of7.zip</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /soft/database</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./runInstaller  <span class="comment"># 开始安装</span></span></span><br></pre></td></tr></table></figure>
<h2 id="三、安装oracle">三、安装oracle</h2>
<p>取消勾选
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1957_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1957_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1957_1.png"></p>
<p>选择跳过
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1959_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1959_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1959_1.png"></p>
<p>选择只安装软件
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/GW80.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/GW80.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="GW80.png"></p>
<p>选择创建单实例的数据库安装
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/JZ93U.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/JZ93U.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="JZ93U.png"></p>
<p>安装语言使用默认英文
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/VOMUK0.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/VOMUK0.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="VOMUK0.png"></p>
<p>选择安装企业版
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/NWBN.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/NWBN.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="NWBN.png"></p>
<p>Oracle安装路径自动识别到了配置的变量，下一步
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/NUQ.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/NUQ.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="NUQ.png"></p>
<p>安装文件的路径文件目录，自动识别。下一步
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/QXUN.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/QXUN.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="QXUN.png"></p>
<p>选择组的所属，下一步
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/FUP6557R.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/FUP6557R.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="FUP6557R.png"></p>
<p>点击安装
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/LH8B.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/LH8B.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="LH8B.png"></p>
<p>等待安装完成
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/7LYTP.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/7LYTP.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="7LYTP.png"></p>
<p>提示需要root用户执行以下的脚本
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/6IDDQR.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/6IDDQR.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="6IDDQR.png"></p>
<p>打开命令窗口执行脚本</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">su               <span class="comment">#切换到root用户</span></span><br><span class="line">/u01/app/oraInventory/orainstRoot.sh   <span class="comment">#执行第一个脚本</span></span><br><span class="line">/u01/app/oracle/product/11.2.0/db_1/root.sh   <span class="comment">#执行第二个脚本</span></span><br></pre></td></tr></table></figure>
<p>执行完去安装窗口点确认</p>
<p>安装完成，点击关闭
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/CWVU3.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/CWVU3.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="CWVU3.png"></p>
<h2 id="四、配置和使用">四、配置和使用</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dbca  <span class="comment"># 配置数据库</span></span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1973_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1973_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1973_1.png"></p>
<p>选择创建数据库
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1979_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1979_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1979_1.png"></p>
<p>这里选第一个和第二个都可以，第一个是一般事务数据，第二个是定制数据库。我这里选定制数据库
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1977_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1977_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1977_1.png"></p>
<p>填写数据库实例名称
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1984_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1984_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1984_1.png"></p>
<p>取消勾选然后下一步
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1981_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1981_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1981_1.png"></p>
<p>选择统一的密码，然后自己设置密码
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1983_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1983_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1983_1.png"></p>
<p>默认需要8位密码，不满8位也可以强制设置
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/6OX41.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/6OX41.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="6OX41.png"></p>
<p>选择数据库文件类型和位置，我这里默认
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1986_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1986_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1986_1.png"></p>
<p>指定数据库快速恢复区，我不需要，取消勾选
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1985_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1985_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1985_1.png"></p>
<p>数据库组件，取消勾选
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1982_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1982_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1982_1.png"></p>
<p>根据需要配置内存，我的配置如图，取消勾选自动记录
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1978_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1978_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1978_1.png"></p>
<p>根据需要设置最大的连接进程数
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/SDFD.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/SDFD.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="SDFD.png"></p>
<p>配置字符集，因为自己的数据库里用了中文，所以我配置了简体中文，下一步
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1974_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1974_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1974_1.png"></p>
<p>设置日志组大小等，下一步
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1975_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1975_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1975_1.png"></p>
<p>创建数据库，完成
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1980_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1980_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1980_1.png"></p>
<p>确定
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1976_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1976_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1976_1.png"></p>
<p>开始安装数据库
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1999_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1999_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1999_1.png"></p>
<p>点击退出，安装完成
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1988_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1988_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1988_1.png"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> netca  <span class="comment"># 配置监听及本地网络服务</span></span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1998_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1998_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1998_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1990_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1990_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1990_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1987_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1987_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1987_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1993_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1993_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1993_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1994_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1994_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1994_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/2000_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/2000_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="2000_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/2001_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/2001_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="2001_1.png">
监听设置存储在\data\oracle\product\10.2.0\db_1\NETWORK\ADMIN\listener.ora</p>
<p>接下来配置远程服务：
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1997_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1997_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1997_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1989_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1989_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1989_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1995_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1995_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1995_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1996_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1996_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1996_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1992_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1992_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1992_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1991_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/1991_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1991_1.png"></p>
<p>注意：若测试不成功有可能是用户登录出错，点击 change login，用户名输入：system，密码输入前面创建数据库时设置的密码
<img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/2004_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/2004_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="2004_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/2002_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/2002_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="2002_1.png"></p>
<p><img src="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/2003_1.png" class="lazyload" data-srcset="/2019/12/26/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85OracleLinux%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/2003_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="2003_1.png"></p>
<h2 id="五、启动数据库">五、启动数据库</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ln -s /u01/app/oracle/product/11.2.0/db_1/bin/sqlplus /usr/bin  <span class="comment"># 把sqlplus in到/usr/bin目录，方便使用</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到oracle /bin 目录，</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> <span class="variable">$ORACLE_HOME</span>/bin</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动监听</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> lsnrctl start</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看监听状态</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> lsnrctl status</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> lsnrctl stop命令可以关闭监听</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动数据库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sqlplus /nolog</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> connect /as sysdba</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> startup</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> shutdown immediate 命令来关闭数据</span></span><br></pre></td></tr></table></figure>
<p>如果要关闭数据库可以用oracle的shutdown命令用来关闭当前实例，有4个可选参数：normal、transactional、immediate和abort。不带参数时默认是normal。<br>
这几个参数的差异体现在以下几个维度：<br>
是否允许新的连接；<br>
当前已连接的回话是否自动断开；<br>
当前未提交的事务是等待用户提交完成还是自动回滚；<br>
关闭时是否需要做检查点；<br>
启动时是否需要进行实例恢复。</p>
<p>shutdown normal：不允许新的连接、等待会话结束、等待事务结束、做一个检查点并关闭数据文件。启动时不需要实例恢复。<br>
shutdown transactional：不允许新的连接、不等待会话结束、等待事务结束、做一个检查点并关闭数据文件。启动时不需要实例恢复。<br>
shutdown immediate：不允许新的连接、不等待会话结束、不等待事务结束、做一个检查点并关闭数据文件。没有结束的事务是自动rollback的。启动时不需要实例恢复。<br>
shutdown abort：不允许新的连接、不等待会话结束、不等待事务结束、不做检查点且没有关闭数据文件。启动时自动进行实例恢复。</p>
<h2 id="六、创建表空间和用户">六、创建表空间和用户</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sqlplus / as sysdba</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查询临时表空间文件的绝对路径。如果需要的话，可以通过查询来写定绝对路径。一般用<span class="variable">$&#123;ORACLE_HOME&#125;</span>就可以了</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select name from v<span class="variable">$tempfile</span>;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建临时表空间‘OACESHI_TEMP’</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> create temporary tablespace OACESHI_TEMP tempfile</span></span><br><span class="line">&#x27;$&#123;ORACLE_HOME&#125;/oradata/OACESHI_TEMP.bdf&#x27; size 100m reuse autoextend on next 20m</span><br><span class="line">maxsize unlimited;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查询用户表空间文件的绝对路径</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select name from v<span class="variable">$datafile</span>;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建表空间‘OACESHIDB’</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> create tablespace OACESHIDB datafile <span class="string">&#x27;$&#123;ORACLE_HOME&#125;/oradata/OACESHIDB.bdf&#x27;</span> size 100M</span></span><br><span class="line">reuse autoextend on next 40M maxsize unlimited default storage(initial 128k next 128k</span><br><span class="line">minextents 2 maxextents unlimited);</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建用户‘OACESHI’和密码‘OACESHI’，指定上边创建的临时表空间和表空间</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> create user OACESHI identified by OACESHI default tablespace OACESHIDB temporary tablespace OACESHI_TEMP;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 赋予权限</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> grant connect,resource to OACESHI;</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> grant create any view to OACESHI;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者快速创建dba用户</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> create user TEST identified by TEST;</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> grant dba to TEST;</span></span><br></pre></td></tr></table></figure>
<h2 id="七、问题解决">七、问题解决</h2>
<p>注意：<br>
操作监听和数据库都需要切换到oracle用户下<br>
操作数据库还需要通过sqlplus，以管理员身份登录到oracle</p>
<p>plsql连接时无监听程序
<a href="https://www.linuxidc.com/Linux/2017-10/147393.htm">https://www.linuxidc.com/Linux/2017-10/147393.htm</a></p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>如何用Ubuntu18安装Matlab2018b</title>
    <url>/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/</url>
    <content><![CDATA[<p>MathWorks公司每年会发布两个版本的MATLAB，一般在3月份发布A版，9月份左右发布B版。两个版本功能并无差异，但相对来说，B版更为稳定，因此个人推荐安装B版。目前最新的版本是MATLAB 2018b，下面给出详细的中文版下载与安装教程。
<img src="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200522161249.png" class="lazyload" data-srcset="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200522161249.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<span id="more"></span>
<h2 id="下载Matlab2018b">下载Matlab2018b</h2>
<p><a href="https://blog.csdn.net/weixin_41038644/article/details/84668127">https://blog.csdn.net/weixin_41038644/article/details/84668127</a></p>
<h2 id="开始安装">开始安装</h2>
<p>创建文件夹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir Matlab</span><br></pre></td></tr></table></figure>
<p>挂载第一个镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mount -o loop R2018b_glnxa64_dvd1.iso ./Matlab</span><br></pre></td></tr></table></figure>
<p>运行目录下的<code>install</code>开始安装</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ~  # 先跳出目录</span><br><span class="line">sudo /root/Downloads/Matlab/install</span><br></pre></td></tr></table></figure>
<p>选择文件安装密钥
<img src="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200108172620.jpg" class="lazyload" data-srcset="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200108172620.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="20200108172620.jpg"></p>
<p>填写密钥<code>09806-07443-53955-64350-21751-41297</code>
<img src="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200108172951.jpg" class="lazyload" data-srcset="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200108172951.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="20200108172951.jpg"></p>
<p>选择目录后，点击下一步开始安装。安装到一半会弹框提示需要dvd2才能继续
<img src="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200108173903.png" class="lazyload" data-srcset="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200108173903.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="20200108173903.png"></p>
<p>弹出dvd1</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo umount Matlab</span><br></pre></td></tr></table></figure>
<p>挂载dvd2</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mount -o loop R2018b_glnxa64_dvd2.iso ./Matlab</span><br></pre></td></tr></table></figure>
<p>安装成功后弹出dvd2</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo umount Matlab</span><br></pre></td></tr></table></figure>
<h2 id="破解Matlab">破解Matlab</h2>
<p>解压破解文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">unzip MATLAB_R2018b_Linux64_Crack.zip</span><br></pre></td></tr></table></figure>
<p>运行matlab</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo /usr/local/MATLAB/R2018b/bin/matlab</span><br></pre></td></tr></table></figure>
<p>选择离线激活
<img src="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200108175345.jpg" class="lazyload" data-srcset="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200108175345.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="20200108175345.jpg"></p>
<p>选择刚才解压的<code>license_standalone.lic</code>文件
<img src="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200108175623.jpg" class="lazyload" data-srcset="/2020/01/08/%E5%A6%82%E4%BD%95%E7%94%A8Ubuntu18%E5%AE%89%E8%A3%85Matlab2018b/20200108175623.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="20200108175623.jpg"></p>
<p>激活成功后,再把破解包里的文件替换到matlab完成破解</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp libmwlmgrimpl.so /usr/local/MATLAB/R2018b/bin/glnxa64/matlab_startup_plugins/lmgrimpl/</span><br></pre></td></tr></table></figure>
<h2 id="添加一个快捷方式">添加一个快捷方式</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /usr/share/applications/Matlab2018b.desktop</span><br></pre></td></tr></table></figure>
<p>按<code>i</code>进入编辑后输入下面内容，然后按<code>ESC</code>输入<code>:wq</code>保存退出</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env xdg-open</span></span><br><span class="line">[Desktop Entry]</span><br><span class="line"><span class="type">Type</span>=Application</span><br><span class="line">Icon=/usr/local/MATLAB/R2018b/toolbox/shared/dastudio/resources/MatlabIcon.png</span><br><span class="line">Name=MATLAB R2018b</span><br><span class="line">Comment=Start MATLAB - The Language of Technical Computing</span><br><span class="line">Exec=/usr/local/MATLAB/R2018b/<span class="built_in">bin</span>/matlab</span><br><span class="line">Categories=Development;Math;Science</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
        <category>Matlab</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>matlab</tag>
      </tags>
  </entry>
  <entry>
    <title>如何解决文件系统类型为RAW</title>
    <url>/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/</url>
    <content><![CDATA[<p>如果您的计算机报告存储设备的文件系统类型是原始文件，那么您知道如何修复它吗？本文是关于在文件系统类型为原始文件时如何修复设备的信息。该解决方案适用于SD存储卡，USB闪存驱动器，外部硬盘驱动器，内部硬盘等。</p>
<h2 id="文件系统的类型为Raw-CHKDSK">文件系统的类型为Raw CHKDSK</h2>
<p>当文件系统类型为原始文件时，您的设备将无法访问，并且无法被您的计算机系统识别。CHKDSK会告诉您“文件系统的类型为原始文件。CHKDSK不适用于原始驱动器。”</p>
<p><img src="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/chkdsk-is-not-available-for-raw-drives.png" class="lazyload" data-srcset="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/chkdsk-is-not-available-for-raw-drives.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Chkdsk文件系统的类型是原始的"></p>
<h2 id="修复文件系统为原始文件">修复文件系统为原始文件</h2>
<p>当您的设备转向原始驱动器时，它将变得不可访问，因此您需要将其转换为FAT32或NTFS。FAT 32和NTFS是Windows用户使用的普通文件系统。您可以将设备格式化为FAT 32或NTFS文件系统，以修复原始驱动器。</p>
<p>CMD命令行可以在您的系统上执行格式和转换，您可以按照说明修复原始文件系统错误。</p>
<p>注意：在此过程中，您需要非常小心，即使是很小的错误也会造成大问题，并使情况变得更糟，因此，当您使用CMD将文件系统转换为FAT32或NTFS时，请注意这一点。</p>
<p>步骤1：执行CMD。</p>
<p><img src="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/cmd1.jpg" class="lazyload" data-srcset="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/cmd1.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="使用CMD修复原始文件系统"></p>
<p>步骤2：输入“ format F：/ fs：fat32”（F是RAW SD存储卡的驱动器号）</p>
<p><img src="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/diskpart-cmd-format-raw-fat32.jpg" class="lazyload" data-srcset="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/diskpart-cmd-format-raw-fat32.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="使用CMD修复原始文件系统"></p>
<p>如果不起作用，请尝试以下步骤</p>
<p><img src="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/diskpart-clean-format.jpg" class="lazyload" data-srcset="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/diskpart-clean-format.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="使用CMD修复原始文件系统"></p>
<p>这些步骤之后，您可以将设备文件系统转换为FAT32，但是此操作将格式化磁盘，这意味着您的数据将全部删除。</p>
<h2 id="原始文件系统恢复而不会丢失数据">原始文件系统恢复而不会丢失数据</h2>
<p>如果您的设备上有重要数据，则需要首先恢复数据，但是如何恢复呢？如果您没有在其他地方进行备份，则可以尝试使用数据恢复工具进行备份。</p>
<p><a href="https://www.icare-recovery.com/">iCare Data Recovery Pro</a>是有用的数据恢复程序，既安全又有效。它对我有很多帮助。它可以从多种设备中恢复数据，包括USB闪存驱动器，SD存储卡，外部硬盘驱动器，PC，智能手机。</p>
<p>如果您的计算机使用Windows系统，则无需担心系统兼容性问题，iCare Data Recovery支持所有Windows系统。当文件系统的类型为原始Windows 10/7/8 / vista时，您可以下载免费版本以修复错误。</p>
<p><a href="https://www.icare-recovery.com/click.php?product=download-icarepro">免费下载iCare</a></p>
<h2 id="原始文件系统数据恢复说明">原始文件系统数据恢复说明</h2>
<p>步骤1：在计算机上安装程序。运行该程序，然后选择“深度扫描恢复”模式。</p>
<p><img src="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/step1.png" class="lazyload" data-srcset="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/step1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="恢复原始文件系统而不会丢失数据"></p>
<p>步骤2：选择要扫描的设备。</p>
<p><img src="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/step2.png" class="lazyload" data-srcset="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/step2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="恢复原始文件系统而不会丢失数据"></p>
<p>步骤3：预览找到的数据。</p>
<p><img src="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/step3.png" class="lazyload" data-srcset="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/step3.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="恢复原始文件系统而不会丢失数据"></p>
<p>步骤4：选择所需的数据并保存到另一个位置。不要将数据保存到原始驱动器。</p>
<h2 id="Windows无法完成格式化？">Windows无法完成格式化？</h2>
<p>有时，当您要格式化原始驱动器时，会遇到麻烦，无法完成格式化，Windows可能会报告“ Windows无法完成格式化”。正如我所讨论的如何将原始驱动器格式化为FAT32一样，您可以按照上面的说明进行尝试。您也可以尝试使用专业的格式工具来为您提供帮助。</p>
<p><img src="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/cannot-format.jpg" class="lazyload" data-srcset="/2021/06/01/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E4%B8%BARAW/cannot-format.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Windows无法完成格式化"></p>
<p>您可以下载安全的格式化程序来完成格式化，这是一个很好的格式化程序：<a href="https://www.icare-recovery.com/howto/free-usb-format-tool.html">https</a> : <a href="https://www.icare-recovery.com/howto/free-usb-format-tool.html">//www.icare-recovery.com/howto/free-usb-format-tool.html</a></p>
<h2 id="提示">提示</h2>
<p>恢复数据并修复原始驱动器后，最好再购买一个新的USB闪存驱动器或硬盘驱动器，因为它可能再次损坏。</p>
<h3 id="文件系统的类型在硬盘驱动器-外部驱动器上是原始的">文件系统的类型在硬盘驱动器/外部驱动器上是原始的</h3>
<p>如果您的计算机在将 U 盘、SD 存储卡、外置硬盘驱动器或其他外置驱动器插入计算机时报告需要格式化您的磁盘驱动器，则您的存储设备可能会出现原始文件系统错误。</p>
<h3 id="当系统在-Windows-10-7-上说文件系统的类型为-Raw-时会发生什么">当系统在 Windows 10/7 上说文件系统的类型为 Raw 时会发生什么</h3>
<p>有很多原因会导致您的 U 盘/SD 存储卡/外置硬盘成为原始数据，如果您中断设备上的格式化，传输数据时弹出设备，感染病毒，在设备上运行不当操作，得到一个系统崩溃，或对设备做其他不好的事情，它可能会变得原始，有时，即使你什么也没做，你的设备也会以某种方式转向原始驱动器。</p>
]]></content>
      <categories>
        <category>其他</category>
      </categories>
      <tags>
        <tag>cmd</tag>
      </tags>
  </entry>
  <entry>
    <title>正则表达式速查表</title>
    <url>/2021/07/12/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%80%9F%E6%9F%A5%E8%A1%A8/</url>
    <content><![CDATA[<h2 id="表达式全集">表达式全集</h2>
<table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\</code></td>
<td>将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、或一个八进制转义符。例如，“n”匹配字符“n”。“\n”匹配一个换行符。串行“\”匹配“\”而“(”则匹配“(”。</td>
</tr>
<tr>
<td><code>^</code></td>
<td>匹配输入字符串的开始位置。如果设置了RegExp对象的Multiline属性，^也匹配“\n”或“\r”之后的位置。</td>
</tr>
<tr>
<td><code>$</code></td>
<td>匹配输入字符串的结束位置。如果设置了RegExp对象的Multiline属性，$也匹配“\n”或“\r”之前的位置。</td>
</tr>
<tr>
<td><code>*</code></td>
<td>匹配前面的子表达式零次或多次。例如，zo*能匹配“z”以及“zoo”。*等价于{0,}。</td>
</tr>
<tr>
<td><code>+</code></td>
<td>匹配前面的子表达式一次或多次。例如，“zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。+等价于{1,}。</td>
</tr>
<tr>
<td><code>?</code></td>
<td>匹配前面的子表达式零次或一次。例如，“do(es)?”可以匹配“does”或“does”中的“do”。?等价于{0,1}。</td>
</tr>
<tr>
<td><code>&#123;n&#125;</code></td>
<td>n是一个非负整数。匹配确定的n次。例如，“o{2}”不能匹配“Bob”中的“o”，但是能匹配“food”中的两个o。</td>
</tr>
<tr>
<td><code>&#123;n,&#125;</code></td>
<td>n是一个非负整数。至少匹配n次。例如，“o{2,}”不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有o。“o{1,}”等价于“o+”。“o{0,}”则等价于“o*”。</td>
</tr>
<tr>
<td><code>&#123;n,m&#125;</code></td>
<td>m和n均为非负整数，其中n&lt;=m。最少匹配n次且最多匹配m次。例如，“o{1,3}”将匹配“fooooood”中的前三个o。“o{0,1}”等价于“o?”。请注意在逗号和两个数之间不能有空格。</td>
</tr>
<tr>
<td><code>?</code></td>
<td>当该字符紧跟在任何一个其他限制符（*,+,?，{n}，{n,}，{n,m}）后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串“oooo”，“o+?”将匹配单个“o”，而“o+”将匹配所有“o”。</td>
</tr>
<tr>
<td><code>.</code></td>
<td>匹配除“\n”之外的任何单个字符。要匹配包括“\n”在内的任何字符，请使用像“(.|\n)”的模式。</td>
</tr>
<tr>
<td><code>(pattern)</code></td>
<td>匹配pattern并获取这一匹配。所获取的匹配可以从产生的Matches集合得到，在VBScript中使用SubMatches集合，在JScript中则使用$0…$9属性。要匹配圆括号字符，请使用“(”或“)”。</td>
</tr>
<tr>
<td><code>(?:pattern)</code></td>
<td>匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用或字符“(|)”来组合一个模式的各个部分是很有用。例如“industr(?:y|ies)”就是一个比“industry|industries”更简略的表达式。</td>
</tr>
<tr>
<td><code>(?=pattern)</code></td>
<td>正向肯定预查，在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，“Windows(?=95|98|NT|2000)”能匹配“Windows2000”中的“Windows”，但不能匹配“Windows3.1”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。</td>
</tr>
<tr>
<td><code>(?!pattern)</code></td>
<td>正向否定预查，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如“Windows(?!95|98|NT|2000)”能匹配“Windows3.1”中的“Windows”，但不能匹配“Windows2000”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始</td>
</tr>
<tr>
<td><code>(?&lt;=pattern)</code></td>
<td>反向肯定预查，与正向肯定预查类拟，只是方向相反。例如，“(?&lt;=95|98|NT|2000)Windows”能匹配“2000Windows”中的“Windows”，但不能匹配“3.1Windows”中的“Windows”。</td>
</tr>
<tr>
<td><code>(?&lt;!pattern)</code></td>
<td>反向否定预查，与正向否定预查类拟，只是方向相反。例如“(?&lt;!95|98|NT|2000)Windows”能匹配“3.1Windows”中的“Windows”，但不能匹配“2000Windows”中的“Windows”。</td>
</tr>
<tr>
<td><code>x\|y</code></td>
<td>匹配x或y。例如，“z|food”能匹配“z”或“food”。“(z|f)ood”则匹配“zood”或“food”。</td>
</tr>
<tr>
<td><code>[xyz]</code></td>
<td>字符集合。匹配所包含的任意一个字符。例如，“[abc]”可以匹配“plain”中的“a”。</td>
</tr>
<tr>
<td><code>[^xyz]</code></td>
<td>负值字符集合。匹配未包含的任意字符。例如，“[^abc]”可以匹配“plain”中的“p”。</td>
</tr>
<tr>
<td><code>[a-z]</code></td>
<td>字符范围。匹配指定范围内的任意字符。例如，“[a-z]”可以匹配“a”到“z”范围内的任意小写字母字符。</td>
</tr>
<tr>
<td><code>[^a-z]</code></td>
<td>负值字符范围。匹配任何不在指定范围内的任意字符。例如，“[^a-z]”可以匹配任何不在“a”到“z”范围内的任意字符。</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>匹配一个单词边界，也就是指单词和空格间的位置。例如，“er\b”可以匹配“never”中的“er”，但不能匹配“verb”中的“er”。</td>
</tr>
<tr>
<td><code>\B</code></td>
<td>匹配非单词边界。“er\B”能匹配“verb”中的“er”，但不能匹配“never”中的“er”。</td>
</tr>
<tr>
<td><code>\cx</code></td>
<td>匹配由x指明的控制字符。例如，\cM匹配一个Control-M或回车符。x的值必须为A-Z或a-z之一。否则，将c视为一个原义的“c”字符。</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>匹配一个数字字符。等价于[0-9]。</td>
</tr>
<tr>
<td><code>\D</code></td>
<td>匹配一个非数字字符。等价于[^0-9]。</td>
</tr>
<tr>
<td><code>\f</code></td>
<td>匹配一个换页符。等价于\x0c和\cL。</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>匹配一个换行符。等价于\x0a和\cJ。</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>匹配一个回车符。等价于\x0d和\cM。</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>匹配任何空白字符，包括空格、制表符、换页符等等。等价于[ \f\n\r\t\v]。</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>匹配任何非空白字符。等价于[^ \f\n\r\t\v]。</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>匹配一个制表符。等价于\x09和\cI。</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>匹配一个垂直制表符。等价于\x0b和\cK。</td>
</tr>
<tr>
<td><code>\w</code></td>
<td>匹配包括下划线的任何单词字符。等价于“[A-Za-z0-9_]”。</td>
</tr>
<tr>
<td><code>\W</code></td>
<td>匹配任何非单词字符。等价于“[^A-Za-z0-9_]”。</td>
</tr>
<tr>
<td><code>\xn</code></td>
<td>匹配n，其中n为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，“\x41”匹配“A”。“\x041”则等价于“\x04&amp;1”。正则表达式中可以使用ASCII编码。</td>
</tr>
<tr>
<td><code>\num</code></td>
<td>匹配num，其中num是一个正整数。对所获取的匹配的引用。例如，“(.)\1”匹配两个连续的相同字符。</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>标识一个八进制转义值或一个向后引用。如果\n之前至少n个获取的子表达式，则n为向后引用。否则，如果n为八进制数字（0-7），则n为一个八进制转义值。</td>
</tr>
<tr>
<td><code>\nm</code></td>
<td>标识一个八进制转义值或一个向后引用。如果\nm之前至少有nm个获得子表达式，则nm为向后引用。如果\nm之前至少有n个获取，则n为一个后跟文字m的向后引用。如果前面的条件都不满足，若n和m均为八进制数字（0-7），则\nm将匹配八进制转义值nm。</td>
</tr>
<tr>
<td><code>\nml</code></td>
<td>如果n为八进制数字（0-3），且m和l均为八进制数字（0-7），则匹配八进制转义值nml。</td>
</tr>
<tr>
<td><code>\un</code></td>
<td>匹配n，其中n是一个用四个十六进制数字表示的Unicode字符。例如，\u00A9匹配版权符号（©）。</td>
</tr>
</tbody>
</table>
<h2 id="常用正则表达式">常用正则表达式</h2>
<table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户名</td>
<td><code>/^[a-z0-9_-]&#123;3,16&#125;$/</code></td>
</tr>
<tr>
<td>密码</td>
<td><code>/^[a-z0-9_-]&#123;6,18&#125;$/</code></td>
</tr>
<tr>
<td>十六进制值</td>
<td><code>/^#?([a-f0-9]&#123;6&#125;\|[a-f0-9]&#123;3&#125;)$/</code></td>
</tr>
<tr>
<td>电子邮箱</td>
<td><code>/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]&#123;2,6&#125;)$/</code><br><code>/^[a-z\d]+(\.[a-z\d]+)*@([\da-z](-[\da-z])?)+(\.&#123;1,2&#125;[a-z]+)+$/</code></td>
</tr>
<tr>
<td>URL</td>
<td><code>/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]&#123;2,6&#125;)([\/\w \.-]*)*\/?$/</code></td>
</tr>
<tr>
<td>IP 地址</td>
<td><code>/((2[0-4]\d\|25[0-5]\|[01]?\d\d?)\.)&#123;3&#125;(2[0-4]\d\|25[0-5]\|[01]?\d\d?)/</code><br><code>/^(?:(?:25[0-5]\|2[0-4][0-9]\|[01]?[0-9][0-9]?)\.)&#123;3&#125;(?:25[0-5]\|2[0-4][0-9]\|[01]?[0-9][0-9]?)$/</code></td>
</tr>
<tr>
<td>HTML 标签</td>
<td><code>/^&lt;([a-z]+)([^&lt;]+)*(?:&gt;(.*)&lt;\/\1&gt;\|\s+\/&gt;)$/</code></td>
</tr>
<tr>
<td>删除代码\注释</td>
<td><code>(?&lt;!http:\|\S)//.*$</code></td>
</tr>
<tr>
<td>Unicode编码中的汉字范围</td>
<td><code>/^[\u2E80-\u9FFF]+$/</code></td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>程序开发</category>
      </categories>
      <tags>
        <tag>正则</tag>
      </tags>
  </entry>
  <entry>
    <title>科学上网一键搭建工具ProxySU</title>
    <url>/2021/05/19/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BA%E5%B7%A5%E5%85%B7ProxySU/</url>
    <content><![CDATA[<h2 id="介绍">介绍</h2>
<p>ProxySU是一款windows科学上网搭建软件，支持一键搭建V2ray，Trojan，NaiveProxy, Trojan-Go, ShadowsocksR(SSR),Shadowsocks-libev及相关插件一键安装工具。</p>
<h2 id="准备">准备</h2>
<ol>
<li>准备一台<a href="https://www.vultr.com/">vps服务器</a>，没有装过以上代理软件，如果已经安装过，最好将系统重装一下，会减少很多的麻烦。</li>
<li>准备好域名做dns解析</li>
</ol>
<h2 id="下载">下载</h2>
<p>Github地址：<a href="https://github.com/proxysu/windows/releases">https://github.com/proxysu/windows/releases</a>
目前最新版本是3.1.3,下载后双击ProxySU.exe打开
<img src="/2021/05/19/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BA%E5%B7%A5%E5%85%B7ProxySU/20201025012252.png" class="lazyload" data-srcset="/2021/05/19/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BA%E5%B7%A5%E5%85%B7ProxySU/20201025012252.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="使用">使用</h2>
<p>打开后填入相应的选项，点击一键安装即可。
<img src="/2021/05/19/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BA%E5%B7%A5%E5%85%B7ProxySU/20201025014326.png" class="lazyload" data-srcset="/2021/05/19/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BA%E5%B7%A5%E5%85%B7ProxySU/20201025014326.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
安装后会有弹出一个界面，上面有搭建好的代理配置参数，导入到相应的客户端即可使用。
<img src="/2021/05/19/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BA%E5%B7%A5%E5%85%B7ProxySU/20201025013935.png" class="lazyload" data-srcset="/2021/05/19/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BA%E5%B7%A5%E5%85%B7ProxySU/20201025013935.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
安装后如需更换其他类型的代理，到系统工具里面点卸载代理，等待卸载完成后再选择其他代理进行安装。</p>
]]></content>
      <categories>
        <category>软件推荐</category>
        <category>PC</category>
      </categories>
      <tags>
        <tag>代理</tag>
      </tags>
  </entry>
  <entry>
    <title>统计学校各班男女人数该怎么写SQL</title>
    <url>/2019/12/31/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E6%A0%A1%E5%90%84%E7%8F%AD%E7%94%B7%E5%A5%B3%E4%BA%BA%E6%95%B0%E8%AF%A5%E6%80%8E%E4%B9%88%E5%86%99SQL/</url>
    <content><![CDATA[<p>首先统计各班级人数，学生表一条数据代表一个学生，<br>
已经知道学生表有“管理院系，专业，班级名称，班级代码，年级，性别”等信息，
要统计的是在校学生，所以用where条件限定年级在2016~2019。<br>
然后使用<code>group by</code>指定学生班级，在<code>count(*)</code>列就能统计出各班人数</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 管理院系 <span class="keyword">AS</span> 学院名, 专业 <span class="keyword">AS</span> 专业名, 班级名称 <span class="keyword">AS</span> 班级名, 班级代码 <span class="keyword">AS</span> 班级编号</span><br><span class="line">    , <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> 人数</span><br><span class="line"><span class="keyword">FROM</span> EAMS_STUDENT_ALL_INFO</span><br><span class="line"><span class="keyword">WHERE</span> (年级 <span class="operator">=</span> <span class="number">2016</span></span><br><span class="line">    <span class="keyword">OR</span> 年级 <span class="operator">=</span> <span class="number">2017</span></span><br><span class="line">    <span class="keyword">OR</span> 年级 <span class="operator">=</span> <span class="number">2018</span></span><br><span class="line">    <span class="keyword">OR</span> 年级 <span class="operator">=</span> <span class="number">2019</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> 管理院系, 专业, 班级代码, 班级名称</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p><img src="/2019/12/31/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E6%A0%A1%E5%90%84%E7%8F%AD%E7%94%B7%E5%A5%B3%E4%BA%BA%E6%95%B0%E8%AF%A5%E6%80%8E%E4%B9%88%E5%86%99SQL/20191231124326.png" class="lazyload" data-srcset="/2019/12/31/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E6%A0%A1%E5%90%84%E7%8F%AD%E7%94%B7%E5%A5%B3%E4%BA%BA%E6%95%B0%E8%AF%A5%E6%80%8E%E4%B9%88%E5%86%99SQL/20191231124326.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="20191231124326.png"></p>
<p>统计各班男女人数比较难，最开始准备用<code>LEFT JOIN</code>。用学生表为基础，左连接算出男生人数的学生表，再左连接算出女生人数的学生表，<br>
但是这样做有点麻烦，效率和准确性都不高，所以最后选择了sum函数计算出男女人数方法</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 管理院系 <span class="keyword">AS</span> 学院名, 专业 <span class="keyword">AS</span> 专业名, 班级名称 <span class="keyword">AS</span> 班级名, 班级代码 <span class="keyword">AS</span> 班级编号</span><br><span class="line">    , <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> 人数,</span><br><span class="line">    <span class="built_in">SUM</span>(<span class="keyword">CASE</span></span><br><span class="line">        <span class="keyword">WHEN</span> 性别 <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span> <span class="keyword">THEN</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">ELSE</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">END</span>) <span class="keyword">AS</span> 女,</span><br><span class="line">    <span class="built_in">SUM</span>(<span class="keyword">CASE</span></span><br><span class="line">        <span class="keyword">WHEN</span> 性别 <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">THEN</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">ELSE</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">END</span>) <span class="keyword">AS</span> 男</span><br><span class="line"><span class="keyword">FROM</span> EAMS_STUDENT_ALL_INFO a</span><br><span class="line"><span class="keyword">WHERE</span> (年级 <span class="operator">=</span> <span class="number">2016</span></span><br><span class="line">    <span class="keyword">OR</span> 年级 <span class="operator">=</span> <span class="number">2017</span></span><br><span class="line">    <span class="keyword">OR</span> 年级 <span class="operator">=</span> <span class="number">2018</span></span><br><span class="line">    <span class="keyword">OR</span> 年级 <span class="operator">=</span> <span class="number">2019</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> 管理院系, 专业, 班级代码, 班级名称</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 班级名称</span><br></pre></td></tr></table></figure>
<p>结果很准确
<img src="/2019/12/31/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E6%A0%A1%E5%90%84%E7%8F%AD%E7%94%B7%E5%A5%B3%E4%BA%BA%E6%95%B0%E8%AF%A5%E6%80%8E%E4%B9%88%E5%86%99SQL/20191231124927.png" class="lazyload" data-srcset="/2019/12/31/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E6%A0%A1%E5%90%84%E7%8F%AD%E7%94%B7%E5%A5%B3%E4%BA%BA%E6%95%B0%E8%AF%A5%E6%80%8E%E4%B9%88%E5%86%99SQL/20191231124927.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="20191231124927.png"></p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>普陀山Vlog</title>
    <url>/2021/07/20/%E6%99%AE%E9%99%80%E5%B1%B1Vlog/</url>
    <content><![CDATA[<span id="more"></span>
<video src="/video/install_win_os.mp4" controls="controls" style="max-width: 100%; display: block; margin-left: auto; margin-right: auto;">
your browser does not support the video tag
</video>]]></content>
  </entry>
  <entry>
    <title>精准电量[Accubattery]Pro直装破解专业版</title>
    <url>/2020/07/15/%E7%B2%BE%E5%87%86%E7%94%B5%E9%87%8F-Accubattery-Pro%E7%9B%B4%E8%A3%85%E7%A0%B4%E8%A7%A3%E4%B8%93%E4%B8%9A%E7%89%88/</url>
    <content><![CDATA[<p>精准电量「Accubattery」Pro 是一款非常好用的电池健康检测维护管理软件，其基于一系列科学的研究和测试，能测试出设备电池的实际容量，并查看电池损耗，而且还可以通过设置充电到达百分数「Accubattery 建议是80%」提醒拔掉充电器，实现保护充电增加电池循环寿命，从而让您的电池保持健康。
<img src="/2020/07/15/%E7%B2%BE%E5%87%86%E7%94%B5%E9%87%8F-Accubattery-Pro%E7%9B%B4%E8%A3%85%E7%A0%B4%E8%A7%A3%E4%B8%93%E4%B8%9A%E7%89%88/icon.png" class="lazyload" data-srcset="/2020/07/15/%E7%B2%BE%E5%87%86%E7%94%B5%E9%87%8F-Accubattery-Pro%E7%9B%B4%E8%A3%85%E7%A0%B4%E8%A7%A3%E4%B8%93%E4%B8%9A%E7%89%88/icon.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<span id="more"></span>
<p>专业版还有检测电池寿命、充放电速度、温度、电压等众多的功能。
<img src="/2020/07/15/%E7%B2%BE%E5%87%86%E7%94%B5%E9%87%8F-Accubattery-Pro%E7%9B%B4%E8%A3%85%E7%A0%B4%E8%A7%A3%E4%B8%93%E4%B8%9A%E7%89%88/Screenshot_20200715-181032.jpg" class="lazyload" data-srcset="/2020/07/15/%E7%B2%BE%E5%87%86%E7%94%B5%E9%87%8F-Accubattery-Pro%E7%9B%B4%E8%A3%85%E7%A0%B4%E8%A7%A3%E4%B8%93%E4%B8%9A%E7%89%88/Screenshot_20200715-181032.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h2 id="特色功能：">特色功能：</h2>
<ul>
<li>电池健康。<br>
电池的寿命是有限的。每次给装置充电，都会损耗电池，降低电池的总容量。科学研究表明，只将手机电池最多充到80%，能将电池寿命延长到200%。<br>
通过使用我们的充电警告延长电池寿命。<br>
发现充电中的电池损耗。</li>
<li>电池使用情况。<br>
通过利用电池充电控制器提供的信息，AccuBattery可以测量出电池的实际使用情况 。将结果同在前台运行的应用信息相结合，可以确定每个应用的耗电量。Android测算电池耗电量是通过设备制造商提供的参数，比如，CPU消耗电多大。而实际上，这些测算值会有很大的偏差。<br>
监控手机目前用电情况。<br>
了解工作或待机状态下，手机能使用多长时间。<br>
了解每个应用的耗电情况。<br>
查看手机从休眠状态转为唤醒状态的频率。</li>
<li>充电速度。<br>
用AccuBattery为手机找到最快的充电器和USB连接线。通过充电电流（以毫安为单位）来发现！<br>
查看手机显示屏开或关时的充电速度。<br>
了解手机充电要多长时间，到几点钟可以充满。</li>
</ul>
<h2 id="专业版功能">专业版功能</h2>
<ul>
<li>实时CPU和电量使用情况叠加层，找出费电的进程。</li>
<li>通过深色和AMOLED黑主题来省电。</li>
<li>访问昨天之前的充电历史。</li>
<li>通知中详细的电池统计数据。</li>
</ul>
<h2 id="关于此破解专业版：">关于此破解专业版：</h2>
<p>感谢国外kirlif大神的修改和分享；</p>
<ul>
<li>解锁所有专业版功能。</li>
<li>删除软件内所有广告。</li>
</ul>
<h2 id="关于只将手机电池最多充到80-，能将电池寿命延长到200-：">关于只将手机电池最多充到80%，能将电池寿命延长到200%：</h2>
<p>相信好多人对于只充电到80%就能提高电池寿命的说法存在异议！那么 AccuBattery 宣称只将手机电池最多充至80%能将电池寿命延长到200%是否有科学依据呢？</p>
<p>众所周知，现在的手机、平板设备都是用的三元锂电池，而三元锂电池浅充、浅放能使循环寿命长是经过大量试验验证过的。通常三元锂电池单体充放电循环次数大约是500次，这里的循环次数是按100%-0%的容量进行的。大量的试验证明假设您每次只使用50%的电量，那么循环次数会大大提升。</p>
<p>另外循环寿命还受到充电的电压的影响，例如充电电压为2V时的循环寿命比4V有了明显的提升，如果进一步降低充满电压到1V，循环寿命又会进一步提升。而且目前大部分锂电池电动汽车日常充电程序都有相关的设置，例如特斯拉就将日常充电容量设为80%。</p>
<p>所以综上所述只将手机电池最多充到80%相比充到100%一定能延长电池的循环寿命，具体能不能达到延长到200%的效果，还受到您的放电、充电电压等因素的影响。</p>
<h2 id="下载地址">下载地址</h2>
<p>链接：<a href="https://pan.baidu.com/s/1T9twwSZXEVH_IwYzq2j_MA">https://pan.baidu.com/s/1T9twwSZXEVH_IwYzq2j_MA</a>
提取码：rrhc</p>
]]></content>
      <categories>
        <category>软件推荐</category>
        <category>安卓</category>
      </categories>
      <tags>
        <tag>破解</tag>
      </tags>
  </entry>
  <entry>
    <title>[转]用Python解数独</title>
    <url>/2021/06/01/%E8%BD%AC-%E7%94%A8Python%E8%A7%A3%E6%95%B0%E7%8B%AC/</url>
    <content><![CDATA[<blockquote>
<p>芬兰数学家因卡拉花费3个月时间设计出的世界上迄今难度最大的数独。数独是 9 横 9 竖共有 81 个格子，同时又分为 9 个九宫格。规则很简单：每个空格填入 1~9 任意一个数字，需要保证每个横排和竖排以及九宫格内无相同数字。</p>
</blockquote>
<p><img src="/2021/06/01/%E8%BD%AC-%E7%94%A8Python%E8%A7%A3%E6%95%B0%E7%8B%AC/259976-9986d86a0b148cfa.jpg" class="lazyload" data-srcset="/2021/06/01/%E8%BD%AC-%E7%94%A8Python%E8%A7%A3%E6%95%B0%E7%8B%AC/259976-9986d86a0b148cfa.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>解数独是一个可有可无的爱好，知道这个益智游戏，但是不很上心。但是前两天，由于自己的学生装了一个 ubuntu 18.04 的系统，上面有一些数独游戏，偶然间，让我看见了，为了更好的显摆自己的 Python 知识，决定用 Python 写一个程序，所以就有了下面的文字。</p>
<h3 id="1、将待解的数独转换成-Python-矩阵">1、将待解的数独转换成 Python 矩阵</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">m = [</span><br><span class="line">    [6, 0, 0, 1, 0, 0, 7, 0, 8],</span><br><span class="line">    [0, 0, 0, 8, 0, 0, 2, 0, 0],</span><br><span class="line">    [2, 3, 8, 0, 5, 0, 1, 0, 0],</span><br><span class="line">    [0, 0, 0, 0, 4, 0, 0, 9, 2],</span><br><span class="line">    [0, 0, 4, 3, 0, 8, 6, 0, 0],</span><br><span class="line">    [3, 7, 0, 0, 1, 0, 0, 0, 0],</span><br><span class="line">    [0, 0, 3, 0, 7, 0, 5, 2, 6],</span><br><span class="line">    [0, 0, 2, 0, 0, 4, 0, 0, 0],</span><br><span class="line">    [9, 0, 7, 0, 0, 6, 0, 0, 4]</span><br><span class="line">] </span><br></pre></td></tr></table></figure>
<p>就是这么简单，将待填写的空白格用 0 来代替。</p>
<h3 id="2、寻找第一个空格位置">2、寻找第一个空格位置</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def start_pos(m:&quot;数独矩阵&quot;):</span><br><span class="line">    &quot;&quot;&quot; 功能：返回第一个空白格的位置坐标&quot;&quot;&quot;</span><br><span class="line">    for x in range(9):</span><br><span class="line">        for y in range(9):</span><br><span class="line">            if m[x][y] == 0:</span><br><span class="line">                return x, y</span><br><span class="line">    return False, False  # 若数独已完成，则返回 False, False </span><br></pre></td></tr></table></figure>
<p>找到 Python 矩阵中第一个是 0 的元素的位置坐标。</p>
<h3 id="3、寻找下一个空格位置">3、寻找下一个空格位置</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def get_next(m:&quot;数独矩阵&quot;, x:&quot;空白格行数&quot;, y:&quot;空白格列数&quot;):</span><br><span class="line">    &quot;&quot;&quot; 功能：获得下一个空白格在数独中的坐标。       </span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    for next_y in range(y+1, 9):  # 下一个空白格和当前格在一行的情况</span><br><span class="line">        if m[x][next_y] == 0:</span><br><span class="line">            return x, next_y</span><br><span class="line">    for next_x in range(x+1, 9):  # 下一个空白格和当前格不在一行的情况</span><br><span class="line">        for next_y in range(0, 9):</span><br><span class="line">            if m[next_x][next_y] == 0:</span><br><span class="line">                return next_x, next_y</span><br><span class="line">    return -1, -1               # 若不存在下一个空白格，则返回 -1，-1 </span><br></pre></td></tr></table></figure>
<p>找到 Python 矩阵中下一个是 0 的元素的位置坐标。详细内容看注释。</p>
<h3 id="4、寻找适合当前空格的数字的集合">4、寻找适合当前空格的数字的集合</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def value(m:&quot;数独矩阵&quot;, x:&quot;空白格行数&quot;, y:&quot;空白格列数&quot;):</span><br><span class="line">    &quot;&quot;&quot; 功能：返回符合&quot;每个横排和竖排以及</span><br><span class="line">              九宫格内无相同数字&quot;这个条件的有效值。</span><br><span class="line">    &quot;&quot;&quot; </span><br><span class="line">    i, j = x//3, y//3</span><br><span class="line">    grid = [m[i*3+r][j*3+c] for r in range(3) for c in range(3)]</span><br><span class="line">    v = set([x for x in range(1,10)]) - set(grid) - set(m[x]) - \</span><br><span class="line">        set(list(zip(*m))[y])</span><br><span class="line">    return list(v) </span><br></pre></td></tr></table></figure>
<p>每个空格可以填入 1~9 中的任意一个数字，但要符合规则：每个空格填入 1~9 任意一个数字，需要保证每个横排和竖排以及九宫格内无相同数字。下面的代码中的 <code>grid</code> 变量，保存的是当前位置所处的九宫格。<code>v</code> 变量是通过集合运算，将 1~9 这个数字集合中，与行的数字集合、列的数字集合以及九宫格的数字集合重叠的部分去除掉。剩余的部分就是符合条件的数字的集合。</p>
<h3 id="5、使用递归尝试解数独（Sudoku）">5、使用递归尝试解数独（Sudoku）</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def try_sudoku(m:&quot;数独矩阵&quot;, x:&quot;空白格行数&quot;, y:&quot;空白格列数&quot;):</span><br><span class="line">    &quot;&quot;&quot; 功能：试着填写数独 &quot;&quot;&quot;</span><br><span class="line">    for v in value(m, x, y):</span><br><span class="line">        m[x][y] = v</span><br><span class="line">        next_x, next_y = get_next(m, x, y)</span><br><span class="line">        if next_y == -1: # 如果无下一个空白格</span><br><span class="line">            return True</span><br><span class="line">        else:</span><br><span class="line">            end = try_sudoku(m, next_x, next_y) # 递归</span><br><span class="line">            if end:   # 数独解完之后，此处的 end 会是 True</span><br><span class="line">                return True</span><br><span class="line">            m[x][y] = 0 # 在递归的过程中，如果数独没有解开，</span><br><span class="line">                        # 则回溯到上一个空白格 </span><br></pre></td></tr></table></figure>
<p>详细内容看注释。</p>
<h3 id="6、代码展示">6、代码展示</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> import random </span><br><span class="line">import sys  </span><br><span class="line">sys.setrecursionlimit(100000) # 发现python默认的递归深度是很有限的</span><br><span class="line">                              #（默认是1000），因此当递归深度超过999的</span><br><span class="line">                              # 样子，就会引发这样的一个异常。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_next(m:&quot;数独矩阵&quot;, x:&quot;空白格行数&quot;, y:&quot;空白格列数&quot;):</span><br><span class="line">    &quot;&quot;&quot; 功能：获得下一个空白格在数独中的坐标。       </span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    for next_y in range(y+1, 9):  # 下一个空白格和当前格在一行的情况</span><br><span class="line">        if m[x][next_y] == 0:</span><br><span class="line">            return x, next_y</span><br><span class="line">    for next_x in range(x+1, 9):  # 下一个空白格和当前格不在一行的情况</span><br><span class="line">        for next_y in range(0, 9):</span><br><span class="line">            if m[next_x][next_y] == 0:</span><br><span class="line">                return next_x, next_y</span><br><span class="line">    return -1, -1               # 若不存在下一个空白格，则返回 -1，-1</span><br><span class="line">        </span><br><span class="line">def value(m:&quot;数独矩阵&quot;, x:&quot;空白格行数&quot;, y:&quot;空白格列数&quot;):</span><br><span class="line">    &quot;&quot;&quot; 功能：返回符合&quot;每个横排和竖排以及</span><br><span class="line">              九宫格内无相同数字&quot;这个条件的有效值。</span><br><span class="line">    &quot;&quot;&quot; </span><br><span class="line">    i, j = x//3, y//3</span><br><span class="line">    grid = [m[i*3+r][j*3+c] for r in range(3) for c in range(3)]</span><br><span class="line">    v = set([x for x in range(1,10)]) - set(grid) - set(m[x]) - \</span><br><span class="line">        set(list(zip(*m))[y])    </span><br><span class="line">    return list(v)</span><br><span class="line"></span><br><span class="line">def start_pos(m:&quot;数独矩阵&quot;):</span><br><span class="line">    &quot;&quot;&quot; 功能：返回第一个空白格的位置坐标&quot;&quot;&quot;</span><br><span class="line">    for x in range(9):</span><br><span class="line">        for y in range(9):</span><br><span class="line">            if m[x][y] == 0:</span><br><span class="line">                return x, y</span><br><span class="line">    return False, False  # 若数独已完成，则返回 False, False</span><br><span class="line"></span><br><span class="line">def try_sudoku(m:&quot;数独矩阵&quot;, x:&quot;空白格行数&quot;, y:&quot;空白格列数&quot;):</span><br><span class="line">    &quot;&quot;&quot; 功能：试着填写数独 &quot;&quot;&quot;</span><br><span class="line">    for v in value(m, x, y):</span><br><span class="line">        m[x][y] = v</span><br><span class="line">        next_x, next_y = get_next(m, x, y)</span><br><span class="line">        if next_y == -1: # 如果无下一个空白格</span><br><span class="line">            return True</span><br><span class="line">        else:</span><br><span class="line">            end = try_sudoku(m, next_x, next_y) # 递归</span><br><span class="line">            if end:</span><br><span class="line">                return True</span><br><span class="line">            m[x][y] = 0 # 在递归的过程中，如果数独没有解开，</span><br><span class="line">                        # 则回溯到上一个空白格</span><br><span class="line"></span><br><span class="line">def sudoku(m):        </span><br><span class="line">    x, y = start_pos(m)</span><br><span class="line">    try_sudoku(m, x, y)</span><br><span class="line">    print(m)     </span><br><span class="line">    </span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">                    </span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    m = [</span><br><span class="line">        [6, 0, 0, 1, 0, 0, 7, 0, 8],</span><br><span class="line">        [0, 0, 0, 8, 0, 0, 2, 0, 0],</span><br><span class="line">        [2, 3, 8, 0, 5, 0, 1, 0, 0],</span><br><span class="line">        [0, 0, 0, 0, 4, 0, 0, 9, 2],</span><br><span class="line">        [0, 0, 4, 3, 0, 8, 6, 0, 0],</span><br><span class="line">        [3, 7, 0, 0, 1, 0, 0, 0, 0],</span><br><span class="line">        [0, 0, 3, 0, 7, 0, 5, 2, 6],</span><br><span class="line">        [0, 0, 2, 0, 0, 4, 0, 0, 0],</span><br><span class="line">        [9, 0, 7, 0, 0, 6, 0, 0, 4]</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    sudoku(m)</span><br><span class="line">    </span><br><span class="line">&quot;&quot;&quot; 数独结果如下：</span><br><span class="line">[</span><br><span class="line">    [6, 9, 5, 1, 2, 3, 7, 4, 8], </span><br><span class="line">    [7, 4, 1, 8, 6, 9, 2, 5, 3], </span><br><span class="line">    [2, 3, 8, 4, 5, 7, 1, 6, 9], </span><br><span class="line">    [8, 1, 6, 7, 4, 5, 3, 9, 2], </span><br><span class="line">    [5, 2, 4, 3, 9, 8, 6, 7, 1], </span><br><span class="line">    [3, 7, 9, 6, 1, 2, 4, 8, 5], </span><br><span class="line">    [4, 8, 3, 9, 7, 1, 5, 2, 6], </span><br><span class="line">    [1, 6, 2, 5, 8, 4, 9, 3, 7], </span><br><span class="line">    [9, 5, 7, 2, 3, 6, 8, 1, 4]</span><br><span class="line">]</span><br><span class="line">&quot;&quot;&quot; </span><br></pre></td></tr></table></figure>
<hr>
<p>原文地址 <a href="https://www.jianshu.com/p/867fe9528af1">www.jianshu.com</a></p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>[转]Docker部署Zabbix+Grafana</title>
    <url>/2020/05/23/%E8%BD%AC-Docker%E9%83%A8%E7%BD%B2Zabbix-Grafana/</url>
    <content><![CDATA[<p><img src="https://view.moezx.cc/images/2019/11/10/grafana.png" class="lazyload" data-srcset="https://view.moezx.cc/images/2019/11/10/grafana.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<span id="more"></span>
<p>permalink: <a href="https://2heng.xin/2019/09/10/docker-zabbix-grafana/">https://2heng.xin/2019/09/10/docker-zabbix-grafana/</a></p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>你应该知道的Python3各个版本的新特性</title>
    <url>/2020/11/27/%E4%BD%A0%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84Python3%E5%90%84%E4%B8%AA%E7%89%88%E6%9C%AC%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7/</url>
    <content><![CDATA[<p><img src="/2020/11/27/%E4%BD%A0%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84Python3%E5%90%84%E4%B8%AA%E7%89%88%E6%9C%AC%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7/v2-418381fc7c194311c6981580e5626ddd_1440w.jpg" class="lazyload" data-srcset="/2020/11/27/%E4%BD%A0%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84Python3%E5%90%84%E4%B8%AA%E7%89%88%E6%9C%AC%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7/v2-418381fc7c194311c6981580e5626ddd_1440w.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt>
最近在使用python过程中，看到了一段提示文本。发现python3.5的使用寿命已于2020年9月13日结束，pip 21.0也将于2021年1月删除对Python 3.5的支持。导致很多第三方模块要求python的最低标准是python3.6。</p>
<p>现在是时候升级你的python了，学习新版本python特性有助于提高对python的了解。</p>
<span id="more"></span>
<h2 id="一、Python3-6新的语法特性">一、Python3.6新的语法特性</h2>
<h3 id="1、格式化字符串（Formatted-string-literals）">1、格式化字符串（Formatted string literals）</h3>
<p>即在普通字符串前添加 f 或 F 前缀，其效果类似于str.format()。比如</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name = <span class="string">&quot;Fred&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;He said his name is <span class="subst">&#123;name&#125;</span>.&quot;</span>) <span class="comment"># &#x27;He said his name is Fred.&#x27;</span></span><br></pre></td></tr></table></figure>
<p>其效果相当于：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;He said his name is &#123;name&#125;.&quot;</span>.<span class="built_in">format</span>(**<span class="built_in">locals</span>()))</span><br></pre></td></tr></table></figure>
<p>此外，此特性还支持嵌套字段，比如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">width = <span class="number">10</span></span><br><span class="line">precision = <span class="number">4</span></span><br><span class="line">value = decimal.Decimal(<span class="string">&quot;12.34567&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;result: <span class="subst">&#123;value:&#123;width&#125;</span>.<span class="subst">&#123;precision&#125;</span>&#125;&quot;</span>) <span class="comment">#&#x27;result:   12.35&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="2、变量声明语法（variable-annotations）">2、变量声明语法（variable annotations）</h3>
<p>即从Python3.5开始就有的Typehints。在Python3.5中，是这么使用的：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">a: <span class="type">List</span>[<span class="built_in">int</span>], b: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">  <span class="keyword">return</span> a[<span class="number">0</span>] + b</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(test([<span class="number">3</span>, <span class="number">1</span>], <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>这里的语法检查只在编辑器（比如Pycharm）中产生，在实际的使用中，并不进行严格检查。
在Python3.6中，引入了新的语法：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Dict</span></span><br><span class="line"> </span><br><span class="line">primes: <span class="type">List</span>[<span class="built_in">int</span>] = []</span><br><span class="line">captain: <span class="built_in">str</span>  <span class="comment"># 此时没有初始值</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Starship</span>:</span></span><br><span class="line">  stats: <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="built_in">int</span>] = &#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3、数字的下划线写法（Underscores-in-Numeric-Literals）">3、数字的下划线写法（Underscores in Numeric Literals）</h3>
<p>即允许在数字中使用下划线，以提高多位数字的可读性。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1_000_000_000_000_000</span>    <span class="comment"># 1000000000000000</span></span><br><span class="line">b = <span class="number">0x_FF_FF_FF_FF</span>       <span class="comment"># 4294967295</span></span><br></pre></td></tr></table></figure>
<p>除此之外，“字符串格式化”也支持“_”选项，以打印出更易读的数字字符串：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#123;:_&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="number">1000000</span>)     <span class="comment"># &#x27;1_000_000&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#123;:_x&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="number">0xFFFFFFFF</span>)   <span class="comment"># &#x27;ffff_ffff&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="4、异步生成器（Asynchronous-Generators）">4、异步生成器（Asynchronous Generators）</h3>
<p>在Python3.5中，引入了新的语法 async 和 await 来实现协同程序。但是有个限制，不能在同一个函数体内同时使用 yield 和 await，在Python3.6中，这个限制被放开了，Python3.6中允许定义异步生成器：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">ticker</span>(<span class="params">delay, to</span>):</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;Yield numbers from 0 to *to* every *delay* seconds.&quot;&quot;&quot;</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(to):</span><br><span class="line">    <span class="keyword">yield</span> i</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(delay)</span><br></pre></td></tr></table></figure>
<h3 id="5、异步解析器（Asynchronous-Comprehensions）">5、异步解析器（Asynchronous Comprehensions）</h3>
<p>即允许在列表list、集合set 和字典dict 解析器中使用 async for 或 await 语法。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = [i <span class="keyword">async</span> <span class="keyword">for</span> i <span class="keyword">in</span> aiter() <span class="keyword">if</span> i % <span class="number">2</span>]</span><br><span class="line">result = [<span class="keyword">await</span> fun() <span class="keyword">for</span> fun <span class="keyword">in</span> funcs <span class="keyword">if</span> <span class="keyword">await</span> condition()]</span><br></pre></td></tr></table></figure>
<h3 id="6、新增标准模块">6、新增标准模块</h3>
<p>Python标准库（The Standard Library）中增加了一个新的模块：secrets。该模块用来生成一些安全性更高的随机数，以用来管理数据，比如passwords, account authentication, security tokens, 以及related secrets等。具体用法可参考官方文档：secrets</p>
<h3 id="7、其他新特性">7、其他新特性</h3>
<ol>
<li>新的 PYTHONMALLOC 环境变量允许开发者设置内存分配器，以及注册debug钩子等。</li>
<li>asyncio模块更加稳定、高效，并且不再是临时模块，其中的API也都是稳定版的了。</li>
<li>typing模块也有了一定改进，并且不再是临时模块。</li>
<li>datetime.strftime 和 date.strftime 开始支持ISO 8601的时间标识符%G, %u, %V。</li>
<li>hashlib 和 ssl 模块开始支持OpenSSL1.1.0。</li>
<li>hashlib模块开始支持新的hash算法，比如BLAKE2, SHA-3 和 SHAKE。</li>
<li>Windows上的 filesystem 和 console 默认编码改为UTF-8。</li>
<li>json模块中的 json.load() 和 json.loads() 函数开始支持 binary 类型输入。</li>
<li>.......</li>
</ol>
<p>更多新功能，参考官方文档：<a href="https://docs.python.org/3/whatsnew/3.6.html">https://docs.python.org/3/whatsnew/3.6.html</a></p>
<h2 id="二、Python3-7-新特性">二、Python3.7 新特性</h2>
<p>Python 3.7 于 2018 年 6 月 27 日发布， 包含许多新特性和优化，增添了众多新的类，可用于数据处理、针对脚本编译和垃圾收集的优化以及更快的异步 I/O，主要如下：</p>
<ul>
<li>用类处理数据时减少样板代码的数据类。</li>
<li>一处可能无法向后兼容的变更涉及处理生成器中的异常。</li>
<li>面向解释器的 “开发模式”。</li>
<li>具有纳秒分辨率的时间对象。</li>
<li>环境中默认使用 UTF-8 编码的 UTF-8 模式。</li>
<li>触发调试器的一个新的内置函数。</li>
</ul>
<h3 id="1、新增内置函数-breakpoint">1、新增内置函数 breakpoint()</h3>
<p>使用该内置函数，相当于通过代码的方式设置了断点，会自动进入 Pbd 调试模式。</p>
<p>如果在环境变量中设置 PYTHONBREAKPOINT=0 会忽略此函数。并且，pdb 只是众多可用调试器之一，你可以通过设置新的 PYTHONBREAKPOINT 环境变量来配置想要使用的调试器。</p>
<p>下面有一个简单例子，用户需要输入一个数字，判断它是否和目标数字一样：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">guess</span>(<span class="params">target</span>):</span></span><br><span class="line">  user_guess = <span class="built_in">input</span>(<span class="string">&quot;请输入你猜的数 &gt;&gt;&gt; &quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> user_guess == target:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你猜对了!&quot;</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;猜错了&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  a = <span class="number">100</span></span><br><span class="line">  <span class="built_in">print</span>(guess(a))</span><br></pre></td></tr></table></figure>
<p>不幸的是，即使猜的数和目标数一样，打印的结果也是‘猜错了'，并且没有任何异常或错误信息。</p>
<p>为了弄清楚发生了什么，我们可以插入一个断点，来调试一下。以往一般通过 print 大法或者 IDE 的调试工具，但现在我们可以使用 breakpoint()。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">guess</span>(<span class="params">target</span>):</span></span><br><span class="line">  user_guess = <span class="built_in">input</span>(<span class="string">&quot;请输入你猜的数 &gt;&gt;&gt; &quot;</span>)</span><br><span class="line">  <span class="built_in">breakpoint</span>()  //加入这一行</span><br><span class="line">  <span class="keyword">if</span> user_guess == target:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你猜对了!&quot;</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;猜错了&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  a = <span class="number">100</span></span><br><span class="line">  <span class="built_in">print</span>(guess(a))</span><br></pre></td></tr></table></figure>
<p>在 pdb 提示符下，我们可以调用 locals() 来查看当前的本地作用域的所有变量。（pdb 有大量的命令，你也可以在其中运行正常的 Python 语句）</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">请输入你猜的数 &gt;&gt;&gt; <span class="number">100</span></span><br><span class="line"></span><br><span class="line">&gt; d:\work\for_test\py3_test\test.py(<span class="number">7</span>)guess()</span><br><span class="line"></span><br><span class="line">-&gt; <span class="keyword">if</span> user_guess == target:</span><br><span class="line">(Pdb) <span class="built_in">locals</span>()</span><br><span class="line">&#123;<span class="string">&#x27;target&#x27;</span>: <span class="number">100</span>, <span class="string">&#x27;user_guess&#x27;</span>: <span class="string">&#x27;100&#x27;</span>&#125;</span><br><span class="line">(Pdb) <span class="built_in">type</span>(user_guess)</span><br></pre></td></tr></table></figure>
<p>搞明白了，target 是一个整数，而 user_guess 是一个字符串，这里发生了类型对比错误。</p>
<h3 id="2、类型和注解">2、类型和注解</h3>
<p>从 Python 3.5 开始，类型注解就越来越受欢迎。对于那些不熟悉类型提示的人来说，这是一种完全可选的注释代码的方式，以指定变量的类型。</p>
<p>什么是注解？它们是关联元数据与变量的语法支持，可以是任意表达式，在运行时被 Python 计算但被忽略。注解可以是任何有效的 Python 表达式。</p>
<p>下面是个对比的例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">bar, baz</span>):</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">bar: <span class="string">&#x27;Describe the bar&#x27;</span>, baz: <span class="built_in">print</span>(<span class="params"><span class="string">&#x27;random&#x27;</span></span>)</span>) -&gt; &#x27;<span class="keyword">return</span> thingy&#x27;:</span></span><br></pre></td></tr></table></figure>
<p>上面的做法，其实是 Python 对自身弱类型语言的强化，希望获得一定的类型可靠和健壮度，向 Java 等语言靠拢。</p>
<p>在 Python 3.5 中，注解的语法获得标准化，此后，Python 社区广泛使用了注解类型提示。</p>
<p>但是，注解仅仅是一种开发工具，可以使用 PyCharm 等 IDE 或 Mypy 等第三方工具进行检查，并不是语法层面的限制。</p>
<p>我们前面的猜数程序如果添加类型注解，它应该是这样的：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">guess</span>(<span class="params">target:<span class="built_in">str</span></span>):</span></span><br><span class="line">  user_guess:<span class="built_in">str</span> = <span class="built_in">input</span>(<span class="string">&quot;请输入你猜的数 &gt;&gt;&gt; &quot;</span>)</span><br><span class="line">  <span class="built_in">breakpoint</span>()</span><br><span class="line">  <span class="keyword">if</span> user_guess == target:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你猜对了!&quot;</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;猜错了&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  a:<span class="built_in">int</span> = <span class="number">100</span></span><br><span class="line">  <span class="built_in">print</span>(guess(a))</span><br></pre></td></tr></table></figure>
<p>PyCharm 会给我们灰色的规范错误提醒，但不会给红色的语法错误提示。</p>
<p>用注解作为类型提示时，有两个主要问题：启动性能和前向引用。</p>
<ul>
<li>在定义时计算大量任意表达式相当影响启动性能，而且 typing 模块非常慢</li>
<li>你不能用尚未声明的类型来注解</li>
</ul>
<p>typing 模块如此缓慢的部分原因是，最初的设计目标是在不修改核心 CPython 解释器的情况下实现 typing 模块。随着类型提示变得越来越流行，这一限制已经被移除，这意味着现在有了对 typing 的核心支持。</p>
<p>而对于向前引用，看下面的例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name: <span class="built_in">str</span>, prev_user: User</span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>错误在于 User 类型还没有被声明，此时的 prev_user 不能定义为 User 类型。</p>
<p>为了解决这个问题，Python3.7 将注解的评估进行了推迟。并且，这项改动向后不兼容，需要先导入 annotations，只有到 Python 4.0 后才会成为默认行为。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> annotations</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name: <span class="built_in">str</span>, prev_user: User</span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>或者如下面的例子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">validate_b</span>(<span class="params">self, obj: B</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<h3 id="3、新增-dataclasses-模块">3、新增 dataclasses 模块</h3>
<p>这个特性可能是 Python3.7 以后比较常用的，它有什么作用呢？</p>
<p>假如我们需要编写一个下面的类：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> dateutil</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, _id, author_id, title, text, tags=<span class="literal">None</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">         created=datetime.now(<span class="params"></span>), edited=datetime.now(<span class="params"></span>)</span>):</span></span><br><span class="line"></span><br><span class="line">  self._<span class="built_in">id</span> = _<span class="built_in">id</span></span><br><span class="line">  self.author_id = author_id</span><br><span class="line">  self.title = title</span><br><span class="line">  self.text = text</span><br><span class="line">  self.tags = <span class="built_in">list</span>() <span class="keyword">if</span> tags <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">else</span> tags</span><br><span class="line">  self.created = created</span><br><span class="line">  self.edited = edited</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">type</span>(self.created) <span class="keyword">is</span> <span class="built_in">str</span>:</span><br><span class="line">    self.created = dateutil.parser.parse(self.created)</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">type</span>(self.edited) <span class="keyword">is</span> <span class="built_in">str</span>:</span><br><span class="line">    self.edited = dateutil.parser.parse(self.edited)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(other, self.__class__):</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line">    <span class="keyword">return</span> (self._<span class="built_in">id</span>, self.author_id) == (other._<span class="built_in">id</span>, other.author_id)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(other, self.__class__):</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line">    <span class="keyword">return</span> (self._<span class="built_in">id</span>, self.author_id) &lt; (other._<span class="built_in">id</span>, other.author_id)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#123;&#125;(id=&#123;&#125;, author_id=&#123;&#125;, title=&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">        self.__class__.__name__, self._<span class="built_in">id</span>, self.author_id, self.title)</span><br></pre></td></tr></table></figure>
<p>大量的初始化属性要定义默认值，可能还需要重写一堆魔法方法，来实现类实例的打印、比较、排序和去重等功能。
如果使用 dataclasses 进行改造，可以写成这个样子：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass, field</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> dateutil</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">order=<span class="literal">True</span></span>)  </span><span class="comment">#注意这里</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">  _<span class="built_in">id</span>: <span class="built_in">int</span></span><br><span class="line">  author_id: <span class="built_in">int</span></span><br><span class="line">  title: <span class="built_in">str</span> = field(compare=<span class="literal">False</span>)</span><br><span class="line">  text: <span class="built_in">str</span> = field(<span class="built_in">repr</span>=<span class="literal">False</span>, compare=<span class="literal">False</span>)</span><br><span class="line">  tags: <span class="type">List</span>[<span class="built_in">str</span>] = field(default=<span class="built_in">list</span>(), <span class="built_in">repr</span>=<span class="literal">False</span>, compare=<span class="literal">False</span>)</span><br><span class="line">  created: datetime = field(default=datetime.now(), <span class="built_in">repr</span>=<span class="literal">False</span>, compare=<span class="literal">False</span>)</span><br><span class="line">  edited: datetime = field(default=datetime.now(), <span class="built_in">repr</span>=<span class="literal">False</span>, compare=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__post_init__</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>(self.created) <span class="keyword">is</span> <span class="built_in">str</span>:</span><br><span class="line">      self.created = dateutil.parser.parse(self.created)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>(self.edited) <span class="keyword">is</span> <span class="built_in">str</span>:</span><br><span class="line">      self.edited = dateutil.parser.parse(self.edited)</span><br></pre></td></tr></table></figure>
<p>这使得类不仅容易设置，而且当我们创建一个实例并打印出来时，它还可以自动生成优美的字符串。在与其他类实例进行比较时，它也会有适当的行为。这是因为 dataclasses 除了帮我们自动生成 <strong>init</strong> 方法外，还生成了一些其他特殊方法，如 repr、eq 和 hash 等。</p>
<p>Dataclasses 使用字段 field 来完提供默认值，手动构造一个 field() 函数能够访问其他选项，从而更改默认值。例如，这里将 field 中的 default_factory 设置为一个 lambda 函数，该函数提示用户输入其名称。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass, field</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>:</span></span><br><span class="line">  name: <span class="built_in">str</span> = field(default_factory=<span class="keyword">lambda</span>: <span class="built_in">input</span>(<span class="string">&quot;enter name&quot;</span>))</span><br></pre></td></tr></table></figure>
<h3 id="4、生成器异常处理">4、生成器异常处理</h3>
<p>在 Python 3.7 中，生成器引发 StopIteration 异常后，StopIteration 异常将被转换成 RuntimeError 异常，那样它不会悄悄一路影响应用程序的堆栈框架。这意味着如何处理生成器的行为方面不太敏锐的一些程序会在 Python 3.7 中抛出 RuntimeError。在 Python 3.6 中，这种行为生成一个弃用警告；在 Python 3.7 中，它将生成一个完整的错误。</p>
<p>一个简易的方法是使用 try/except 代码段，在 StopIteration 传播到生成器的外面捕获它。更好的解决方案是重新考虑如何构建生成器――比如说，使用 return 语句来终止生成器，而不是手动引发 StopIteration。</p>
<h3 id="5、开发模式">5、开发模式</h3>
<p>Python 解释器添加了一个新的命令行开关：-X，让开发人员可以为解释器设置许多低级选项。</p>
<p>这种运行时的检查机制通常对性能有重大影响，但在调试过程中对开发人员很有用。</p>
<p>-X 激活的选项包括：</p>
<ul>
<li>asyncio 模块的调试模式。这为异步操作提供了更详细的日志记录和异常处理，而异常操作可能很难调试或推理。</li>
<li>面向内存分配器的调试钩子。这对于编写 CPython 扩展件的那些人很有用。它能够实现更明确的运行时检查，了解 CPython 如何在内部分配内存和释放内存。</li>
<li>启用 faulthandler 模块，那样发生崩溃后，traceback 始终转储出去。</li>
</ul>
<h3 id="6、-高精度时间函数">6、 高精度时间函数</h3>
<p>Python 3.7 中一类新的时间函数返回纳秒精度的时间值。尽管 Python 是一种解释型语言，但是 Python 的核心开发人员维克多 • 斯廷纳（Victor Stinner）主张报告纳秒精度的时间。最主要的原因是，在处理转换其他程序（比如数据库）记录的时间值时，可以避免丢失精度。</p>
<p>新的时间函数使用后缀_ns。比如说，time.process_time() 的纳秒版本是 time.process_time_ns()。请注意，并非所有的时间函数都有对应的纳秒版本。</p>
<h3 id="7、其他新特性-v2">7、其他新特性</h3>
<ul>
<li>字典现在保持插入顺序。这在 3.6 中是非正式的，但现在成为了官方语言规范。在大多数情况下，普通的 dict 能够替换 collections.OrderedDict。</li>
<li>.pyc 文件具有确定性，支持可重复构建 —— 也就是说，总是为相同的输入文件生成相同的 byte-for-byte 输出。</li>
<li>新增 contextvars 模块，针对异步任务提供上下文变量。</li>
<li>__main__中的代码会显示弃用警告（DeprecationWarning）。</li>
<li>新增 UTF-8 模式。在 Linux/Unix 系统，将忽略系统的 locale，使用 UTF-8 作为默认编码。在非 Linux/Unix 系统，需要使用 - X utf8 选项启用 UTF-8 模式。</li>
<li>允许模块定义__getattr__、__dir__函数，为弃用警告、延迟 import 子模块等提供便利。</li>
<li>新的线程本地存储 C 语言 API。</li>
<li>更新 Unicode 数据到 11.0。</li>
</ul>
<h2 id="三、Python3-8-新特性">三、Python3.8 新特性</h2>
<p>Python3.8 版本于 2019 年 10 月 14 日发布，以下是 Python 3.8 相比 3.7 的新增特性。</p>
<h3 id="1、海象赋值表达式">1、海象赋值表达式</h3>
<p>新的语法 :=，将值赋给一个更大的表达式中的变量。它被亲切地称为 “海象运算符”(walrus operator)，因为它长得像海象的眼睛和象牙。</p>
<p>“海象运算符” 在某些时候可以让你的代码更整洁，比如：</p>
<p>在下面的示例中，赋值表达式可以避免调用 len () 两次:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (n := <span class="built_in">len</span>(a)) &gt; <span class="number">10</span>: </span><br><span class="line">  <span class="built_in">print</span>(<span class="string">f&quot;List is too long (<span class="subst">&#123;n&#125;</span> elements, expected &lt;= 10)&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>类似的好处还可体现在正则表达式匹配中需要使用两次匹配对象的情况中，一次检测用于匹配是否发生，另一次用于提取子分组:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">discount = <span class="number">0.0</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (mo := re.search(<span class="string">r&#x27;(\d+)% discount&#x27;</span>, advertisement)): </span><br><span class="line">  discount = <span class="built_in">float</span>(mo.group(<span class="number">1</span>)) / <span class="number">100.0</span></span><br></pre></td></tr></table></figure>
<p>此运算符也可用于配合 while 循环计算一个值，来检测循环是否终止，而同一个值又在循环体中再次被使用的情况:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> (block := f.read(<span class="number">256</span>)) != <span class="string">&#x27;&#x27;</span>: </span><br><span class="line">  process(block)</span><br></pre></td></tr></table></figure>
<p>或者出现于列表推导式中，在筛选条件中计算一个值，而同一个值又在表达式中需要被使用:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[clean_name.title() <span class="keyword">for</span> name <span class="keyword">in</span> names </span><br><span class="line"> <span class="keyword">if</span> (clean_name := normalize(<span class="string">&#x27;NFC&#x27;</span>, name)) <span class="keyword">in</span> allowed_names]</span><br></pre></td></tr></table></figure>
<p>请尽量将海象运算符的使用限制在清晰的场合中，以降低复杂性并提升可读性。</p>
<h3 id="2、仅限位置形参">2、仅限位置形参</h3>
<p>新增一个函数形参语法 / 用来指明某些函数形参必须使用仅限位置而非关键字参数的形式。</p>
<p>这种标记语法与通过 help () 所显示的使用 Larry Hastings 的 Argument Clinic 工具标记的 C 函数相同。</p>
<p>在下面的例子中，形参 a 和 b 为仅限位置形参，c 或 d 可以是位置形参或关键字形参，而 e 或 f 要求为关键字形参:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">a, b, /, c, d, *, e, f</span>):</span> </span><br><span class="line">  <span class="built_in">print</span>(a, b, c, d, e, f)</span><br></pre></td></tr></table></figure>
<p>以下是合法的调用:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, d=<span class="number">40</span>, e=<span class="number">50</span>, f=<span class="number">60</span>)</span><br></pre></td></tr></table></figure>
<p>但是，以下均为不合法的调用:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f(<span class="number">10</span>, b=<span class="number">20</span>, c=<span class="number">30</span>, d=<span class="number">40</span>, e=<span class="number">50</span>, f=<span class="number">60</span>) </span><br><span class="line">f(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>, f=<span class="number">60</span>)     </span><br></pre></td></tr></table></figure>
<p>这种标记形式的一个用例是它允许纯 Python 函数完整模拟现有的用 C 代码编写的函数的行为。例如，内置的 pow () 函数不接受关键字参数:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pow</span>(<span class="params">x, y, z=<span class="literal">None</span>, /</span>):</span> </span><br><span class="line">  <span class="string">&quot;Emulate the built in pow() function&quot;</span> </span><br><span class="line">  r = x ** y </span><br><span class="line">  <span class="keyword">return</span> r <span class="keyword">if</span> z <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">else</span> r%z</span><br></pre></td></tr></table></figure>
<p>另一个用例是在不需要形参名称时排除关键字参数。例如，内置的 len () 函数的签名为 len (obj, /)。这可以排除如下这种笨拙的调用形式:</p>
<p>另一个益处是将形参标记为仅限位置形参将允许在未来修改形参名而不会破坏客户的代码。例如，在 statistics 模块中，形参名 dist 在未来可能被修改。这使得以下函数描述成为可能:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quantiles</span>(<span class="params">dist, /, *, n=<span class="number">4</span>, method=<span class="string">&#x27;exclusive&#x27;</span></span>) </span></span><br><span class="line"><span class="function">  ...</span></span><br></pre></td></tr></table></figure>
<p>由于在 / 左侧的形参不会被公开为可用关键字，其他形参名仍可在 **kwargs 中使用:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">a, b, /, **kwargs</span>):</span> </span><br><span class="line">...   <span class="built_in">print</span>(a, b, kwargs) </span><br><span class="line">... </span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f(<span class="number">10</span>, <span class="number">20</span>, a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)    </span><br><span class="line"><span class="number">10</span> <span class="number">20</span> &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>
<p>这极大地简化了需要接受任意关键字参数的函数和方法的实现。例如，下面是 collections 模块中的代码摘录：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span>(<span class="params"><span class="built_in">dict</span></span>):</span> </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, iterable=<span class="literal">None</span>, /, **kwds</span>):</span> </span><br></pre></td></tr></table></figure>
<h3 id="3、f-字符串支持">3、f 字符串支持</h3>
<p>增加 = 说明符用于 f-string。形式为 f'{expr=}' 的 f 字符串将扩展表示为表达式文本，加一个等于号，再加表达式的求值结果。例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>user = <span class="string">&#x27;eric_idle&#x27;</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>member_since = date(<span class="number">1975</span>, <span class="number">7</span>, <span class="number">31</span>) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f&#x27;<span class="subst">&#123;user=&#125;</span> <span class="subst">&#123;member_since=&#125;</span>&#x27;</span> </span><br><span class="line"><span class="string">&quot;user=&#x27;eric_idle&#x27; member_since=datetime.date(1975, 7, 31)&quot;</span></span><br><span class="line"></span><br><span class="line">f 字符串格式说明符允许更细致地控制所要显示的表达式结果:</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>delta = date.today() - member_since </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f&#x27;<span class="subst">&#123;user=!s&#125;</span> <span class="subst">&#123;delta.days=:,d&#125;</span>&#x27;</span> </span><br><span class="line"><span class="string">&#x27;user=eric_idle delta.days=16,075&#x27;</span></span><br><span class="line"></span><br><span class="line">= 说明符将输出整个表达式，以便详细演示计算过程:</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;theta=&#125;</span> <span class="subst">&#123;cos(radians(theta))=:<span class="number">.3</span>f&#125;</span>&#x27;</span>) </span><br><span class="line">theta=<span class="number">30</span> cos(radians(theta))=<span class="number">0.866</span></span><br></pre></td></tr></table></figure>
<h3 id="4、typing-模块的改进">4、typing 模块的改进</h3>
<p>Python 是动态类型语言，但可以通过 typing 模块添加类型提示，以便第三方工具验证 Python 代码。Python 3.8 给 typing 添加了一些新元素，因此它能够支持更健壮的检查：</p>
<ul>
<li>final 修饰器和 Final 类型标注表明，被修饰或被标注的对象在任何时候都不应该被重写、继承，也不能被重新赋值。</li>
<li>Literal 类型将表达式限定为特定的值或值的列表（不一定是同一个类型的值）。</li>
<li>TypedDict 可以用来创建字典，其特定键的值被限制在一个或多个类型上。注意这些限制仅用于编译时确定值的合法性，而不能在运行时进行限制。</li>
</ul>
<h3 id="5、多进程共享内存">5、多进程共享内存</h3>
<p>multiprocessing 模块新增 SharedMemory 类，可以在不同的 Python 进城之间创建共享的内存区域。</p>
<p>在旧版本的 Python 中，进程间共享数据只能通过写入文件、通过网络套接字发送，或采用 Python 的 pickle 模块进行序列化等方式。共享内存提供了进程间传递数据的更快的方式，从而使得 Python 的多处理器和多内核编程更有效率。</p>
<p>共享内存片段可以作为单纯的字节区域来分配，也可以作为不可修改的类似于列表的对象来分配，其中能保存数字类型、字符串、字节对象、None 对象等一小部分 Python 对象。</p>
<h3 id="6、新版本的-pickle-协议">6、新版本的 pickle 协议</h3>
<p>Python 的 pickle 模块提供了一种序列化和反序列化 Python 数据结构或实例的方法，可以将字典原样保存下来供以后读取。不同版本的 Python 支持的 pickle 协议不同，而 3.8 版本的支持范围更广、更强大、更有效的序列化。</p>
<p>Python 3.8 引入的第 5 版 pickle 协议可以用一种新方法 pickle 对象，它能支持 Python 的缓冲区协议，如 bytes、memoryviews 或 Numpy array 等。新的 pickle 避免了许多在 pickle 这些对象时的内存复制操作。</p>
<p>NumPy、Apache Arrow 等外部库在各自的 Python 绑定中支持新的 pickle 协议。新的 pickle 也可以作为 Python 3.6 和 3.7 的插件使用，可以从 PyPI 上安装。</p>
<h3 id="7、性能改进">7、性能改进</h3>
<ul>
<li>许多内置方法和函数的速度都提高了 20%~50%，因为之前许多函数都需要进行不必要的参数转换。</li>
<li>一个新的 opcode 缓存可以提高解释器中特定指令的速度。但是，目前实现了速度改进的只有 LOAD_GLOBAL opcode，其速度提高了 40%。以后的版本中也会进行类似的优化。</li>
<li>文件复制操作如 shutil.copyfile() 和 shutil.copytree() 现在使用平台特定的调用和其他优化措施，来提高操作速度。</li>
<li>新创建的列表现在平均比以前小了 12%，这要归功于列表构造函数如果能提前知道列表长度的情况下，可以进行优化。</li>
<li>Python 3.8 中向新型类（如 class A(object)）的类变量中的写入操作变得更快。operator.itemgetter() 和 collections.namedtuple() 也得到了速度优化。</li>
</ul>
<p>更多详细特性，请查阅 Python 3.8.0 文档：<a href="https://docs.python.org/zh-cn/3.8/whatsnew/3.8.html">https://docs.python.org/zh-cn/3.8/whatsnew/3.8.html</a></p>
<h2 id="四、Python3-9新特性">四、Python3.9新特性</h2>
<p>Python3.9 的一些新特性，如：更快速的进程释放，性能的提升，简便的新字符串函数，字典并集运算符以及更兼容稳定的内部 API，详细如下：</p>
<ul>
<li>字典并集和可迭代更新</li>
<li>字符串方法</li>
<li>类型提示</li>
<li>新的数学函数</li>
<li>新的解析器</li>
<li>IPv6 范围内的地址</li>
<li>新模块：区域信息</li>
<li>其他语言更改</li>
</ul>
<h3 id="1、字典并集和可迭代更新">1、字典并集和可迭代更新</h3>
<p>Python 3.9 dict 类。如果有两个字典 a 和 b，则现在可以使用这些运算符进行合并和更新。
我们有合并运算符 |：
<img src="https://img.jbzj.com/file_images/article/202010/2020101011504379.png" class="lazyload" data-srcset="https://img.jbzj.com/file_images/article/202010/2020101011504379.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>使用 Iterables 进行字典更新</p>
<p>| = 运算符的另一个很棒的性能是能够使用可迭代对象（如列表或生成器）用新的键值对来更新字典：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;b&#x27;</span>: <span class="string">&#x27;two&#x27;</span>&#125;</span><br><span class="line">b = ((i, i**<span class="number">2</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>))</span><br><span class="line">a |= b</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;b&#x27;</span>: <span class="string">&#x27;two&#x27;</span>, <span class="number">0</span>: <span class="number">0</span>, <span class="number">1</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2、字符串方法">2、字符串方法</h3>
<p><strong>removeprefix（）和 removesuffix（）</strong></p>
<p>str.removeprefix（substring：string）字符串方法：如果 str 以它开头的话，将会返回一个修改过前缀的新字符串，否则它将返回原始字符串。</p>
<p>str.removesuffix（substring：string）字符串方法：如果 str 以其结尾，则返回带有修改过后缀的新字符串，否则它将返回原始字符串。</p>
<p><img src="https://img.jbzj.com/file_images/article/202010/2020101011504380.png" class="lazyload" data-srcset="https://img.jbzj.com/file_images/article/202010/2020101011504380.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>这两个函数执行的操作将使用 string [len（prefix）：] 作为前缀，string [：-len（suffix）] 作为后缀。</p>
<p>这些是非常简单的操作，因此实现的也是非常简单的功能，但是考虑到可能会经常执行这些操作，最好有一个内置的函数可以完成此操作。</p>
<h3 id="3、类型提示">3、类型提示</h3>
<p>Python 是动态类型的，动态地为变量指定数据类型，意味着我们无需在代码中指定数据类型。
但有时可能会造成混淆！</p>
<p>对于数据类型的静态分配，通常使用类型提示。这是在 Python 3.5 中引入的。从 3.5 开始，我们可以指定类型，但这是比较麻烦的。</p>
<p>这项更新真正改变了这一点，现在可以将内置集合类型（List 和 Dict）用作泛型类型。
之前，必须通过输入来调用大写类型 List 和 Dict。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ef greet_all(names: <span class="built_in">list</span>[<span class="built_in">str</span>]) -&gt; <span class="literal">None</span>:</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello&quot;</span>, name)</span><br></pre></td></tr></table></figure>
<p>现在，无需从 typing.List 来调用 List</p>
<h3 id="4、新的数学函数">4、新的数学函数</h3>
<p>数学模块添加和改进了许多辅助功能，从对现有功能的改进开始。</p>
<p>以前计算最大公因数的 gcd 函数只能应用于 2 个数字，迫使程序员在处理更多数字时必须执行类似 math.gcd（80，math.gcd（64，152））的操作。从 Python 3.9 开始，我们可以将其应用于任意数字的值。</p>
<p>math 模块中第一个新添加的是 math.lcm 函数：</p>
<p>math.lcm 计算其参数的最小公倍数。与 GCD 一样，它允许可变数量的参数。</p>
<h3 id="5、新的解析器">5、新的解析器</h3>
<p>这部分更多是视线之外的改变，但有可能成为 Python 未来发展中最重大的改变之一。</p>
<p>Python 3.9 使用了一个新的基于 PEG 的解析器。以前 Python 使用 LL（1），在构建该语言的新功能时，PEG 比 LL（1）更灵活。官方文档中表示，这种灵活性将在 Python 3.10 及更高版本中体现出来。</p>
<p>ast 模块使用新的解析器，并产生与旧解析器相同的 AST。</p>
<h3 id="6、IPv6-范围内的地址">6、IPv6 范围内的地址</h3>
<p>Python 3.9 的另<strong>一个变化是</strong>可以指定 IPv6 地址的范围。IPv6 范围用于指定相应 IP 地址在 Internet 的哪个部分有效。</p>
<p>范围可以使用％符号在 IP 地址的末尾指定——例如：3FFE：0：0：1：200：F8FF：FE75：50DF％2——因此该 <strong>IP 地址在范围 2</strong> 中，即链接本地地址。</p>
<p>因此，如果需要使用 Python 处理 IPv6 地址，现在可以这样处理：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> ipaddress <span class="keyword">import</span> IPv6Address</span><br><span class="line"></span><br><span class="line">addr = IPv6Address(<span class="string">&#x27;ff02::fa51%1&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(addr.scope_id)</span><br></pre></td></tr></table></figure>
<h3 id="7、新模块：区域信息">7、新模块：区域信息</h3>
<p><strong>区域信息</strong></p>
<p>zoneinfo 模块将 IANA 时区数据库的支持引入标准库。它添加了 zoneinfo.ZoneInfo，这是一个由系统时区数据支持的具体的 datetime.tzinfo 实现。
<img src="https://img.jbzj.com/file_images/article/202010/2020101011504381.png" class="lazyload" data-srcset="https://img.jbzj.com/file_images/article/202010/2020101011504381.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h3 id="8、其他语言更改">8、其他语言更改</h3>
<p>__import __（）<strong>现在增加了 ImportError</strong> 以替代 ValueError，通常在相对导入超出其顶级包时发生。
“” .replace（“”，s，n）现在对于所有非零 n 返回 s 而不是空字符串。现在它与 ““ .replace（”“，s）相一致。</p>
<p><strong>默认状态下，Python 变得更快</strong></p>
<p>Python 的每个修订版与以前的版本相比都有性能改进。Python 3.9 进行了两项重大改进，可以提高性能但无需对现有代码进行任何更改。</p>
<p>第一个改进更多涉及矢量调用协议的使用，通过最小化或消除临时对象进行许多常见函数的调用。Python 3.9 引入了几个新的内置函数，包括 range、tuple、set、frozenset、list、dict ——使用 vectorcall 可以加快执行速度。</p>
<p><strong>Python 切换到年度发布周期</strong></p>
<p>到目前为止，Python 已经以 18 个月的节奏进行了开发和发布。PEP 602 提议 Python 开发团队采用年度发布周期，并且该提议已被接受。</p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>如何在Ubuntu18和Centos7下搭建Hadoop2.6.5集群和伪集群</title>
    <url>/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/</url>
    <content><![CDATA[<p>Hadoop被公认是一套行业大数据标准开源软件，在分布式环境下提供了海量数据的处理能力。单节点集群是利用一台主机模拟Hadoop运行环境，可以使用Hadoop所有模块
<img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/20200522160349.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/20200522160349.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<span id="more"></span>
<h2 id="一、准备">一、准备</h2>
<h3 id="1-1创建Hadoop用户">1.1创建Hadoop用户</h3>
<p>在操作过程中，ubuntu系统和centos系统不同的执行的命令我都做了说明，没有说明的命令则两种系统都能执行</p>
<blockquote>
<p>ubuntu命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo useradd -m hadoop -s /bin/bash     <span class="comment"># 创建hadoop用户，并使用/bin/bash作为shell</span></span><br><span class="line">sudo passwd hadoop                      <span class="comment"># 为hadoop用户设置密码，之后需要连续输入两次密码</span></span><br><span class="line">sudo adduser hadoop sudo                <span class="comment"># 为hadoop用户增加管理员权限</span></span><br><span class="line">su - hadoop                             <span class="comment"># 切换当前用户为用户hadoop</span></span><br><span class="line">sudo apt-get update                     <span class="comment"># 更新软件包信息</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>centos命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo useradd -m hadoop -s /bin/bash     <span class="comment"># 创建hadoop用户，并使用/bin/bash作为shell</span></span><br><span class="line">sudo passwd hadoop                      <span class="comment"># 设置密码</span></span><br><span class="line">sudo visudo                             <span class="comment"># 设置管理员，找到root ALL=(ALL) ALL这行，在下面增加一行hadoop ALL=(ALL) ALL</span></span><br><span class="line">su - hadoop                             <span class="comment"># 切换当前用户为用户hadoop</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2设置SSH无密码登录">1.2设置SSH无密码登录</h3>
<blockquote>
<p>ubuntu命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install openssh-server     <span class="comment"># 安装SSH server</span></span><br><span class="line">ssh localhost                           <span class="comment"># 登陆SSH，第一次登陆输入yes</span></span><br><span class="line"><span class="built_in">exit</span>                                    <span class="comment"># 退出登录的ssh localhost</span></span><br><span class="line"><span class="built_in">cd</span> ~/.ssh/                              <span class="comment"># 如果没法进入该目录，执行一次ssh localhost</span></span><br><span class="line">ssh-keygen -t rsa                       <span class="comment"># 产生秘钥进行后续身份验证，需三次回车确认</span></span><br><span class="line">cat ./id_rsa.pub &gt;&gt; ./authorized_keys   <span class="comment"># 将产生的Key放到许可证文件中</span></span><br><span class="line">ssh localhost                           <span class="comment"># 此时已不需密码即可登录localhost</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>centos命令</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rpm -qa | grep ssh                      # 查看ssh是否安装，如果包含了SSH client跟SSH server，则不需要再安装</span><br><span class="line">sudo yum install openssh-clients        # 安装ssh</span><br><span class="line">sudo yum install openssh-server</span><br><span class="line">ssh localhost                           # 登陆SSH，输入yes,然后按提示输入hadoop密码</span><br><span class="line">exit                                    # 退出刚才的 ssh localhost</span><br><span class="line">cd ~/.ssh/                              # 若没有该目录，请先执行一次ssh localhost</span><br><span class="line">ssh-keygen -t rsa                       # 会有提示，都按回车就可以</span><br><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys       # 加入授权</span><br><span class="line">chmod 600 ./authorized_keys             # 修改文件权限</span><br></pre></td></tr></table></figure>
<h2 id="二、安装JDK">二、安装JDK</h2>
<blockquote>
<p>ubuntu命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -version                           <span class="comment"># 查看当前java版本，未出现版本信息代表未安装</span></span><br><span class="line">sudo apt-get install default-jdk        <span class="comment"># 使用apt-get安装openJDK</span></span><br><span class="line">java -version                           <span class="comment"># 再次查询Java版本，查看是否安装成功</span></span><br></pre></td></tr></table></figure>
<p>查询java安装路径路径，记住该路径，下面步骤中的配置要用到</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">update-alternatives --display java</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1847_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1847_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1847_1.png"></p>
<blockquote>
<p>centos命令
安装openJDK</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install java-1.8.0-openjdk.x86_64 java-1.8.0-openjdk-devel.x86_64</span><br></pre></td></tr></table></figure>
<p>jdk路径</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/usr/lib/jvm/java-1.8.0-openjdk</span><br></pre></td></tr></table></figure>
<h2 id="三、下载安装Hadoop">三、下载安装Hadoop</h2>
<blockquote>
<p>ubuntu命令</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt-get install wget</span><br></pre></td></tr></table></figure>
<blockquote>
<p>centos命令</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum -y install wget</span><br></pre></td></tr></table></figure>
<p>下载安装hadoop</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget http://archive.apache.org/dist/hadoop/core/hadoop-2.6.4/hadoop-2.6.5.tar.gz     <span class="comment"># 下载hadoop</span></span><br><span class="line">sudo tar -zxvf hadoop-2.6.5.tar.gz      <span class="comment"># 解压缩</span></span><br><span class="line">sudo mv hadoop-2.6.5 /usr/<span class="built_in">local</span>/hadoop  <span class="comment"># 将hadoop移动到/usr/local/hadoop</span></span><br><span class="line">ll  /usr/<span class="built_in">local</span>/hadoop                   <span class="comment"># 查看hadoop安装目录</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1849_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1849_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1849_1.png"></p>
<ul>
<li>bin是运行文件目录，包括Hadoop、HDFS和YARN</li>
<li>sbin是shell文件目录，<a href="http://xn--start-all-zp6on31l.sh">包括start-all.sh</a>、<a href="http://stop-all.sh">stop-all.sh</a></li>
<li>etc/hadoop目录包含hadoop配置文件</li>
<li>lib是hadoop函数库目录</li>
<li>logs系统日志目录</li>
</ul>
<h2 id="四、设置Hadoop环境变量">四、设置Hadoop环境变量</h2>
<p>在终端输入命令打开编辑器
使用vim编辑器，点击键盘&quot;i&quot;, 就能开始编辑。输入配置文件内容后，点击键盘&quot;esc&quot;键，然后输入<code>:wq</code>来保存退出</p>
<blockquote>
<p>ubuntu命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim --version                      <span class="comment"># 检查是否安装vim</span></span><br><span class="line">sudo apt-get install vim                <span class="comment"># 安装vim</span></span><br><span class="line">sudo vim ~/.bashrc                      <span class="comment"># 编辑.bashrc</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>centos命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo rpm -qa|grep vim                   <span class="comment"># 检查是否安装vim</span></span><br><span class="line">sudo yum install vim -y                 <span class="comment"># 安装vim</span></span><br><span class="line">sudo vim ~/.bashrc                      <span class="comment"># 编辑.bashrc</span></span><br></pre></td></tr></table></figure>
<p>在编辑器中输入下面内容</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置jdk安装路径，参考安装jdk的部分输出的路径</span></span><br><span class="line">export JAVA_HOME=/usr/lib/jvm/java-<span class="number">8</span>-openjdk-amd64</span><br><span class="line"><span class="comment"># centos的jdk路径，使用cento时取消下面注释</span></span><br><span class="line"><span class="comment"># export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk</span></span><br><span class="line"><span class="comment"># 设置HADOOP_HOME为安装路径</span></span><br><span class="line">export HADOOP_HOME=/usr/local/hadoop</span><br><span class="line"><span class="comment"># 设置PATH</span></span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/<span class="built_in">bin</span></span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/sbin</span><br><span class="line"><span class="comment"># 其他环境变量</span></span><br><span class="line">export CLASSPATH=$($HADOOP_HOME/<span class="built_in">bin</span>/hadoop classpath):$CLASSPATH</span><br><span class="line">export HADOOP_MAPRED_HOME=$HADOOP_HOME</span><br><span class="line">export HADOOP_COMMON_HOME=$HADOOP_HOME</span><br><span class="line">export HADOOP_HDFS_HOME=$HADOOP_HOME</span><br><span class="line">export YARN_HOME=$HADOOP_HOME</span><br><span class="line"><span class="comment"># 连接库相关设置</span></span><br><span class="line">export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib/native</span><br><span class="line">export HADOOP_OPTS=<span class="string">&quot;-DJava.library.path=$HADOOP_HOME/lib&quot;</span></span><br><span class="line">export JAVA_LIBRARY_PATH=$HADOOP_HOME/lib/native:$JAVA_LIBRARY_PATH</span><br></pre></td></tr></table></figure>
<p>或者图形界面可以使用<code>sudo gedit ~/.bashrc</code>命令编辑，在编辑器中输入后，然后按ctrl+s保存，再关闭编辑器
<img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1851_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1851_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1851_1.png"></p>
<p>让设置立即生效</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1853_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1853_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1853_1.png"></p>
<h2 id="五、修改Hadoop配置文件">五、修改Hadoop配置文件</h2>
<p><a href="http://xn--hadoop-env-0840as06l.sh">编辑hadoop-env.sh</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/hadoop-env.sh</span><br></pre></td></tr></table></figure>
<p>设置JAVA_HOME的路径，参考安装jdk的部分输出的路径，编辑完成保存退出
<img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1855_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1855_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1855_1.png"></p>
<p>修改core-site.xml文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/core-site.xml</span><br></pre></td></tr></table></figure>
<p>输入以下内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/hadoop_data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">description</span>&gt;</span>Abase for other temporary directories.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.default.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第一个节点是临时目录，第二个节点是HDFS默认名称
<img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1857_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1857_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1857_1.png"></p>
<p>编辑yarn-site.xml</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/yarn-site.xml</span><br></pre></td></tr></table></figure>
<p>输入以下内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Site specific YARN configuration properties --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services.mapreduce.shuffle.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.mapred.ShuffleHandler<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1867_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1867_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1867_1.png"></p>
<p>编辑mapred-site.xml，mapred-site.xml用于监控Map与Reduce程序的JobTracker任务分配情况以及TaskTracker任务运行情况</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo cp /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/mapred-site.xml.template /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/mapred-site.xml    <span class="comment">#复制模板文件</span></span><br><span class="line">sudo vim /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/mapred-site.xml</span><br></pre></td></tr></table></figure>
<p>输入以下内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个节点是设置mapreduce框架为yarn
<img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1865_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1865_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1865_1.png"></p>
<p>编辑 hdfs-site.xml</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/hdfs-site.xml</span><br></pre></td></tr></table></figure>
<p>输入下面内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/hadoop_data/hdfs/namenode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/hadoop_data/hdfs/datanode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第一个节点是设置blocks副本备份数量，第二个是NameNode数据存储目录，第三个是DataNode数据存储目录
<img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1863_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1863_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1863_1.png"></p>
<h2 id="六、创建并格式化HDFS目录">六、创建并格式化HDFS目录</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkdir -p /usr/<span class="built_in">local</span>/hadoop/hadoop_data/hdfs/namenode   <span class="comment">#创建namenode数据存储目录</span></span><br><span class="line">sudo mkdir -p /usr/<span class="built_in">local</span>/hadoop/hadoop_data/hdfs/datanode   <span class="comment">#创建datanode数据存储目录</span></span><br><span class="line">sudo chown -R hadoop /usr/<span class="built_in">local</span>/hadoop                      <span class="comment">#修改Hadoop目录所有者为hadoop</span></span><br><span class="line">hadoop namenode -format                                     <span class="comment">#格式化HDFS</span></span><br></pre></td></tr></table></figure>
<h2 id="七、启动Hadoop">七、启动Hadoop</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">start-dfs.sh                       <span class="comment">#启动HDFS</span></span><br><span class="line">start-yarn.sh                      <span class="comment">#启动Hadoop MapReduce框架Yarn</span></span><br></pre></td></tr></table></figure>
<p>或者同时启动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">start-all.sh</span><br></pre></td></tr></table></figure>
<p>输入<code>jps</code>查看进程是否启动
<img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1869_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1869_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1869_1.png"></p>
<p>查看Hadoop ResourceManager Web页面，打开浏览器输入 <a href="http://localhost:8088/">http://localhost:8088/</a>
<img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1871_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1871_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1871_1.png"></p>
<p>查看NameNode HDFS Web页面，打开浏览器输入 <a href="http://localhost:50070/">http://localhost:50070/</a>
<img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1873_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/1873_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="1873_1.png"></p>
<h2 id="八、搭建hadoop集群">八、搭建hadoop集群</h2>
<p>Hadoop 的运行方式是由配置文件决定的（运行 Hadoop 时会读取配置文件），因此如果需要从伪分布式模式切换回分布式模式，需要修改配置文件，先按照上面一二三四步骤搭建环境，再进行下面的步骤</p>
<p>准备四台计算机，其中有一台namenode和三台datanode</p>
<h3 id="8-1-配置第一台datanode服务器">8.1 配置第一台datanode服务器</h3>
<p>先把ip改成固定ip</p>
<blockquote>
<p>ubuntu改ip命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/network/interfaces                <span class="comment">#改ip,</span></span><br><span class="line">sudo /etc/init.d/networking restart             <span class="comment">#重启网卡</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>centos改ip命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens192 <span class="comment">#改ip,</span></span><br><span class="line">service network restart                         <span class="comment">#重启网卡</span></span><br></pre></td></tr></table></figure>
<p>修改主机名为data1</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/hostname</span><br></pre></td></tr></table></figure>
<p>编辑hosts文件，每台ip对应一个主机</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/hosts</span><br></pre></td></tr></table></figure>
<p>编辑core-site.xml</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/core-site.xml</span><br></pre></td></tr></table></figure>
<p>输入以下内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.default.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://master:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>编辑yarn-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /usr/local/hadoop/etc/hadoop/yarn-site.xml</span><br></pre></td></tr></table></figure>
<p>输入下面内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Site specific YARN configuration properties --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services.mapreduce.shuffle.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.mapred.ShuffleHandler<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.resource-tracker.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:8025<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.scheduler.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:8030<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:8050<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上设置说明：</p>
<ul>
<li>ResourceManager主机与NodeManager的连接地址为8025</li>
<li>ResourceManager与ApplicationMater的连接地址为8030</li>
<li>ResourceManager与客户端的连接地址为8050</li>
</ul>
<p>编辑mapred-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /usr/local/hadoop/etc/hadoop/mapred-site.xml</span><br></pre></td></tr></table></figure>
<p>输入下面内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapred.job.tracker<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:54311<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>编辑hdfs-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /usr/local/hadoop/etc/hadoop/hdfs-site.xml</span><br></pre></td></tr></table></figure>
<p>输入下面内容,设置datanode目录</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/hadoop_data/hdfs/datanode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>重复以上步骤再建立3台主机，如果是VM虚拟机则复制3台虚拟机</p>
<h3 id="8-2-配置第二台datanode服务器">8.2 配置第二台datanode服务器</h3>
<p>先把ip改成固定ip</p>
<blockquote>
<p>ubuntu改ip命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/network/interfaces                <span class="comment">#改ip,</span></span><br><span class="line">sudo /etc/init.d/networking restart             <span class="comment">#重启网卡</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>centos改ip命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens192 <span class="comment">#改ip,</span></span><br><span class="line">service network restart                         <span class="comment">#重启网卡</span></span><br></pre></td></tr></table></figure>
<p>改主机名为data2</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/hostname</span><br></pre></td></tr></table></figure>
<h3 id="8-3-配置第三台datanode服务器">8.3 配置第三台datanode服务器</h3>
<p>先把ip改成固定ip</p>
<blockquote>
<p>ubuntu改ip命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/network/interfaces                <span class="comment">#改ip,</span></span><br><span class="line">sudo /etc/init.d/networking restart             <span class="comment">#重启网卡</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>centos改ip命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens192 <span class="comment">#改ip,</span></span><br><span class="line">service network restart                         <span class="comment">#重启网卡</span></span><br></pre></td></tr></table></figure>
<p>改主机名为data3</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/hostname</span><br></pre></td></tr></table></figure>
<h3 id="8-4-配置一台namenode服务器">8.4 配置一台namenode服务器</h3>
<p>先把ip改成固定ip</p>
<blockquote>
<p>ubuntu改ip命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/network/interfaces                <span class="comment">#改ip,</span></span><br><span class="line">sudo /etc/init.d/networking restart             <span class="comment">#重启网卡</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>centos改ip命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens192 <span class="comment">#改ip,</span></span><br><span class="line">service network restart                         <span class="comment">#重启网卡</span></span><br></pre></td></tr></table></figure>
<p>改主机名为master</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/hostname</span><br></pre></td></tr></table></figure>
<p>编辑hdfs-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /usr/local/hadoop/etc/hadoop/hdfs-site.xml</span><br></pre></td></tr></table></figure>
<p>输入下面内容,设置datanode目录</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/hadoop_data/hdfs/namenode<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>编辑masters文件,主要是告诉hadoop哪一台服务器是namenode</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vim /usr/local/hadoop/etc/hadoop/masters   # 设置master</span><br></pre></td></tr></table></figure>
<p>编辑slaves文件,主要是告诉hadoop哪一台服务器是datanode</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vim /usr/local/hadoop/etc/hadoop/slaves    #设置data1,data2,data3</span><br></pre></td></tr></table></figure>
<p>手动重启所有服务器</p>
<h3 id="8-5-mater连接data1、data2、data3，创建HDFS目录">8.5 mater连接data1、data2、data3，创建HDFS目录</h3>
<p>使用master主机连接data1进行配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh data1                                               <span class="comment"># ssh连接到data1</span></span><br><span class="line">sudo rm -rf /usr/<span class="built_in">local</span>/hadoop/hadoop_data/hdfs          <span class="comment"># 删除HDFS所有目录</span></span><br><span class="line">mkdir -p /usr/<span class="built_in">local</span>/hadoop/hadoop_data/hdfs/datanode    <span class="comment"># 创建DataNode存储目录</span></span><br><span class="line">sudo chown -R hadoop:hadoop /usr/<span class="built_in">local</span>/hadoop           <span class="comment"># 更改目录所有者</span></span><br><span class="line"><span class="built_in">exit</span>                                                    <span class="comment"># 中断连接回到master</span></span><br></pre></td></tr></table></figure>
<p>使用master主机连接data2进行配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh data2                                               <span class="comment"># ssh连接到data1</span></span><br><span class="line">sudo rm -rf /usr/<span class="built_in">local</span>/hadoop/hadoop_data/hdfs          <span class="comment"># 删除HDFS所有目录</span></span><br><span class="line">mkdir -p /usr/<span class="built_in">local</span>/hadoop/hadoop_data/hdfs/datanode    <span class="comment"># 创建DataNode存储目录</span></span><br><span class="line">sudo chown -R hadoop:hadoop /usr/<span class="built_in">local</span>/hadoop           <span class="comment"># 更改目录所有者</span></span><br><span class="line"><span class="built_in">exit</span>                                                    <span class="comment"># 中断连接回到master</span></span><br></pre></td></tr></table></figure>
<p>使用master主机连接data3进行配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh data3                                               <span class="comment"># ssh连接到data1</span></span><br><span class="line">sudo rm -rf /usr/<span class="built_in">local</span>/hadoop/hadoop_data/hdfs          <span class="comment"># 删除HDFS所有目录</span></span><br><span class="line">mkdir -p /usr/<span class="built_in">local</span>/hadoop/hadoop_data/hdfs/datanode    <span class="comment"># 创建DataNode存储目录</span></span><br><span class="line">sudo chown -R hadoop:hadoop /usr/<span class="built_in">local</span>/hadoop           <span class="comment"># 更改目录所有者</span></span><br><span class="line"><span class="built_in">exit</span>                                                    <span class="comment"># 中断连接回到master</span></span><br></pre></td></tr></table></figure>
<p>创建并格式化namenode HDFS目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su - hadoop                                             <span class="comment"># 切换hadoop用户</span></span><br><span class="line">sudo rm -rf /usr/<span class="built_in">local</span>/hadoop/hadoop_data/hdfs          <span class="comment"># 删除HDFS所有目录</span></span><br><span class="line">mkdir -p /usr/<span class="built_in">local</span>/hadoop/hadoop_data/hdfs/namenode    <span class="comment"># 创建DataNode存储目录</span></span><br><span class="line">sudo chown -R hadoop:hadoop /usr/<span class="built_in">local</span>/hadoop           <span class="comment"># 更改目录所有者</span></span><br><span class="line">hadoop namenode -format                                 <span class="comment"># 格式化namenode HDFS目录</span></span><br></pre></td></tr></table></figure>
<h3 id="8-6-启动集群">8.6 启动集群</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">start-dfs.sh                       <span class="comment"># 启动HDFS，第一次会询问，输入yes</span></span><br><span class="line">start-yarn.sh                      <span class="comment"># 启动Hadoop MapReduce框架Yarn</span></span><br></pre></td></tr></table></figure>
<p>或者同时启动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">start-all.sh</span><br></pre></td></tr></table></figure>
<p>如果要停止可以用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">stop-all.sh</span><br></pre></td></tr></table></figure>
<p>查看master启动的进程</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">jsp</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/Snipaste_2020-07-30_16-57-15.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/Snipaste_2020-07-30_16-57-15.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<p>查看data1启动的进程</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh data1                       <span class="comment"># ssh连接data1</span></span><br><span class="line">jps                             <span class="comment"># 查看data1的进程</span></span><br><span class="line"><span class="built_in">exit</span>                            <span class="comment"># 退出连接</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/Snipaste_2020-07-30_16-59-51.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/Snipaste_2020-07-30_16-59-51.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt></p>
<h3 id="8-7-端口开放说明">8.7 端口开放说明</h3>
<p>集群启动后由于存在防火墙，所以hadoop无法访问，可以按需开放以下端口。或者直接关闭，一劳永逸</p>
<table>
<thead>
<tr>
<th>组件</th>
<th>节点</th>
<th>默认端口</th>
<th>配置</th>
<th>用途说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>HDFS</td>
<td>DataNode</td>
<td>50010</td>
<td>dfs.datanode.address</td>
<td>datanode服务端口，用于数据传输</td>
</tr>
<tr>
<td>HDFS</td>
<td>DataNode</td>
<td>50075</td>
<td>dfs.datanode.http.address</td>
<td>http服务的端口</td>
</tr>
<tr>
<td>HDFS</td>
<td>DataNode</td>
<td>50475</td>
<td>dfs.datanode.https.address</td>
<td>https服务的端口</td>
</tr>
<tr>
<td>HDFS</td>
<td>DataNode</td>
<td>50020</td>
<td>dfs.datanode.ipc.address</td>
<td>ipc服务的端口</td>
</tr>
<tr>
<td>HDFS</td>
<td>NameNode</td>
<td>50070</td>
<td>dfs.namenode.http-address</td>
<td>http服务的端口</td>
</tr>
<tr>
<td>HDFS</td>
<td>NameNode</td>
<td>50470</td>
<td>dfs.namenode.https-address</td>
<td>https服务的端口</td>
</tr>
<tr>
<td>HDFS</td>
<td>NameNode</td>
<td>8020</td>
<td>fs.defaultFS</td>
<td>接收Client连接的RPC端口，用于获取文件系统metadata信息。</td>
</tr>
<tr>
<td>HDFS</td>
<td>journalnode</td>
<td>8485</td>
<td>dfs.journalnode.rpc-address</td>
<td>RPC服务</td>
</tr>
<tr>
<td>HDFS</td>
<td>journalnode</td>
<td>8480</td>
<td>dfs.journalnode.http-address</td>
<td>HTTP服务</td>
</tr>
<tr>
<td>HDFS</td>
<td>ZKFC</td>
<td>8019</td>
<td>dfs.ha.zkfc.port</td>
<td>ZooKeeper FailoverController，用于NN HA</td>
</tr>
<tr>
<td>YARN</td>
<td>ResourceManager</td>
<td>8032</td>
<td>yarn.resourcemanager.address</td>
<td>RM的applications manager(ASM)端口</td>
</tr>
<tr>
<td>YARN</td>
<td>ResourceManager</td>
<td>8030</td>
<td>yarn.resourcemanager.scheduler.address</td>
<td>scheduler组件的IPC端口</td>
</tr>
<tr>
<td>YARN</td>
<td>ResourceManager</td>
<td>8031</td>
<td>yarn.resourcemanager.resource-tracker.address</td>
<td>IPC</td>
</tr>
<tr>
<td>YARN</td>
<td>ResourceManager</td>
<td>8033</td>
<td>yarn.resourcemanager.admin.address</td>
<td>IPC</td>
</tr>
<tr>
<td>YARN</td>
<td>ResourceManager</td>
<td>8088</td>
<td>yarn.resourcemanager.webapp.address</td>
<td>http服务端口</td>
</tr>
<tr>
<td>YARN</td>
<td>NodeManager</td>
<td>8040</td>
<td>yarn.nodemanager.localizer.address</td>
<td>localizer IPC</td>
</tr>
<tr>
<td>YARN</td>
<td>NodeManager</td>
<td>8042</td>
<td>yarn.nodemanager.webapp.address</td>
<td>http服务端口</td>
</tr>
<tr>
<td>YARN</td>
<td>NodeManager</td>
<td>8041</td>
<td>yarn.nodemanager.address</td>
<td>NM中container manager的端口</td>
</tr>
<tr>
<td>YARN</td>
<td>JobHistory Server</td>
<td>10020</td>
<td>mapreduce.jobhistory.address</td>
<td>IPC</td>
</tr>
<tr>
<td>YARN</td>
<td>JobHistory Server</td>
<td>19888</td>
<td>mapreduce.jobhistory.webapp.address</td>
<td>http服务端口</td>
</tr>
<tr>
<td>HBase</td>
<td>Master</td>
<td>60000</td>
<td>hbase.master.port</td>
<td>IPC</td>
</tr>
<tr>
<td>HBase</td>
<td>Master</td>
<td>60010</td>
<td>hbase.master.info.port</td>
<td>http服务端口</td>
</tr>
<tr>
<td>HBase</td>
<td>RegionServer</td>
<td>60020</td>
<td>hbase.regionserver.port</td>
<td>IPC</td>
</tr>
<tr>
<td>HBase</td>
<td>RegionServer</td>
<td>60030</td>
<td>hbase.regionserver.info.port</td>
<td>http服务端口</td>
</tr>
<tr>
<td>HBase</td>
<td>HQuorumPeer</td>
<td>2181</td>
<td>hbase.zookeeper.property.clientPort</td>
<td>HBase-managed ZK mode，使用独立的ZooKeeper集群则不会启用该端口。</td>
</tr>
<tr>
<td>HBase</td>
<td>HQuorumPeer</td>
<td>2888</td>
<td>hbase.zookeeper.peerport</td>
<td>HBase-managed ZK mode，使用独立的ZooKeeper集群则不会启用该端口。</td>
</tr>
<tr>
<td>HBase</td>
<td>HQuorumPeer</td>
<td>3888</td>
<td>hbase.zookeeper.leaderport</td>
<td>HBase-managed ZK mode，使用独立的ZooKeeper集群则不会启用该端口。</td>
</tr>
<tr>
<td>Hive</td>
<td>Metastore</td>
<td>9083</td>
<td>/etc/default/hive-metastore中export PORT=<port>来更新默认端口</port></td>
<td></td>
</tr>
<tr>
<td>Hive</td>
<td>HiveServer</td>
<td>10000</td>
<td>/etc/hive/conf/hive-env.sh中export HIVE_SERVER2_THRIFT_PORT=<port>来更新默认端口</port></td>
<td></td>
</tr>
<tr>
<td>ZooKeeper</td>
<td>Server</td>
<td>2181</td>
<td>/etc/zookeeper/conf/zoo.cfg中clientPort=<port></port></td>
<td>对客户端提供服务的端口</td>
</tr>
<tr>
<td>ZooKeeper</td>
<td>Server</td>
<td>2888</td>
<td>/etc/zookeeper/conf/zoo.cfg中server.x=[hostname]:nnnnn[:nnnnn]，标蓝部分</td>
<td>follower用来连接到leader，只在leader上监听该端口。</td>
</tr>
<tr>
<td>ZooKeeper</td>
<td>Server</td>
<td>3888</td>
<td>/etc/zookeeper/conf/zoo.cfg中server.x=[hostname]:nnnnn[:nnnnn]，标蓝部分</td>
<td>用于leader选举的。只在electionAlg是1,2或3(默认)时需要。</td>
</tr>
</tbody>
</table>
<p>例如开放8025端口</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo firewall-cmd --zone=public --permanent --add-port=8025/tcp</span><br></pre></td></tr></table></figure>
<p>其他防火墙命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo firewall-cmd --state                       <span class="comment"># 运行状态</span></span><br><span class="line">sudo firewall-cmd --list-all                    <span class="comment"># 查看防火墙规则</span></span><br><span class="line">sudo firewall-cmd --zone=public --list-ports    <span class="comment"># 已经开放的端口</span></span><br><span class="line">sudo systemctl stop firewalld.service           <span class="comment"># 停止防火墙</span></span><br><span class="line">sudo systemctl start firewalld.service          <span class="comment"># 运行防火墙</span></span><br><span class="line">sudo systemctl restart firewalld.service        <span class="comment"># 重启防火墙</span></span><br><span class="line">sudo firewall-cmd --zone=public --remove-port=5672/tcp --permanent  <span class="comment"># 关闭5672端口</span></span><br><span class="line">netstat -lnpt <span class="comment"># 查看监听的端口</span></span><br><span class="line">netstat -lnpt | grep 5672 <span class="comment"># 查看端口被哪个进程占用</span></span><br></pre></td></tr></table></figure>
<h2 id="九、Hadoop常用的HDFS命令">九、Hadoop常用的HDFS命令</h2>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>hadoop fs -mkdir</td>
<td>创建HDFS目录</td>
</tr>
<tr>
<td>hadoop fs -ls</td>
<td>列出HDFS目录</td>
</tr>
<tr>
<td>hadoop fs -copyFromLocal</td>
<td>使用copyFromLocal复制本地文件到HDFS</td>
</tr>
<tr>
<td>hadoop fs -put</td>
<td>使用put复制本地文件到HDFS</td>
</tr>
<tr>
<td>hadoop fs -cat</td>
<td>列出HDFS目录下的文件内容</td>
</tr>
<tr>
<td>hadoop fs -copyToLocal</td>
<td>使用copyToLocal将HDFS上的文件复制到本地</td>
</tr>
<tr>
<td>hadoop fs -cp</td>
<td>复制HDFS文件</td>
</tr>
<tr>
<td>hadoop fs -rm</td>
<td>删除HDFS文件</td>
</tr>
</tbody>
</table>
<p>操作示例</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hadoop fs -mkdir -p /usr/hadoop/<span class="built_in">test</span>            <span class="comment"># 创建/usr/hadoop/test目录</span></span><br><span class="line">hadoop fs -copyFromLocal /home/hadoop/data.txt /usr/hadoop/<span class="built_in">test</span>/test.txt <span class="comment"># 复制本地文件到hdfs目录</span></span><br><span class="line">hadoop fs -cat /home/hadoop/data.txt|more       <span class="comment"># 查看文件内容，如果内容较大|more是分页显示</span></span><br><span class="line">hadoop fs -put /home/hadoop/data.txt /usr/hadoop/<span class="built_in">test</span>/test.txt <span class="comment"># put可以直接覆盖文件，copyFromLocal则需要-f命令</span></span><br><span class="line"><span class="comment"># put和copyFromLocal的区别是put可以接受标准输入</span></span><br><span class="line"><span class="built_in">echo</span> abc | hadoop fs -put - /usr/hadoop/<span class="built_in">test</span>/test.txt   <span class="comment"># 输入abc到hdfs文件内容</span></span><br><span class="line">ls /home/hadoop | hadoop fs -put - /usr/hadoop/<span class="built_in">test</span>/hadooplist.txt   <span class="comment"># 将本地目录列表存储到hdfs文件</span></span><br><span class="line">hadoop fs -copyToLocal /usr/hadoop/<span class="built_in">test</span>/hadooplist.txt  <span class="comment"># 复制hdfs文件到本地</span></span><br><span class="line">hadoop fs -get /usr/hadoop/<span class="built_in">test</span>/hadooplist.txt local.txt        <span class="comment"># 使用get复制hdfs文件到本地</span></span><br><span class="line">hadoop fs -cp /usr/hadoop/<span class="built_in">test</span>/hadooplist.txt /usr/hadoop       <span class="comment"># 复制hdfs文件到其他目录</span></span><br><span class="line">hadoop fs -rm /usr/hadoop/<span class="built_in">test</span>/hadooplist.txt           <span class="comment"># 删除hdfs文件</span></span><br><span class="line">hadoop fs -rm -R /usr/hadoop/<span class="built_in">test</span>                       <span class="comment"># 删除hdfs目录</span></span><br><span class="line">hadoop fs -ls -R /                                      <span class="comment"># 查看所有hdfs目录,-R表示子目录也要看</span></span><br></pre></td></tr></table></figure>
<h2 id="十、遇到的问题和解决办法">十、遇到的问题和解决办法</h2>
<p>在安装完成后发现namenode进程没有启动，打不开 <a href="http://localhost:50070/">http://localhost:50070/</a> 页面。首先去查看日志</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/hadoop/logs               <span class="comment">#进入日志目录</span></span><br><span class="line">sz hadoop-hadoop-namenode-csubuntu.log  <span class="comment">#下载日志</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/2006_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/2006_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="2006_1.png"></p>
<p>发现是9000端口被占用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo netstat -lnp | grep 9000           <span class="comment">#查看9000端口占用</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/2010_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/2010_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="2010_1.png"></p>
<p>看到是nginx占用了9000端口,把nginx停止就能重新启动hadoop</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ps -ef | grep nginx                     <span class="comment">#查看nginx主进程</span></span><br><span class="line">sudo <span class="built_in">kill</span> -9 主进程号                   <span class="comment">#强制停止Nginx</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/2012_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/2012_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="2012_1.png"></p>
<p>启动hadoop守护进程
<img src="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/2014_1.png" class="lazyload" data-srcset="/2019/12/17/%E5%A6%82%E4%BD%95%E5%9C%A8Ubuntu18%E5%92%8CCentos7%E4%B8%8B%E6%90%AD%E5%BB%BAHadoop2.6.5%E9%9B%86%E7%BE%A4%E5%92%8C%E4%BC%AA%E9%9B%86%E7%BE%A4/2014_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="2014_1.png"></p>
]]></content>
      <categories>
        <category>程序开发</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>hdfs</tag>
        <tag>hadoop</tag>
      </tags>
  </entry>
</search>
